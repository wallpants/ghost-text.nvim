import{createRequire as __WEBPACK_EXTERNAL_createRequire}from"module";var __webpack_modules__={3162:(e,t,r)=>{var n={};e["exports"]=n;n.themes={};var i=r(3837);var s=n.styles=r(7471);var o=Object.defineProperties;var a=new RegExp(/[\r\n]+/g);n.supportsColor=r(190).supportsColor;if(typeof n.enabled==="undefined"){n.enabled=n.supportsColor()!==false}n.enable=function(){n.enabled=true};n.disable=function(){n.enabled=false};n.stripColors=n.strip=function(e){return(""+e).replace(/\x1B\[\d+m/g,"")};var l=n.stylize=function stylize(e,t){if(!n.enabled){return e+""}var r=s[t];if(!r&&t in n){return n[t](e)}return r.open+e+r.close};var u=/[|\\{}()[\]^$+*?.]/g;var escapeStringRegexp=function(e){if(typeof e!=="string"){throw new TypeError("Expected a string")}return e.replace(u,"\\$&")};function build(e){var t=function builder(){return applyStyle.apply(builder,arguments)};t._styles=e;t.__proto__=f;return t}var c=function(){var e={};s.grey=s.gray;Object.keys(s).forEach((function(t){s[t].closeRe=new RegExp(escapeStringRegexp(s[t].close),"g");e[t]={get:function(){return build(this._styles.concat(t))}}}));return e}();var f=o((function colors(){}),c);function applyStyle(){var e=Array.prototype.slice.call(arguments);var t=e.map((function(e){if(e!=null&&e.constructor===String){return e}else{return i.inspect(e)}})).join(" ");if(!n.enabled||!t){return t}var r=t.indexOf("\n")!=-1;var o=this._styles;var l=o.length;while(l--){var u=s[o[l]];t=u.open+t.replace(u.closeRe,u.open)+u.close;if(r){t=t.replace(a,(function(e){return u.close+e+u.open}))}}return t}n.setTheme=function(e){if(typeof e==="string"){console.log("colors.setTheme now only accepts an object, not a string.  "+"If you are trying to set a theme from a file, it is now your (the "+"caller's) responsibility to require the file.  The old syntax "+"looked like colors.setTheme(__dirname + "+"'/../themes/generic-logging.js'); The new syntax looks like "+"colors.setTheme(require(__dirname + "+"'/../themes/generic-logging.js'));");return}for(var t in e){(function(t){n[t]=function(r){if(typeof e[t]==="object"){var i=r;for(var s in e[t]){i=n[e[t][s]](i)}return i}return n[e[t]](r)}})(t)}};function init(){var e={};Object.keys(c).forEach((function(t){e[t]={get:function(){return build([t])}}}));return e}var h=function sequencer(e,t){var r=t.split("");r=r.map(e);return r.join("")};n.trap=r(8234);n.zalgo=r(6654);n.maps={};n.maps.america=r(9669)(n);n.maps.zebra=r(6459)(n);n.maps.rainbow=r(3267)(n);n.maps.random=r(8391)(n);for(var d in n.maps){(function(e){n[e]=function(t){return h(n.maps[e],t)}})(d)}o(n,init())},8234:e=>{e["exports"]=function runTheTrap(e,t){var r="";e=e||"Run the trap, drop the bass";e=e.split("");var n={a:["@","ƒÑ","»∫","…Ö","Œî","Œõ","–î"],b:["√ü","∆Å","…É","…Æ","Œ≤","‡∏ø"],c:["¬©","»ª","œæ"],d:["√ê","∆ä","‘Ä","‘Å","‘Ç","‘É"],e:["√ã","ƒï","∆é","…ò","Œ£","Œæ","“º","‡©¨"],f:["”∫"],g:["…¢"],h:["ƒ¶","∆ï","“¢","“∫","”á","‘ä"],i:["‡ºè"],j:["ƒ¥"],k:["ƒ∏","“†","”É","‘û"],l:["ƒπ"],m:[" ç","”ç","”é","‘†","‘°","‡µ©"],n:["√ë","≈ã","∆ù","Õ∂","Œ†","“ä"],o:["√ò","√µ","√∏","«æ"," ò","—∫","◊ù","€ù","‡πè"],p:["«∑","“é"],q:["‡ßç"],r:["¬Æ","∆¶","»ê","…å"," Ä","–Ø"],s:["¬ß","œû","œü","œ®"],t:["≈Å","≈¶","Õ≥"],u:["∆±","’ç"],v:["◊ò"],w:["–®","—†","—º","‡µ∞"],x:["“≤","”æ","”º","”Ω"],y:["¬•","“∞","”ã"],z:["∆µ","…Ä"]};e.forEach((function(e){e=e.toLowerCase();var t=n[e]||[" "];var i=Math.floor(Math.random()*t.length);if(typeof n[e]!=="undefined"){r+=n[e][i]}else{r+=e}}));return r}},6654:e=>{e["exports"]=function zalgo(e,t){e=e||"   he is here   ";var r={up:["Ãç","Ãé","ÃÑ","ÃÖ","Ãø","Ãë","ÃÜ","Ãê","Õí","Õó","Õë","Ãá","Ãà","Ãä","ÕÇ","Ãì","Ãà","Õä","Õã","Õå","ÃÉ","ÃÇ","Ãå","Õê","ÃÄ","ÃÅ","Ãã","Ãè","Ãí","Ãì","Ãî","ÃΩ","Ãâ","Õ£","Õ§","Õ•","Õ¶","Õß","Õ®","Õ©","Õ™","Õ´","Õ¨","Õ≠","ÕÆ","ÕØ","Ãæ","Õõ","ÕÜ","Ãö"],down:["Ãñ","Ãó","Ãò","Ãô","Ãú","Ãù","Ãû","Ãü","Ã†","Ã§","Ã•","Ã¶","Ã©","Ã™","Ã´","Ã¨","Ã≠","ÃÆ","ÃØ","Ã∞","Ã±","Ã≤","Ã≥","Ãπ","Ã∫","Ãª","Ãº","ÕÖ","Õá","Õà","Õâ","Õç","Õé","Õì","Õî","Õï","Õñ","Õô","Õö","Ã£"],mid:["Ãï","Ãõ","ÃÄ","ÃÅ","Õò","Ã°","Ã¢","Ãß","Ã®","Ã¥","Ãµ","Ã∂","Õú","Õù","Õû","Õü","Õ†","Õ¢","Ã∏","Ã∑","Õ°"," “â"]};var n=[].concat(r.up,r.down,r.mid);function randomNumber(e){var t=Math.floor(Math.random()*e);return t}function isChar(e){var t=false;n.filter((function(r){t=r===e}));return t}function heComes(e,t){var n="";var i;var s;t=t||{};t["up"]=typeof t["up"]!=="undefined"?t["up"]:true;t["mid"]=typeof t["mid"]!=="undefined"?t["mid"]:true;t["down"]=typeof t["down"]!=="undefined"?t["down"]:true;t["size"]=typeof t["size"]!=="undefined"?t["size"]:"maxi";e=e.split("");for(s in e){if(isChar(s)){continue}n=n+e[s];i={up:0,down:0,mid:0};switch(t.size){case"mini":i.up=randomNumber(8);i.mid=randomNumber(2);i.down=randomNumber(8);break;case"maxi":i.up=randomNumber(16)+3;i.mid=randomNumber(4)+1;i.down=randomNumber(64)+3;break;default:i.up=randomNumber(8)+1;i.mid=randomNumber(6)/2;i.down=randomNumber(8)+1;break}var o=["up","mid","down"];for(var a in o){var l=o[a];for(var u=0;u<=i[l];u++){if(t[l]){n=n+r[l][randomNumber(r[l].length)]}}}}return n}return heComes(e,t)}},9669:e=>{e["exports"]=function(e){return function(t,r,n){if(t===" ")return t;switch(r%3){case 0:return e.red(t);case 1:return e.white(t);case 2:return e.blue(t)}}}},3267:e=>{e["exports"]=function(e){var t=["red","yellow","green","blue","magenta"];return function(r,n,i){if(r===" "){return r}else{return e[t[n++%t.length]](r)}}}},8391:e=>{e["exports"]=function(e){var t=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(r,n,i){return r===" "?r:e[t[Math.round(Math.random()*(t.length-2))]](r)}}},6459:e=>{e["exports"]=function(e){return function(t,r,n){return r%2===0?t:e.inverse(t)}}},7471:e=>{var t={};e["exports"]=t;var r={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(r).forEach((function(e){var n=r[e];var i=t[e]=[];i.open="["+n[0]+"m";i.close="["+n[1]+"m"}))},6442:e=>{e.exports=function(e,t){t=t||process.argv;var r=t.indexOf("--");var n=/^-{1,2}/.test(e)?"":"--";var i=t.indexOf(n+e);return i!==-1&&(r===-1?true:i<r)}},190:(e,t,r)=>{var n=r(2037);var i=r(6442);var s=process.env;var o=void 0;if(i("no-color")||i("no-colors")||i("color=false")){o=false}else if(i("color")||i("colors")||i("color=true")||i("color=always")){o=true}if("FORCE_COLOR"in s){o=s.FORCE_COLOR.length===0||parseInt(s.FORCE_COLOR,10)!==0}function translateLevel(e){if(e===0){return false}return{level:e,hasBasic:true,has256:e>=2,has16m:e>=3}}function supportsColor(e){if(o===false){return 0}if(i("color=16m")||i("color=full")||i("color=truecolor")){return 3}if(i("color=256")){return 2}if(e&&!e.isTTY&&o!==true){return 0}var t=o?1:0;if(process.platform==="win32"){var r=n.release().split(".");if(Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586){return Number(r[2])>=14931?3:2}return 1}if("CI"in s){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((function(e){return e in s}))||s.CI_NAME==="codeship"){return 1}return t}if("TEAMCITY_VERSION"in s){return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION)?1:0}if("TERM_PROGRAM"in s){var a=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(s.TERM)){return 2}if(/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)){return 1}if("COLORTERM"in s){return 1}if(s.TERM==="dumb"){return t}return t}function getSupportLevel(e){var t=supportsColor(e);return translateLevel(t)}e.exports={supportsColor:getSupportLevel,stdout:getSupportLevel(process.stdout),stderr:getSupportLevel(process.stderr)}},607:(e,t,r)=>{var n=r(3162);e["exports"]=n},3056:(e,t,r)=>{var n=r(1671);e.exports=function create(e){return function adapter(t){try{return n(t,e())}catch(e){}return false}}},7532:(e,t,r)=>{var n=r(3056);e.exports=n((function processenv(){return process.env.DEBUG||process.env.DIAGNOSTICS}))},7060:e=>{var t=[];var r=[];var n=function devnull(){};function use(e){if(~t.indexOf(e))return false;t.push(e);return true}function set(e){n=e}function enabled(e){var r=[];for(var n=0;n<t.length;n++){if(t[n].async){r.push(t[n]);continue}if(t[n](e))return true}if(!r.length)return false;return new Promise((function pinky(t){Promise.all(r.map((function prebind(t){return t(e)}))).then((function resolved(e){t(e.some(Boolean))}))}))}function modify(e){if(~r.indexOf(e))return false;r.push(e);return true}function write(){n.apply(n,arguments)}function process(e){for(var t=0;t<r.length;t++){e=r[t].apply(r[t],arguments)}return e}function introduce(e,t){var r=Object.prototype.hasOwnProperty;for(var n in t){if(r.call(t,n)){e[n]=t[n]}}return e}function nope(e){e.enabled=false;e.modify=modify;e.set=set;e.use=use;return introduce((function diagnopes(){return false}),e)}function yep(e){function diagnostics(){var t=Array.prototype.slice.call(arguments,0);write.call(write,e,process(t,e));return true}e.enabled=true;e.modify=modify;e.set=set;e.use=use;return introduce(diagnostics,e)}e.exports=function create(e){e.introduce=introduce;e.enabled=enabled;e.process=process;e.modify=modify;e.write=write;e.nope=nope;e.yep=yep;e.set=set;e.use=use;return e}},8614:e=>{e.exports=function(e,t){try{Function.prototype.apply.call(console.log,console,t)}catch(e){}}},5788:(e,t,r)=>{var n=r(236);var i=r(6831);e.exports=function ansiModifier(e,t){var r=t.namespace;var s=t.colors!==false?i(r+":",n(r)):r+":";e[0]=s+" "+e[0];return e}},9265:(e,t,r)=>{var n=r(7060);var i=r(6224).isatty(1);var s=n((function dev(e,t){t=t||{};t.colors="colors"in t?t.colors:i;t.namespace=e;t.prod=false;t.dev=true;if(!dev.enabled(e)&&!(t.force||dev.force)){return dev.nope(t)}return dev.yep(t)}));s.modify(r(5788));s.use(r(7532));s.set(r(8614));e.exports=s},1984:(e,t,r)=>{if(process.env.NODE_ENV==="production"){e.exports=r(6175)}else{e.exports=r(9265)}},6175:(e,t,r)=>{var n=r(7060);var i=n((function prod(e,t){t=t||{};t.namespace=e;t.prod=true;t.dev=false;if(!(t.force||prod.force))return prod.nope(t);return prod.yep(t)}));e.exports=i},8115:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.CachedKeyDecoder=void 0;const n=r(9947);const i=16;const s=16;class CachedKeyDecoder{constructor(e=i,t=s){this.maxKeyLength=e;this.maxLengthPerKey=t;this.hit=0;this.miss=0;this.caches=[];for(let e=0;e<this.maxKeyLength;e++){this.caches.push([])}}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,t,r){const n=this.caches[r-1];e:for(const i of n){const n=i.bytes;for(let i=0;i<r;i++){if(n[i]!==e[t+i]){continue e}}return i.str}return null}store(e,t){const r=this.caches[e.length-1];const n={bytes:e,str:t};if(r.length>=this.maxLengthPerKey){r[Math.random()*r.length|0]=n}else{r.push(n)}}decode(e,t,r){const i=this.find(e,t,r);if(i!=null){this.hit++;return i}this.miss++;const s=(0,n.utf8DecodeJs)(e,t,r);const o=Uint8Array.prototype.slice.call(e,t,t+r);this.store(o,s);return s}}t.CachedKeyDecoder=CachedKeyDecoder},7051:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.DecodeError=void 0;class DecodeError extends Error{constructor(e){super(e);const t=Object.create(DecodeError.prototype);Object.setPrototypeOf(this,t);Object.defineProperty(this,"name",{configurable:true,enumerable:false,value:DecodeError.name})}}t.DecodeError=DecodeError},2438:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.Decoder=t.DataViewIndexOutOfBoundsError=void 0;const n=r(4332);const i=r(3983);const s=r(1177);const o=r(9947);const a=r(834);const l=r(8115);const u=r(7051);const isValidMapKeyType=e=>{const t=typeof e;return t==="string"||t==="number"};const c=-1;const f=new DataView(new ArrayBuffer(0));const h=new Uint8Array(f.buffer);t.DataViewIndexOutOfBoundsError=(()=>{try{f.getInt8(0)}catch(e){return e.constructor}throw new Error("never reached")})();const d=new t.DataViewIndexOutOfBoundsError("Insufficient data");const p=new l.CachedKeyDecoder;class Decoder{constructor(e=i.ExtensionCodec.defaultCodec,t=undefined,r=s.UINT32_MAX,n=s.UINT32_MAX,o=s.UINT32_MAX,a=s.UINT32_MAX,l=s.UINT32_MAX,u=p){this.extensionCodec=e;this.context=t;this.maxStrLength=r;this.maxBinLength=n;this.maxArrayLength=o;this.maxMapLength=a;this.maxExtLength=l;this.keyDecoder=u;this.totalPos=0;this.pos=0;this.view=f;this.bytes=h;this.headByte=c;this.stack=[]}reinitializeState(){this.totalPos=0;this.headByte=c;this.stack.length=0}setBuffer(e){this.bytes=(0,a.ensureUint8Array)(e);this.view=(0,a.createDataView)(this.bytes);this.pos=0}appendBuffer(e){if(this.headByte===c&&!this.hasRemaining(1)){this.setBuffer(e)}else{const t=this.bytes.subarray(this.pos);const r=(0,a.ensureUint8Array)(e);const n=new Uint8Array(t.length+r.length);n.set(t);n.set(r,t.length);this.setBuffer(n)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:t,pos:r}=this;return new RangeError(`Extra ${t.byteLength-r} of ${t.byteLength} byte(s) found at buffer[${e}]`)}decode(e){this.reinitializeState();this.setBuffer(e);const t=this.doDecodeSync();if(this.hasRemaining(1)){throw this.createExtraByteError(this.pos)}return t}*decodeMulti(e){this.reinitializeState();this.setBuffer(e);while(this.hasRemaining(1)){yield this.doDecodeSync()}}async decodeAsync(e){let r=false;let i;for await(const n of e){if(r){throw this.createExtraByteError(this.totalPos)}this.appendBuffer(n);try{i=this.doDecodeSync();r=true}catch(e){if(!(e instanceof t.DataViewIndexOutOfBoundsError)){throw e}}this.totalPos+=this.pos}if(r){if(this.hasRemaining(1)){throw this.createExtraByteError(this.totalPos)}return i}const{headByte:s,pos:o,totalPos:a}=this;throw new RangeError(`Insufficient data in parsing ${(0,n.prettyByte)(s)} at ${a} (${o} in the current buffer)`)}decodeArrayStream(e){return this.decodeMultiAsync(e,true)}decodeStream(e){return this.decodeMultiAsync(e,false)}async*decodeMultiAsync(e,r){let n=r;let i=-1;for await(const s of e){if(r&&i===0){throw this.createExtraByteError(this.totalPos)}this.appendBuffer(s);if(n){i=this.readArraySize();n=false;this.complete()}try{while(true){yield this.doDecodeSync();if(--i===0){break}}}catch(e){if(!(e instanceof t.DataViewIndexOutOfBoundsError)){throw e}}this.totalPos+=this.pos}}doDecodeSync(){e:while(true){const e=this.readHeadByte();let t;if(e>=224){t=e-256}else if(e<192){if(e<128){t=e}else if(e<144){const r=e-128;if(r!==0){this.pushMapState(r);this.complete();continue e}else{t={}}}else if(e<160){const r=e-144;if(r!==0){this.pushArrayState(r);this.complete();continue e}else{t=[]}}else{const r=e-160;t=this.decodeUtf8String(r,0)}}else if(e===192){t=null}else if(e===194){t=false}else if(e===195){t=true}else if(e===202){t=this.readF32()}else if(e===203){t=this.readF64()}else if(e===204){t=this.readU8()}else if(e===205){t=this.readU16()}else if(e===206){t=this.readU32()}else if(e===207){t=this.readU64()}else if(e===208){t=this.readI8()}else if(e===209){t=this.readI16()}else if(e===210){t=this.readI32()}else if(e===211){t=this.readI64()}else if(e===217){const e=this.lookU8();t=this.decodeUtf8String(e,1)}else if(e===218){const e=this.lookU16();t=this.decodeUtf8String(e,2)}else if(e===219){const e=this.lookU32();t=this.decodeUtf8String(e,4)}else if(e===220){const e=this.readU16();if(e!==0){this.pushArrayState(e);this.complete();continue e}else{t=[]}}else if(e===221){const e=this.readU32();if(e!==0){this.pushArrayState(e);this.complete();continue e}else{t=[]}}else if(e===222){const e=this.readU16();if(e!==0){this.pushMapState(e);this.complete();continue e}else{t={}}}else if(e===223){const e=this.readU32();if(e!==0){this.pushMapState(e);this.complete();continue e}else{t={}}}else if(e===196){const e=this.lookU8();t=this.decodeBinary(e,1)}else if(e===197){const e=this.lookU16();t=this.decodeBinary(e,2)}else if(e===198){const e=this.lookU32();t=this.decodeBinary(e,4)}else if(e===212){t=this.decodeExtension(1,0)}else if(e===213){t=this.decodeExtension(2,0)}else if(e===214){t=this.decodeExtension(4,0)}else if(e===215){t=this.decodeExtension(8,0)}else if(e===216){t=this.decodeExtension(16,0)}else if(e===199){const e=this.lookU8();t=this.decodeExtension(e,1)}else if(e===200){const e=this.lookU16();t=this.decodeExtension(e,2)}else if(e===201){const e=this.lookU32();t=this.decodeExtension(e,4)}else{throw new u.DecodeError(`Unrecognized type byte: ${(0,n.prettyByte)(e)}`)}this.complete();const r=this.stack;while(r.length>0){const e=r[r.length-1];if(e.type===0){e.array[e.position]=t;e.position++;if(e.position===e.size){r.pop();t=e.array}else{continue e}}else if(e.type===1){if(!isValidMapKeyType(t)){throw new u.DecodeError("The type of key must be string or number but "+typeof t)}if(t==="__proto__"){throw new u.DecodeError("The key __proto__ is not allowed")}e.key=t;e.type=2;continue e}else{e.map[e.key]=t;e.readCount++;if(e.readCount===e.size){r.pop();t=e.map}else{e.key=null;e.type=1;continue e}}}return t}}readHeadByte(){if(this.headByte===c){this.headByte=this.readU8()}return this.headByte}complete(){this.headByte=c}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160){return e-144}else{throw new u.DecodeError(`Unrecognized array type byte: ${(0,n.prettyByte)(e)}`)}}}}pushMapState(e){if(e>this.maxMapLength){throw new u.DecodeError(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`)}this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})}pushArrayState(e){if(e>this.maxArrayLength){throw new u.DecodeError(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`)}this.stack.push({type:0,size:e,array:new Array(e),position:0})}decodeUtf8String(e,t){var r;if(e>this.maxStrLength){throw new u.DecodeError(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`)}if(this.bytes.byteLength<this.pos+t+e){throw d}const n=this.pos+t;let i;if(this.stateIsMapKey()&&((r=this.keyDecoder)===null||r===void 0?void 0:r.canBeCached(e))){i=this.keyDecoder.decode(this.bytes,n,e)}else if(e>o.TEXT_DECODER_THRESHOLD){i=(0,o.utf8DecodeTD)(this.bytes,n,e)}else{i=(0,o.utf8DecodeJs)(this.bytes,n,e)}this.pos+=t+e;return i}stateIsMapKey(){if(this.stack.length>0){const e=this.stack[this.stack.length-1];return e.type===1}return false}decodeBinary(e,t){if(e>this.maxBinLength){throw new u.DecodeError(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`)}if(!this.hasRemaining(e+t)){throw d}const r=this.pos+t;const n=this.bytes.subarray(r,r+e);this.pos+=t+e;return n}decodeExtension(e,t){if(e>this.maxExtLength){throw new u.DecodeError(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`)}const r=this.view.getInt8(this.pos+t);const n=this.decodeBinary(e,t+1);return this.extensionCodec.decode(n,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);this.pos++;return e}readI8(){const e=this.view.getInt8(this.pos);this.pos++;return e}readU16(){const e=this.view.getUint16(this.pos);this.pos+=2;return e}readI16(){const e=this.view.getInt16(this.pos);this.pos+=2;return e}readU32(){const e=this.view.getUint32(this.pos);this.pos+=4;return e}readI32(){const e=this.view.getInt32(this.pos);this.pos+=4;return e}readU64(){const e=(0,s.getUint64)(this.view,this.pos);this.pos+=8;return e}readI64(){const e=(0,s.getInt64)(this.view,this.pos);this.pos+=8;return e}readF32(){const e=this.view.getFloat32(this.pos);this.pos+=4;return e}readF64(){const e=this.view.getFloat64(this.pos);this.pos+=8;return e}}t.Decoder=Decoder},8323:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.Encoder=t.DEFAULT_INITIAL_BUFFER_SIZE=t.DEFAULT_MAX_DEPTH=void 0;const n=r(9947);const i=r(3983);const s=r(1177);const o=r(834);t.DEFAULT_MAX_DEPTH=100;t.DEFAULT_INITIAL_BUFFER_SIZE=2048;class Encoder{constructor(e=i.ExtensionCodec.defaultCodec,r=undefined,n=t.DEFAULT_MAX_DEPTH,s=t.DEFAULT_INITIAL_BUFFER_SIZE,o=false,a=false,l=false,u=false){this.extensionCodec=e;this.context=r;this.maxDepth=n;this.initialBufferSize=s;this.sortKeys=o;this.forceFloat32=a;this.ignoreUndefined=l;this.forceIntegerToFloat=u;this.pos=0;this.view=new DataView(new ArrayBuffer(this.initialBufferSize));this.bytes=new Uint8Array(this.view.buffer)}reinitializeState(){this.pos=0}encodeSharedRef(e){this.reinitializeState();this.doEncode(e,1);return this.bytes.subarray(0,this.pos)}encode(e){this.reinitializeState();this.doEncode(e,1);return this.bytes.slice(0,this.pos)}doEncode(e,t){if(t>this.maxDepth){throw new Error(`Too deep objects in depth ${t}`)}if(e==null){this.encodeNil()}else if(typeof e==="boolean"){this.encodeBoolean(e)}else if(typeof e==="number"){this.encodeNumber(e)}else if(typeof e==="string"){this.encodeString(e)}else{this.encodeObject(e,t)}}ensureBufferSizeToWrite(e){const t=this.pos+e;if(this.view.byteLength<t){this.resizeBuffer(t*2)}}resizeBuffer(e){const t=new ArrayBuffer(e);const r=new Uint8Array(t);const n=new DataView(t);r.set(this.bytes);this.view=n;this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){if(e===false){this.writeU8(194)}else{this.writeU8(195)}}encodeNumber(e){if(Number.isSafeInteger(e)&&!this.forceIntegerToFloat){if(e>=0){if(e<128){this.writeU8(e)}else if(e<256){this.writeU8(204);this.writeU8(e)}else if(e<65536){this.writeU8(205);this.writeU16(e)}else if(e<4294967296){this.writeU8(206);this.writeU32(e)}else{this.writeU8(207);this.writeU64(e)}}else{if(e>=-32){this.writeU8(224|e+32)}else if(e>=-128){this.writeU8(208);this.writeI8(e)}else if(e>=-32768){this.writeU8(209);this.writeI16(e)}else if(e>=-2147483648){this.writeU8(210);this.writeI32(e)}else{this.writeU8(211);this.writeI64(e)}}}else{if(this.forceFloat32){this.writeU8(202);this.writeF32(e)}else{this.writeU8(203);this.writeF64(e)}}}writeStringHeader(e){if(e<32){this.writeU8(160+e)}else if(e<256){this.writeU8(217);this.writeU8(e)}else if(e<65536){this.writeU8(218);this.writeU16(e)}else if(e<4294967296){this.writeU8(219);this.writeU32(e)}else{throw new Error(`Too long string: ${e} bytes in UTF-8`)}}encodeString(e){const t=1+4;const r=e.length;if(r>n.TEXT_ENCODER_THRESHOLD){const r=(0,n.utf8Count)(e);this.ensureBufferSizeToWrite(t+r);this.writeStringHeader(r);(0,n.utf8EncodeTE)(e,this.bytes,this.pos);this.pos+=r}else{const r=(0,n.utf8Count)(e);this.ensureBufferSizeToWrite(t+r);this.writeStringHeader(r);(0,n.utf8EncodeJs)(e,this.bytes,this.pos);this.pos+=r}}encodeObject(e,t){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null){this.encodeExtension(r)}else if(Array.isArray(e)){this.encodeArray(e,t)}else if(ArrayBuffer.isView(e)){this.encodeBinary(e)}else if(typeof e==="object"){this.encodeMap(e,t)}else{throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}}encodeBinary(e){const t=e.byteLength;if(t<256){this.writeU8(196);this.writeU8(t)}else if(t<65536){this.writeU8(197);this.writeU16(t)}else if(t<4294967296){this.writeU8(198);this.writeU32(t)}else{throw new Error(`Too large binary: ${t}`)}const r=(0,o.ensureUint8Array)(e);this.writeU8a(r)}encodeArray(e,t){const r=e.length;if(r<16){this.writeU8(144+r)}else if(r<65536){this.writeU8(220);this.writeU16(r)}else if(r<4294967296){this.writeU8(221);this.writeU32(r)}else{throw new Error(`Too large array: ${r}`)}for(const r of e){this.doEncode(r,t+1)}}countWithoutUndefined(e,t){let r=0;for(const n of t){if(e[n]!==undefined){r++}}return r}encodeMap(e,t){const r=Object.keys(e);if(this.sortKeys){r.sort()}const n=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(n<16){this.writeU8(128+n)}else if(n<65536){this.writeU8(222);this.writeU16(n)}else if(n<4294967296){this.writeU8(223);this.writeU32(n)}else{throw new Error(`Too large map object: ${n}`)}for(const n of r){const r=e[n];if(!(this.ignoreUndefined&&r===undefined)){this.encodeString(n);this.doEncode(r,t+1)}}}encodeExtension(e){const t=e.data.length;if(t===1){this.writeU8(212)}else if(t===2){this.writeU8(213)}else if(t===4){this.writeU8(214)}else if(t===8){this.writeU8(215)}else if(t===16){this.writeU8(216)}else if(t<256){this.writeU8(199);this.writeU8(t)}else if(t<65536){this.writeU8(200);this.writeU16(t)}else if(t<4294967296){this.writeU8(201);this.writeU32(t)}else{throw new Error(`Too large extension object: ${t}`)}this.writeI8(e.type);this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1);this.view.setUint8(this.pos,e);this.pos++}writeU8a(e){const t=e.length;this.ensureBufferSizeToWrite(t);this.bytes.set(e,this.pos);this.pos+=t}writeI8(e){this.ensureBufferSizeToWrite(1);this.view.setInt8(this.pos,e);this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2);this.view.setUint16(this.pos,e);this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2);this.view.setInt16(this.pos,e);this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4);this.view.setUint32(this.pos,e);this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4);this.view.setInt32(this.pos,e);this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4);this.view.setFloat32(this.pos,e);this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8);this.view.setFloat64(this.pos,e);this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8);(0,s.setUint64)(this.view,this.pos,e);this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8);(0,s.setInt64)(this.view,this.pos,e);this.pos+=8}}t.Encoder=Encoder},3977:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.ExtData=void 0;class ExtData{constructor(e,t){this.type=e;this.data=t}}t.ExtData=ExtData},3983:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.ExtensionCodec=void 0;const n=r(3977);const i=r(9470);class ExtensionCodec{constructor(){this.builtInEncoders=[];this.builtInDecoders=[];this.encoders=[];this.decoders=[];this.register(i.timestampExtension)}register({type:e,encode:t,decode:r}){if(e>=0){this.encoders[e]=t;this.decoders[e]=r}else{const n=1+e;this.builtInEncoders[n]=t;this.builtInDecoders[n]=r}}tryToEncode(e,t){for(let r=0;r<this.builtInEncoders.length;r++){const i=this.builtInEncoders[r];if(i!=null){const s=i(e,t);if(s!=null){const e=-1-r;return new n.ExtData(e,s)}}}for(let r=0;r<this.encoders.length;r++){const i=this.encoders[r];if(i!=null){const s=i(e,t);if(s!=null){const e=r;return new n.ExtData(e,s)}}}if(e instanceof n.ExtData){return e}return null}decode(e,t,r){const i=t<0?this.builtInDecoders[-1-t]:this.decoders[t];if(i){return i(e,t,r)}else{return new n.ExtData(t,e)}}}t.ExtensionCodec=ExtensionCodec;ExtensionCodec.defaultCodec=new ExtensionCodec},9003:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.decodeMulti=t.decode=t.defaultDecodeOptions=void 0;const n=r(2438);t.defaultDecodeOptions={};function decode(e,r=t.defaultDecodeOptions){const i=new n.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength);return i.decode(e)}t.decode=decode;function decodeMulti(e,r=t.defaultDecodeOptions){const i=new n.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength);return i.decodeMulti(e)}t.decodeMulti=decodeMulti},7694:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.decodeStream=t.decodeMultiStream=t.decodeArrayStream=t.decodeAsync=void 0;const n=r(2438);const i=r(2148);const s=r(9003);async function decodeAsync(e,t=s.defaultDecodeOptions){const r=(0,i.ensureAsyncIterable)(e);const o=new n.Decoder(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength);return o.decodeAsync(r)}t.decodeAsync=decodeAsync;function decodeArrayStream(e,t=s.defaultDecodeOptions){const r=(0,i.ensureAsyncIterable)(e);const o=new n.Decoder(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength);return o.decodeArrayStream(r)}t.decodeArrayStream=decodeArrayStream;function decodeMultiStream(e,t=s.defaultDecodeOptions){const r=(0,i.ensureAsyncIterable)(e);const o=new n.Decoder(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength);return o.decodeStream(r)}t.decodeMultiStream=decodeMultiStream;function decodeStream(e,t=s.defaultDecodeOptions){return decodeMultiStream(e,t)}t.decodeStream=decodeStream},4806:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.encode=void 0;const n=r(8323);const i={};function encode(e,t=i){const r=new n.Encoder(t.extensionCodec,t.context,t.maxDepth,t.initialBufferSize,t.sortKeys,t.forceFloat32,t.ignoreUndefined,t.forceIntegerToFloat);return r.encodeSharedRef(e)}t.encode=encode},2803:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.decodeTimestampExtension=t.encodeTimestampExtension=t.decodeTimestampToTimeSpec=t.encodeTimeSpecToTimestamp=t.encodeDateToTimeSpec=t.EXT_TIMESTAMP=t.ExtData=t.ExtensionCodec=t.Encoder=t.DataViewIndexOutOfBoundsError=t.DecodeError=t.Decoder=t.decodeStream=t.decodeMultiStream=t.decodeArrayStream=t.decodeAsync=t.decodeMulti=t.decode=t.encode=void 0;const n=r(4806);Object.defineProperty(t,"encode",{enumerable:true,get:function(){return n.encode}});const i=r(9003);Object.defineProperty(t,"decode",{enumerable:true,get:function(){return i.decode}});Object.defineProperty(t,"decodeMulti",{enumerable:true,get:function(){return i.decodeMulti}});const s=r(7694);Object.defineProperty(t,"decodeAsync",{enumerable:true,get:function(){return s.decodeAsync}});Object.defineProperty(t,"decodeArrayStream",{enumerable:true,get:function(){return s.decodeArrayStream}});Object.defineProperty(t,"decodeMultiStream",{enumerable:true,get:function(){return s.decodeMultiStream}});Object.defineProperty(t,"decodeStream",{enumerable:true,get:function(){return s.decodeStream}});const o=r(2438);Object.defineProperty(t,"Decoder",{enumerable:true,get:function(){return o.Decoder}});Object.defineProperty(t,"DataViewIndexOutOfBoundsError",{enumerable:true,get:function(){return o.DataViewIndexOutOfBoundsError}});const a=r(7051);Object.defineProperty(t,"DecodeError",{enumerable:true,get:function(){return a.DecodeError}});const l=r(8323);Object.defineProperty(t,"Encoder",{enumerable:true,get:function(){return l.Encoder}});const u=r(3983);Object.defineProperty(t,"ExtensionCodec",{enumerable:true,get:function(){return u.ExtensionCodec}});const c=r(3977);Object.defineProperty(t,"ExtData",{enumerable:true,get:function(){return c.ExtData}});const f=r(9470);Object.defineProperty(t,"EXT_TIMESTAMP",{enumerable:true,get:function(){return f.EXT_TIMESTAMP}});Object.defineProperty(t,"encodeDateToTimeSpec",{enumerable:true,get:function(){return f.encodeDateToTimeSpec}});Object.defineProperty(t,"encodeTimeSpecToTimestamp",{enumerable:true,get:function(){return f.encodeTimeSpecToTimestamp}});Object.defineProperty(t,"decodeTimestampToTimeSpec",{enumerable:true,get:function(){return f.decodeTimestampToTimeSpec}});Object.defineProperty(t,"encodeTimestampExtension",{enumerable:true,get:function(){return f.encodeTimestampExtension}});Object.defineProperty(t,"decodeTimestampExtension",{enumerable:true,get:function(){return f.decodeTimestampExtension}})},9470:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.timestampExtension=t.decodeTimestampExtension=t.decodeTimestampToTimeSpec=t.encodeTimestampExtension=t.encodeDateToTimeSpec=t.encodeTimeSpecToTimestamp=t.EXT_TIMESTAMP=void 0;const n=r(7051);const i=r(1177);t.EXT_TIMESTAMP=-1;const s=4294967296-1;const o=17179869184-1;function encodeTimeSpecToTimestamp({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=o){if(t===0&&e<=s){const t=new Uint8Array(4);const r=new DataView(t.buffer);r.setUint32(0,e);return t}else{const r=e/4294967296;const n=e&4294967295;const i=new Uint8Array(8);const s=new DataView(i.buffer);s.setUint32(0,t<<2|r&3);s.setUint32(4,n);return i}}else{const r=new Uint8Array(12);const n=new DataView(r.buffer);n.setUint32(0,t);(0,i.setInt64)(n,4,e);return r}}t.encodeTimeSpecToTimestamp=encodeTimeSpecToTimestamp;function encodeDateToTimeSpec(e){const t=e.getTime();const r=Math.floor(t/1e3);const n=(t-r*1e3)*1e6;const i=Math.floor(n/1e9);return{sec:r+i,nsec:n-i*1e9}}t.encodeDateToTimeSpec=encodeDateToTimeSpec;function encodeTimestampExtension(e){if(e instanceof Date){const t=encodeDateToTimeSpec(e);return encodeTimeSpecToTimestamp(t)}else{return null}}t.encodeTimestampExtension=encodeTimestampExtension;function decodeTimestampToTimeSpec(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:{const e=t.getUint32(0);const r=0;return{sec:e,nsec:r}}case 8:{const e=t.getUint32(0);const r=t.getUint32(4);const n=(e&3)*4294967296+r;const i=e>>>2;return{sec:n,nsec:i}}case 12:{const e=(0,i.getInt64)(t,4);const r=t.getUint32(0);return{sec:e,nsec:r}}default:throw new n.DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}t.decodeTimestampToTimeSpec=decodeTimestampToTimeSpec;function decodeTimestampExtension(e){const t=decodeTimestampToTimeSpec(e);return new Date(t.sec*1e3+t.nsec/1e6)}t.decodeTimestampExtension=decodeTimestampExtension;t.timestampExtension={type:t.EXT_TIMESTAMP,encode:encodeTimestampExtension,decode:decodeTimestampExtension}},1177:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.getUint64=t.getInt64=t.setInt64=t.setUint64=t.UINT32_MAX=void 0;t.UINT32_MAX=4294967295;function setUint64(e,t,r){const n=r/4294967296;const i=r;e.setUint32(t,n);e.setUint32(t+4,i)}t.setUint64=setUint64;function setInt64(e,t,r){const n=Math.floor(r/4294967296);const i=r;e.setUint32(t,n);e.setUint32(t+4,i)}t.setInt64=setInt64;function getInt64(e,t){const r=e.getInt32(t);const n=e.getUint32(t+4);return r*4294967296+n}t.getInt64=getInt64;function getUint64(e,t){const r=e.getUint32(t);const n=e.getUint32(t+4);return r*4294967296+n}t.getUint64=getUint64},4332:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.prettyByte=void 0;function prettyByte(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}t.prettyByte=prettyByte},2148:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.ensureAsyncIterable=t.asyncIterableFromStream=t.isAsyncIterable=void 0;function isAsyncIterable(e){return e[Symbol.asyncIterator]!=null}t.isAsyncIterable=isAsyncIterable;function assertNonNull(e){if(e==null){throw new Error("Assertion Failure: value must not be null nor undefined")}}async function*asyncIterableFromStream(e){const t=e.getReader();try{while(true){const{done:e,value:r}=await t.read();if(e){return}assertNonNull(r);yield r}}finally{t.releaseLock()}}t.asyncIterableFromStream=asyncIterableFromStream;function ensureAsyncIterable(e){if(isAsyncIterable(e)){return e}else{return asyncIterableFromStream(e)}}t.ensureAsyncIterable=ensureAsyncIterable},834:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.createDataView=t.ensureUint8Array=void 0;function ensureUint8Array(e){if(e instanceof Uint8Array){return e}else if(ArrayBuffer.isView(e)){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}else if(e instanceof ArrayBuffer){return new Uint8Array(e)}else{return Uint8Array.from(e)}}t.ensureUint8Array=ensureUint8Array;function createDataView(e){if(e instanceof ArrayBuffer){return new DataView(e)}const t=ensureUint8Array(e);return new DataView(t.buffer,t.byteOffset,t.byteLength)}t.createDataView=createDataView},9947:(e,t,r)=>{var n,i,s;Object.defineProperty(t,"__esModule",{value:true});t.utf8DecodeTD=t.TEXT_DECODER_THRESHOLD=t.utf8DecodeJs=t.utf8EncodeTE=t.TEXT_ENCODER_THRESHOLD=t.utf8EncodeJs=t.utf8Count=void 0;const o=r(1177);const a=(typeof process==="undefined"||((n=process===null||process===void 0?void 0:process.env)===null||n===void 0?void 0:n["TEXT_ENCODING"])!=="never")&&typeof TextEncoder!=="undefined"&&typeof TextDecoder!=="undefined";function utf8Count(e){const t=e.length;let r=0;let n=0;while(n<t){let i=e.charCodeAt(n++);if((i&4294967168)===0){r++;continue}else if((i&4294965248)===0){r+=2}else{if(i>=55296&&i<=56319){if(n<t){const t=e.charCodeAt(n);if((t&64512)===56320){++n;i=((i&1023)<<10)+(t&1023)+65536}}}if((i&4294901760)===0){r+=3}else{r+=4}}}return r}t.utf8Count=utf8Count;function utf8EncodeJs(e,t,r){const n=e.length;let i=r;let s=0;while(s<n){let r=e.charCodeAt(s++);if((r&4294967168)===0){t[i++]=r;continue}else if((r&4294965248)===0){t[i++]=r>>6&31|192}else{if(r>=55296&&r<=56319){if(s<n){const t=e.charCodeAt(s);if((t&64512)===56320){++s;r=((r&1023)<<10)+(t&1023)+65536}}}if((r&4294901760)===0){t[i++]=r>>12&15|224;t[i++]=r>>6&63|128}else{t[i++]=r>>18&7|240;t[i++]=r>>12&63|128;t[i++]=r>>6&63|128}}t[i++]=r&63|128}}t.utf8EncodeJs=utf8EncodeJs;const l=a?new TextEncoder:undefined;t.TEXT_ENCODER_THRESHOLD=!a?o.UINT32_MAX:typeof process!=="undefined"&&((i=process===null||process===void 0?void 0:process.env)===null||i===void 0?void 0:i["TEXT_ENCODING"])!=="force"?200:0;function utf8EncodeTEencode(e,t,r){t.set(l.encode(e),r)}function utf8EncodeTEencodeInto(e,t,r){l.encodeInto(e,t.subarray(r))}t.utf8EncodeTE=(l===null||l===void 0?void 0:l.encodeInto)?utf8EncodeTEencodeInto:utf8EncodeTEencode;const u=4096;function utf8DecodeJs(e,t,r){let n=t;const i=n+r;const s=[];let o="";while(n<i){const t=e[n++];if((t&128)===0){s.push(t)}else if((t&224)===192){const r=e[n++]&63;s.push((t&31)<<6|r)}else if((t&240)===224){const r=e[n++]&63;const i=e[n++]&63;s.push((t&31)<<12|r<<6|i)}else if((t&248)===240){const r=e[n++]&63;const i=e[n++]&63;const o=e[n++]&63;let a=(t&7)<<18|r<<12|i<<6|o;if(a>65535){a-=65536;s.push(a>>>10&1023|55296);a=56320|a&1023}s.push(a)}else{s.push(t)}if(s.length>=u){o+=String.fromCharCode(...s);s.length=0}}if(s.length>0){o+=String.fromCharCode(...s)}return o}t.utf8DecodeJs=utf8DecodeJs;const c=a?new TextDecoder:null;t.TEXT_DECODER_THRESHOLD=!a?o.UINT32_MAX:typeof process!=="undefined"&&((s=process===null||process===void 0?void 0:process.env)===null||s===void 0?void 0:s["TEXT_DECODER"])!=="force"?200:0;function utf8DecodeTD(e,t,r){const n=e.subarray(t,t+r);return c.decode(n)}t.utf8DecodeTD=utf8DecodeTD},2937:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t["default"]=asyncify;var n=r(5265);var i=_interopRequireDefault(n);var s=r(1922);var o=_interopRequireDefault(s);var a=r(5637);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function asyncify(e){if((0,a.isAsync)(e)){return function(...t){const r=t.pop();const n=e.apply(this,t);return handlePromise(n,r)}}return(0,i.default)((function(t,r){var n;try{n=e.apply(this,t)}catch(e){return r(e)}if(n&&typeof n.then==="function"){return handlePromise(n,r)}else{r(null,n)}}))}function handlePromise(e,t){return e.then((e=>{invokeCallback(t,null,e)}),(e=>{invokeCallback(t,e&&e.message?e:new Error(e))}))}function invokeCallback(e,t,r){try{e(t,r)}catch(e){(0,o.default)((e=>{throw e}),e)}}e.exports=t["default"]},3880:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});var n=r(7577);var i=_interopRequireDefault(n);var s=r(6753);var o=_interopRequireDefault(s);var a=r(1214);var l=_interopRequireDefault(a);var u=r(8994);var c=_interopRequireDefault(u);var f=r(7660);var h=_interopRequireDefault(f);var d=r(5637);var p=_interopRequireDefault(d);var g=r(5954);var b=_interopRequireDefault(g);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function eachOfArrayLike(e,t,r){r=(0,c.default)(r);var n=0,i=0,{length:s}=e,a=false;if(s===0){r(null)}function iteratorCallback(e,t){if(e===false){a=true}if(a===true)return;if(e){r(e)}else if(++i===s||t===o.default){r(null)}}for(;n<s;n++){t(e[n],n,(0,h.default)(iteratorCallback))}}function eachOfGeneric(e,t,r){return(0,l.default)(e,Infinity,t,r)}function eachOf(e,t,r){var n=(0,i.default)(e)?eachOfArrayLike:eachOfGeneric;return n(e,(0,p.default)(t),r)}t["default"]=(0,b.default)(eachOf,3);e.exports=t["default"]},1214:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});var n=r(8415);var i=_interopRequireDefault(n);var s=r(5637);var o=_interopRequireDefault(s);var a=r(5954);var l=_interopRequireDefault(a);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function eachOfLimit(e,t,r,n){return(0,i.default)(t)(e,(0,o.default)(r),n)}t["default"]=(0,l.default)(eachOfLimit,4);e.exports=t["default"]},9517:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});var n=r(1214);var i=_interopRequireDefault(n);var s=r(5954);var o=_interopRequireDefault(s);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function eachOfSeries(e,t,r){return(0,i.default)(e,1,t,r)}t["default"]=(0,o.default)(eachOfSeries,3);e.exports=t["default"]},6985:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});var n=r(3880);var i=_interopRequireDefault(n);var s=r(5025);var o=_interopRequireDefault(s);var a=r(5637);var l=_interopRequireDefault(a);var u=r(5954);var c=_interopRequireDefault(u);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function eachLimit(e,t,r){return(0,i.default)(e,(0,o.default)((0,l.default)(t)),r)}t["default"]=(0,c.default)(eachLimit,3);e.exports=t["default"]},5541:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t["default"]=asyncEachOfLimit;var n=r(6753);var i=_interopRequireDefault(n);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function asyncEachOfLimit(e,t,r,n){let s=false;let o=false;let a=false;let l=0;let u=0;function replenish(){if(l>=t||a||s)return;a=true;e.next().then((({value:e,done:t})=>{if(o||s)return;a=false;if(t){s=true;if(l<=0){n(null)}return}l++;r(e,u,iterateeCallback);u++;replenish()})).catch(handleError)}function iterateeCallback(e,t){l-=1;if(o)return;if(e)return handleError(e);if(e===false){s=true;o=true;return}if(t===i.default||s&&l<=0){s=true;return n(null)}replenish()}function handleError(e){if(o)return;a=false;s=true;n(e)}replenish()}e.exports=t["default"]},5954:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t["default"]=awaitify;function awaitify(e,t=e.length){if(!t)throw new Error("arity is undefined");function awaitable(...r){if(typeof r[t-1]==="function"){return e.apply(this,r)}return new Promise(((n,i)=>{r[t-1]=(e,...t)=>{if(e)return i(e);n(t.length>1?t:t[0])};e.apply(this,r)}))}return awaitable}e.exports=t["default"]},6753:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});const r={};t["default"]=r;e.exports=t["default"]},8415:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});var n=r(8994);var i=_interopRequireDefault(n);var s=r(7484);var o=_interopRequireDefault(s);var a=r(7660);var l=_interopRequireDefault(a);var u=r(5637);var c=r(5541);var f=_interopRequireDefault(c);var h=r(6753);var d=_interopRequireDefault(h);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t["default"]=e=>(t,r,n)=>{n=(0,i.default)(n);if(e<=0){throw new RangeError("concurrency limit cannot be less than 1")}if(!t){return n(null)}if((0,u.isAsyncGenerator)(t)){return(0,f.default)(t,e,r,n)}if((0,u.isAsyncIterable)(t)){return(0,f.default)(t[Symbol.asyncIterator](),e,r,n)}var s=(0,o.default)(t);var a=false;var c=false;var h=0;var p=false;function iterateeCallback(e,t){if(c)return;h-=1;if(e){a=true;n(e)}else if(e===false){a=true;c=true}else if(t===d.default||a&&h<=0){a=true;return n(null)}else if(!p){replenish()}}function replenish(){p=true;while(h<e&&!a){var t=s();if(t===null){a=true;if(h<=0){n(null)}return}h+=1;r(t.value,t.key,(0,l.default)(iterateeCallback))}p=false}replenish()};e.exports=t["default"]},4431:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t["default"]=function(e){return e[Symbol.iterator]&&e[Symbol.iterator]()};e.exports=t["default"]},5265:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t["default"]=function(e){return function(...t){var r=t.pop();return e.call(this,t,r)}};e.exports=t["default"]},7577:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t["default"]=isArrayLike;function isArrayLike(e){return e&&typeof e.length==="number"&&e.length>=0&&e.length%1===0}e.exports=t["default"]},7484:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t["default"]=createIterator;var n=r(7577);var i=_interopRequireDefault(n);var s=r(4431);var o=_interopRequireDefault(s);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function createArrayIterator(e){var t=-1;var r=e.length;return function next(){return++t<r?{value:e[t],key:t}:null}}function createES2015Iterator(e){var t=-1;return function next(){var r=e.next();if(r.done)return null;t++;return{value:r.value,key:t}}}function createObjectIterator(e){var t=e?Object.keys(e):[];var r=-1;var n=t.length;return function next(){var i=t[++r];if(i==="__proto__"){return next()}return r<n?{value:e[i],key:i}:null}}function createIterator(e){if((0,i.default)(e)){return createArrayIterator(e)}var t=(0,o.default)(e);return t?createES2015Iterator(t):createObjectIterator(e)}e.exports=t["default"]},8994:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t["default"]=once;function once(e){function wrapper(...t){if(e===null)return;var r=e;e=null;r.apply(this,t)}Object.assign(wrapper,e);return wrapper}e.exports=t["default"]},7660:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t["default"]=onlyOnce;function onlyOnce(e){return function(...t){if(e===null)throw new Error("Callback was already called.");var r=e;e=null;r.apply(this,t)}}e.exports=t["default"]},7873:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});var n=r(7577);var i=_interopRequireDefault(n);var s=r(5637);var o=_interopRequireDefault(s);var a=r(5954);var l=_interopRequireDefault(a);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t["default"]=(0,l.default)(((e,t,r)=>{var n=(0,i.default)(t)?[]:{};e(t,((e,t,r)=>{(0,o.default)(e)(((e,...i)=>{if(i.length<2){[i]=i}n[t]=i;r(e)}))}),(e=>r(e,n)))}),3);e.exports=t["default"]},1922:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.fallback=fallback;t.wrap=wrap;var r=t.hasQueueMicrotask=typeof queueMicrotask==="function"&&queueMicrotask;var n=t.hasSetImmediate=typeof setImmediate==="function"&&setImmediate;var i=t.hasNextTick=typeof process==="object"&&typeof process.nextTick==="function";function fallback(e){setTimeout(e,0)}function wrap(e){return(t,...r)=>e((()=>t(...r)))}var s;if(r){s=queueMicrotask}else if(n){s=setImmediate}else if(i){s=process.nextTick}else{s=fallback}t["default"]=wrap(s)},5025:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t["default"]=_withoutIndex;function _withoutIndex(e){return(t,r,n)=>e(t,n)}e.exports=t["default"]},5637:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.isAsyncIterable=t.isAsyncGenerator=t.isAsync=undefined;var n=r(2937);var i=_interopRequireDefault(n);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function isAsync(e){return e[Symbol.toStringTag]==="AsyncFunction"}function isAsyncGenerator(e){return e[Symbol.toStringTag]==="AsyncGenerator"}function isAsyncIterable(e){return typeof e[Symbol.asyncIterator]==="function"}function wrapAsync(e){if(typeof e!=="function")throw new Error("expected a function");return isAsync(e)?(0,i.default)(e):e}t["default"]=wrapAsync;t.isAsync=isAsync;t.isAsyncGenerator=isAsyncGenerator;t.isAsyncIterable=isAsyncIterable},9676:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t["default"]=series;var n=r(7873);var i=_interopRequireDefault(n);var s=r(9517);var o=_interopRequireDefault(s);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function series(e,t){return(0,i.default)(o.default,e,t)}e.exports=t["default"]},8555:e=>{e.exports=balanced;function balanced(e,t,r){if(e instanceof RegExp)e=maybeMatch(e,r);if(t instanceof RegExp)t=maybeMatch(t,r);var n=range(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function maybeMatch(e,t){var r=t.match(e);return r?r[0]:null}balanced.range=range;function range(e,t,r){var n,i,s,o,a;var l=r.indexOf(e);var u=r.indexOf(t,l+1);var c=l;if(l>=0&&u>0){if(e===t){return[l,u]}n=[];s=r.length;while(c>=0&&!a){if(c==l){n.push(c);l=r.indexOf(e,c+1)}else if(n.length==1){a=[n.pop(),u]}else{i=n.pop();if(i<s){s=i;o=u}u=r.indexOf(t,c+1)}c=l<u&&l>=0?l:u}if(n.length){a=[s,o]}}return a}},4231:(e,t,r)=>{var n=r(8555);e.exports=expandTop;var i="\0SLASH"+Math.random()+"\0";var s="\0OPEN"+Math.random()+"\0";var o="\0CLOSE"+Math.random()+"\0";var a="\0COMMA"+Math.random()+"\0";var l="\0PERIOD"+Math.random()+"\0";function numeric(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function escapeBraces(e){return e.split("\\\\").join(i).split("\\{").join(s).split("\\}").join(o).split("\\,").join(a).split("\\.").join(l)}function unescapeBraces(e){return e.split(i).join("\\").split(s).join("{").split(o).join("}").split(a).join(",").split(l).join(".")}function parseCommaParts(e){if(!e)return[""];var t=[];var r=n("{","}",e);if(!r)return e.split(",");var i=r.pre;var s=r.body;var o=r.post;var a=i.split(",");a[a.length-1]+="{"+s+"}";var l=parseCommaParts(o);if(o.length){a[a.length-1]+=l.shift();a.push.apply(a,l)}t.push.apply(t,a);return t}function expandTop(e){if(!e)return[];if(e.substr(0,2)==="{}"){e="\\{\\}"+e.substr(2)}return expand(escapeBraces(e),true).map(unescapeBraces)}function embrace(e){return"{"+e+"}"}function isPadded(e){return/^-?0\d/.test(e)}function lte(e,t){return e<=t}function gte(e,t){return e>=t}function expand(e,t){var r=[];var i=n("{","}",e);if(!i)return[e];var s=i.pre;var a=i.post.length?expand(i.post,false):[""];if(/\$$/.test(i.pre)){for(var l=0;l<a.length;l++){var u=s+"{"+i.body+"}"+a[l];r.push(u)}}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body);var f=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body);var h=c||f;var d=i.body.indexOf(",")>=0;if(!h&&!d){if(i.post.match(/,.*\}/)){e=i.pre+"{"+i.body+o+i.post;return expand(e)}return[e]}var p;if(h){p=i.body.split(/\.\./)}else{p=parseCommaParts(i.body);if(p.length===1){p=expand(p[0],false).map(embrace);if(p.length===1){return a.map((function(e){return i.pre+p[0]+e}))}}}var g;if(h){var b=numeric(p[0]);var y=numeric(p[1]);var v=Math.max(p[0].length,p[1].length);var _=p.length==3?Math.abs(numeric(p[2])):1;var w=lte;var E=y<b;if(E){_*=-1;w=gte}var x=p.some(isPadded);g=[];for(var S=b;w(S,y);S+=_){var k;if(f){k=String.fromCharCode(S);if(k==="\\")k=""}else{k=String(S);if(x){var O=v-k.length;if(O>0){var T=new Array(O+1).join("0");if(S<0)k="-"+T+k.slice(1);else k=T+k}}}g.push(k)}}else{g=[];for(var M=0;M<p.length;M++){g.push.apply(g,expand(p[M],false))}}for(var M=0;M<g.length;M++){for(var l=0;l<a.length;l++){var u=s+g[M]+a[l];if(!t||h||u)r.push(u)}}}return r}},5458:(e,t,r)=>{var n=r(3452);var i={};for(var s in n){if(n.hasOwnProperty(s)){i[n[s]]=s}}var o=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var a in o){if(o.hasOwnProperty(a)){if(!("channels"in o[a])){throw new Error("missing channels property: "+a)}if(!("labels"in o[a])){throw new Error("missing channel labels property: "+a)}if(o[a].labels.length!==o[a].channels){throw new Error("channel and label counts mismatch: "+a)}var l=o[a].channels;var u=o[a].labels;delete o[a].channels;delete o[a].labels;Object.defineProperty(o[a],"channels",{value:l});Object.defineProperty(o[a],"labels",{value:u})}}o.rgb.hsl=function(e){var t=e[0]/255;var r=e[1]/255;var n=e[2]/255;var i=Math.min(t,r,n);var s=Math.max(t,r,n);var o=s-i;var a;var l;var u;if(s===i){a=0}else if(t===s){a=(r-n)/o}else if(r===s){a=2+(n-t)/o}else if(n===s){a=4+(t-r)/o}a=Math.min(a*60,360);if(a<0){a+=360}u=(i+s)/2;if(s===i){l=0}else if(u<=.5){l=o/(s+i)}else{l=o/(2-s-i)}return[a,l*100,u*100]};o.rgb.hsv=function(e){var t;var r;var n;var i;var s;var o=e[0]/255;var a=e[1]/255;var l=e[2]/255;var u=Math.max(o,a,l);var c=u-Math.min(o,a,l);var diffc=function(e){return(u-e)/6/c+1/2};if(c===0){i=s=0}else{s=c/u;t=diffc(o);r=diffc(a);n=diffc(l);if(o===u){i=n-r}else if(a===u){i=1/3+t-n}else if(l===u){i=2/3+r-t}if(i<0){i+=1}else if(i>1){i-=1}}return[i*360,s*100,u*100]};o.rgb.hwb=function(e){var t=e[0];var r=e[1];var n=e[2];var i=o.rgb.hsl(e)[0];var s=1/255*Math.min(t,Math.min(r,n));n=1-1/255*Math.max(t,Math.max(r,n));return[i,s*100,n*100]};o.rgb.cmyk=function(e){var t=e[0]/255;var r=e[1]/255;var n=e[2]/255;var i;var s;var o;var a;a=Math.min(1-t,1-r,1-n);i=(1-t-a)/(1-a)||0;s=(1-r-a)/(1-a)||0;o=(1-n-a)/(1-a)||0;return[i*100,s*100,o*100,a*100]};function comparativeDistance(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)}o.rgb.keyword=function(e){var t=i[e];if(t){return t}var r=Infinity;var s;for(var o in n){if(n.hasOwnProperty(o)){var a=n[o];var l=comparativeDistance(e,a);if(l<r){r=l;s=o}}}return s};o.keyword.rgb=function(e){return n[e]};o.rgb.xyz=function(e){var t=e[0]/255;var r=e[1]/255;var n=e[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92;r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var i=t*.4124+r*.3576+n*.1805;var s=t*.2126+r*.7152+n*.0722;var o=t*.0193+r*.1192+n*.9505;return[i*100,s*100,o*100]};o.rgb.lab=function(e){var t=o.rgb.xyz(e);var r=t[0];var n=t[1];var i=t[2];var s;var a;var l;r/=95.047;n/=100;i/=108.883;r=r>.008856?Math.pow(r,1/3):7.787*r+16/116;n=n>.008856?Math.pow(n,1/3):7.787*n+16/116;i=i>.008856?Math.pow(i,1/3):7.787*i+16/116;s=116*n-16;a=500*(r-n);l=200*(n-i);return[s,a,l]};o.hsl.rgb=function(e){var t=e[0]/360;var r=e[1]/100;var n=e[2]/100;var i;var s;var o;var a;var l;if(r===0){l=n*255;return[l,l,l]}if(n<.5){s=n*(1+r)}else{s=n+r-n*r}i=2*n-s;a=[0,0,0];for(var u=0;u<3;u++){o=t+1/3*-(u-1);if(o<0){o++}if(o>1){o--}if(6*o<1){l=i+(s-i)*6*o}else if(2*o<1){l=s}else if(3*o<2){l=i+(s-i)*(2/3-o)*6}else{l=i}a[u]=l*255}return a};o.hsl.hsv=function(e){var t=e[0];var r=e[1]/100;var n=e[2]/100;var i=r;var s=Math.max(n,.01);var o;var a;n*=2;r*=n<=1?n:2-n;i*=s<=1?s:2-s;a=(n+r)/2;o=n===0?2*i/(s+i):2*r/(n+r);return[t,o*100,a*100]};o.hsv.rgb=function(e){var t=e[0]/60;var r=e[1]/100;var n=e[2]/100;var i=Math.floor(t)%6;var s=t-Math.floor(t);var o=255*n*(1-r);var a=255*n*(1-r*s);var l=255*n*(1-r*(1-s));n*=255;switch(i){case 0:return[n,l,o];case 1:return[a,n,o];case 2:return[o,n,l];case 3:return[o,a,n];case 4:return[l,o,n];case 5:return[n,o,a]}};o.hsv.hsl=function(e){var t=e[0];var r=e[1]/100;var n=e[2]/100;var i=Math.max(n,.01);var s;var o;var a;a=(2-r)*n;s=(2-r)*i;o=r*i;o/=s<=1?s:2-s;o=o||0;a/=2;return[t,o*100,a*100]};o.hwb.rgb=function(e){var t=e[0]/360;var r=e[1]/100;var n=e[2]/100;var i=r+n;var s;var o;var a;var l;if(i>1){r/=i;n/=i}s=Math.floor(6*t);o=1-n;a=6*t-s;if((s&1)!==0){a=1-a}l=r+a*(o-r);var u;var c;var f;switch(s){default:case 6:case 0:u=o;c=l;f=r;break;case 1:u=l;c=o;f=r;break;case 2:u=r;c=o;f=l;break;case 3:u=r;c=l;f=o;break;case 4:u=l;c=r;f=o;break;case 5:u=o;c=r;f=l;break}return[u*255,c*255,f*255]};o.cmyk.rgb=function(e){var t=e[0]/100;var r=e[1]/100;var n=e[2]/100;var i=e[3]/100;var s;var o;var a;s=1-Math.min(1,t*(1-i)+i);o=1-Math.min(1,r*(1-i)+i);a=1-Math.min(1,n*(1-i)+i);return[s*255,o*255,a*255]};o.xyz.rgb=function(e){var t=e[0]/100;var r=e[1]/100;var n=e[2]/100;var i;var s;var o;i=t*3.2406+r*-1.5372+n*-.4986;s=t*-.9689+r*1.8758+n*.0415;o=t*.0557+r*-.204+n*1.057;i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92;s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s*12.92;o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92;i=Math.min(Math.max(0,i),1);s=Math.min(Math.max(0,s),1);o=Math.min(Math.max(0,o),1);return[i*255,s*255,o*255]};o.xyz.lab=function(e){var t=e[0];var r=e[1];var n=e[2];var i;var s;var o;t/=95.047;r/=100;n/=108.883;t=t>.008856?Math.pow(t,1/3):7.787*t+16/116;r=r>.008856?Math.pow(r,1/3):7.787*r+16/116;n=n>.008856?Math.pow(n,1/3):7.787*n+16/116;i=116*r-16;s=500*(t-r);o=200*(r-n);return[i,s,o]};o.lab.xyz=function(e){var t=e[0];var r=e[1];var n=e[2];var i;var s;var o;s=(t+16)/116;i=r/500+s;o=s-n/200;var a=Math.pow(s,3);var l=Math.pow(i,3);var u=Math.pow(o,3);s=a>.008856?a:(s-16/116)/7.787;i=l>.008856?l:(i-16/116)/7.787;o=u>.008856?u:(o-16/116)/7.787;i*=95.047;s*=100;o*=108.883;return[i,s,o]};o.lab.lch=function(e){var t=e[0];var r=e[1];var n=e[2];var i;var s;var o;i=Math.atan2(n,r);s=i*360/2/Math.PI;if(s<0){s+=360}o=Math.sqrt(r*r+n*n);return[t,o,s]};o.lch.lab=function(e){var t=e[0];var r=e[1];var n=e[2];var i;var s;var o;o=n/360*2*Math.PI;i=r*Math.cos(o);s=r*Math.sin(o);return[t,i,s]};o.rgb.ansi16=function(e){var t=e[0];var r=e[1];var n=e[2];var i=1 in arguments?arguments[1]:o.rgb.hsv(e)[2];i=Math.round(i/50);if(i===0){return 30}var s=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(t/255));if(i===2){s+=60}return s};o.hsv.ansi16=function(e){return o.rgb.ansi16(o.hsv.rgb(e),e[2])};o.rgb.ansi256=function(e){var t=e[0];var r=e[1];var n=e[2];if(t===r&&r===n){if(t<8){return 16}if(t>248){return 231}return Math.round((t-8)/247*24)+232}var i=16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5);return i};o.ansi16.rgb=function(e){var t=e%10;if(t===0||t===7){if(e>50){t+=3.5}t=t/10.5*255;return[t,t,t]}var r=(~~(e>50)+1)*.5;var n=(t&1)*r*255;var i=(t>>1&1)*r*255;var s=(t>>2&1)*r*255;return[n,i,s]};o.ansi256.rgb=function(e){if(e>=232){var t=(e-232)*10+8;return[t,t,t]}e-=16;var r;var n=Math.floor(e/36)/5*255;var i=Math.floor((r=e%36)/6)/5*255;var s=r%6/5*255;return[n,i,s]};o.rgb.hex=function(e){var t=((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255);var r=t.toString(16).toUpperCase();return"000000".substring(r.length)+r};o.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t){return[0,0,0]}var r=t[0];if(t[0].length===3){r=r.split("").map((function(e){return e+e})).join("")}var n=parseInt(r,16);var i=n>>16&255;var s=n>>8&255;var o=n&255;return[i,s,o]};o.rgb.hcg=function(e){var t=e[0]/255;var r=e[1]/255;var n=e[2]/255;var i=Math.max(Math.max(t,r),n);var s=Math.min(Math.min(t,r),n);var o=i-s;var a;var l;if(o<1){a=s/(1-o)}else{a=0}if(o<=0){l=0}else if(i===t){l=(r-n)/o%6}else if(i===r){l=2+(n-t)/o}else{l=4+(t-r)/o+4}l/=6;l%=1;return[l*360,o*100,a*100]};o.hsl.hcg=function(e){var t=e[1]/100;var r=e[2]/100;var n=1;var i=0;if(r<.5){n=2*t*r}else{n=2*t*(1-r)}if(n<1){i=(r-.5*n)/(1-n)}return[e[0],n*100,i*100]};o.hsv.hcg=function(e){var t=e[1]/100;var r=e[2]/100;var n=t*r;var i=0;if(n<1){i=(r-n)/(1-n)}return[e[0],n*100,i*100]};o.hcg.rgb=function(e){var t=e[0]/360;var r=e[1]/100;var n=e[2]/100;if(r===0){return[n*255,n*255,n*255]}var i=[0,0,0];var s=t%1*6;var o=s%1;var a=1-o;var l=0;switch(Math.floor(s)){case 0:i[0]=1;i[1]=o;i[2]=0;break;case 1:i[0]=a;i[1]=1;i[2]=0;break;case 2:i[0]=0;i[1]=1;i[2]=o;break;case 3:i[0]=0;i[1]=a;i[2]=1;break;case 4:i[0]=o;i[1]=0;i[2]=1;break;default:i[0]=1;i[1]=0;i[2]=a}l=(1-r)*n;return[(r*i[0]+l)*255,(r*i[1]+l)*255,(r*i[2]+l)*255]};o.hcg.hsv=function(e){var t=e[1]/100;var r=e[2]/100;var n=t+r*(1-t);var i=0;if(n>0){i=t/n}return[e[0],i*100,n*100]};o.hcg.hsl=function(e){var t=e[1]/100;var r=e[2]/100;var n=r*(1-t)+.5*t;var i=0;if(n>0&&n<.5){i=t/(2*n)}else if(n>=.5&&n<1){i=t/(2*(1-n))}return[e[0],i*100,n*100]};o.hcg.hwb=function(e){var t=e[1]/100;var r=e[2]/100;var n=t+r*(1-t);return[e[0],(n-t)*100,(1-n)*100]};o.hwb.hcg=function(e){var t=e[1]/100;var r=e[2]/100;var n=1-r;var i=n-t;var s=0;if(i<1){s=(n-i)/(1-i)}return[e[0],i*100,s*100]};o.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};o.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};o.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};o.gray.hsl=o.gray.hsv=function(e){return[0,0,e[0]]};o.gray.hwb=function(e){return[0,100,e[0]]};o.gray.cmyk=function(e){return[0,0,0,e[0]]};o.gray.lab=function(e){return[e[0],0,0]};o.gray.hex=function(e){var t=Math.round(e[0]/100*255)&255;var r=(t<<16)+(t<<8)+t;var n=r.toString(16).toUpperCase();return"000000".substring(n.length)+n};o.rgb.gray=function(e){var t=(e[0]+e[1]+e[2])/3;return[t/255*100]}},1049:(e,t,r)=>{var n=r(5458);var i=r(489);var s={};var o=Object.keys(n);function wrapRaw(e){var wrappedFn=function(t){if(t===undefined||t===null){return t}if(arguments.length>1){t=Array.prototype.slice.call(arguments)}return e(t)};if("conversion"in e){wrappedFn.conversion=e.conversion}return wrappedFn}function wrapRounded(e){var wrappedFn=function(t){if(t===undefined||t===null){return t}if(arguments.length>1){t=Array.prototype.slice.call(arguments)}var r=e(t);if(typeof r==="object"){for(var n=r.length,i=0;i<n;i++){r[i]=Math.round(r[i])}}return r};if("conversion"in e){wrappedFn.conversion=e.conversion}return wrappedFn}o.forEach((function(e){s[e]={};Object.defineProperty(s[e],"channels",{value:n[e].channels});Object.defineProperty(s[e],"labels",{value:n[e].labels});var t=i(e);var r=Object.keys(t);r.forEach((function(r){var n=t[r];s[e][r]=wrapRounded(n);s[e][r].raw=wrapRaw(n)}))}));e.exports=s},489:(e,t,r)=>{var n=r(5458);function buildGraph(){var e={};var t=Object.keys(n);for(var r=t.length,i=0;i<r;i++){e[t[i]]={distance:-1,parent:null}}return e}function deriveBFS(e){var t=buildGraph();var r=[e];t[e].distance=0;while(r.length){var i=r.pop();var s=Object.keys(n[i]);for(var o=s.length,a=0;a<o;a++){var l=s[a];var u=t[l];if(u.distance===-1){u.distance=t[i].distance+1;u.parent=i;r.unshift(l)}}}return t}function link(e,t){return function(r){return t(e(r))}}function wrapConversion(e,t){var r=[t[e].parent,e];var i=n[t[e].parent][e];var s=t[e].parent;while(t[s].parent){r.unshift(t[s].parent);i=link(n[t[s].parent][s],i);s=t[s].parent}i.conversion=r;return i}e.exports=function(e){var t=deriveBFS(e);var r={};var n=Object.keys(t);for(var i=n.length,s=0;s<i;s++){var o=n[s];var a=t[o];if(a.parent===null){continue}r[o]=wrapConversion(o,t)}return r}},3452:e=>{e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},7443:e=>{e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},3114:(e,t,r)=>{var n=r(7443);var i=r(7562);var s=Object.hasOwnProperty;var o=Object.create(null);for(var a in n){if(s.call(n,a)){o[n[a]]=a}}var l=e.exports={to:{},get:{}};l.get=function(e){var t=e.substring(0,3).toLowerCase();var r;var n;switch(t){case"hsl":r=l.get.hsl(e);n="hsl";break;case"hwb":r=l.get.hwb(e);n="hwb";break;default:r=l.get.rgb(e);n="rgb";break}if(!r){return null}return{model:n,value:r}};l.get.rgb=function(e){if(!e){return null}var t=/^#([a-f0-9]{3,4})$/i;var r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i;var i=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/;var o=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/;var a=/^(\w+)$/;var l=[0,0,0,1];var u;var c;var f;if(u=e.match(r)){f=u[2];u=u[1];for(c=0;c<3;c++){var h=c*2;l[c]=parseInt(u.slice(h,h+2),16)}if(f){l[3]=parseInt(f,16)/255}}else if(u=e.match(t)){u=u[1];f=u[3];for(c=0;c<3;c++){l[c]=parseInt(u[c]+u[c],16)}if(f){l[3]=parseInt(f+f,16)/255}}else if(u=e.match(i)){for(c=0;c<3;c++){l[c]=parseInt(u[c+1],0)}if(u[4]){if(u[5]){l[3]=parseFloat(u[4])*.01}else{l[3]=parseFloat(u[4])}}}else if(u=e.match(o)){for(c=0;c<3;c++){l[c]=Math.round(parseFloat(u[c+1])*2.55)}if(u[4]){if(u[5]){l[3]=parseFloat(u[4])*.01}else{l[3]=parseFloat(u[4])}}}else if(u=e.match(a)){if(u[1]==="transparent"){return[0,0,0,0]}if(!s.call(n,u[1])){return null}l=n[u[1]];l[3]=1;return l}else{return null}for(c=0;c<3;c++){l[c]=clamp(l[c],0,255)}l[3]=clamp(l[3],0,1);return l};l.get.hsl=function(e){if(!e){return null}var t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/;var r=e.match(t);if(r){var n=parseFloat(r[4]);var i=(parseFloat(r[1])%360+360)%360;var s=clamp(parseFloat(r[2]),0,100);var o=clamp(parseFloat(r[3]),0,100);var a=clamp(isNaN(n)?1:n,0,1);return[i,s,o,a]}return null};l.get.hwb=function(e){if(!e){return null}var t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/;var r=e.match(t);if(r){var n=parseFloat(r[4]);var i=(parseFloat(r[1])%360+360)%360;var s=clamp(parseFloat(r[2]),0,100);var o=clamp(parseFloat(r[3]),0,100);var a=clamp(isNaN(n)?1:n,0,1);return[i,s,o,a]}return null};l.to.hex=function(){var e=i(arguments);return"#"+hexDouble(e[0])+hexDouble(e[1])+hexDouble(e[2])+(e[3]<1?hexDouble(Math.round(e[3]*255)):"")};l.to.rgb=function(){var e=i(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};l.to.rgb.percent=function(){var e=i(arguments);var t=Math.round(e[0]/255*100);var r=Math.round(e[1]/255*100);var n=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+r+"%, "+n+"%)":"rgba("+t+"%, "+r+"%, "+n+"%, "+e[3]+")"};l.to.hsl=function(){var e=i(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};l.to.hwb=function(){var e=i(arguments);var t="";if(e.length>=4&&e[3]!==1){t=", "+e[3]}return"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};l.to.keyword=function(e){return o[e.slice(0,3)]};function clamp(e,t,r){return Math.min(Math.max(t,e),r)}function hexDouble(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}},3816:(e,t,r)=>{var n=r(3114);var i=r(1049);var s=[].slice;var o=["keyword","gray","hex"];var a={};Object.keys(i).forEach((function(e){a[s.call(i[e].labels).sort().join("")]=e}));var l={};function Color(e,t){if(!(this instanceof Color)){return new Color(e,t)}if(t&&t in o){t=null}if(t&&!(t in i)){throw new Error("Unknown model: "+t)}var r;var u;if(e==null){this.model="rgb";this.color=[0,0,0];this.valpha=1}else if(e instanceof Color){this.model=e.model;this.color=e.color.slice();this.valpha=e.valpha}else if(typeof e==="string"){var c=n.get(e);if(c===null){throw new Error("Unable to parse color from string: "+e)}this.model=c.model;u=i[this.model].channels;this.color=c.value.slice(0,u);this.valpha=typeof c.value[u]==="number"?c.value[u]:1}else if(e.length){this.model=t||"rgb";u=i[this.model].channels;var f=s.call(e,0,u);this.color=zeroArray(f,u);this.valpha=typeof e[u]==="number"?e[u]:1}else if(typeof e==="number"){e&=16777215;this.model="rgb";this.color=[e>>16&255,e>>8&255,e&255];this.valpha=1}else{this.valpha=1;var h=Object.keys(e);if("alpha"in e){h.splice(h.indexOf("alpha"),1);this.valpha=typeof e.alpha==="number"?e.alpha:0}var d=h.sort().join("");if(!(d in a)){throw new Error("Unable to parse color from object: "+JSON.stringify(e))}this.model=a[d];var p=i[this.model].labels;var g=[];for(r=0;r<p.length;r++){g.push(e[p[r]])}this.color=zeroArray(g)}if(l[this.model]){u=i[this.model].channels;for(r=0;r<u;r++){var b=l[this.model][r];if(b){this.color[r]=b(this.color[r])}}}this.valpha=Math.max(0,Math.min(1,this.valpha));if(Object.freeze){Object.freeze(this)}}Color.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in n.to?this:this.rgb();t=t.round(typeof e==="number"?e:1);var r=t.valpha===1?t.color:t.color.concat(this.valpha);return n.to[t.model](r)},percentString:function(e){var t=this.rgb().round(typeof e==="number"?e:1);var r=t.valpha===1?t.color:t.color.concat(this.valpha);return n.to.rgb.percent(r)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){var e={};var t=i[this.model].channels;var r=i[this.model].labels;for(var n=0;n<t;n++){e[r[n]]=this.color[n]}if(this.valpha!==1){e.alpha=this.valpha}return e},unitArray:function(){var e=this.rgb().color;e[0]/=255;e[1]/=255;e[2]/=255;if(this.valpha!==1){e.push(this.valpha)}return e},unitObject:function(){var e=this.rgb().object();e.r/=255;e.g/=255;e.b/=255;if(this.valpha!==1){e.alpha=this.valpha}return e},round:function(e){e=Math.max(e||0,0);return new Color(this.color.map(roundToPlace(e)).concat(this.valpha),this.model)},alpha:function(e){if(arguments.length){return new Color(this.color.concat(Math.max(0,Math.min(1,e))),this.model)}return this.valpha},red:getset("rgb",0,maxfn(255)),green:getset("rgb",1,maxfn(255)),blue:getset("rgb",2,maxfn(255)),hue:getset(["hsl","hsv","hsl","hwb","hcg"],0,(function(e){return(e%360+360)%360})),saturationl:getset("hsl",1,maxfn(100)),lightness:getset("hsl",2,maxfn(100)),saturationv:getset("hsv",1,maxfn(100)),value:getset("hsv",2,maxfn(100)),chroma:getset("hcg",1,maxfn(100)),gray:getset("hcg",2,maxfn(100)),white:getset("hwb",1,maxfn(100)),wblack:getset("hwb",2,maxfn(100)),cyan:getset("cmyk",0,maxfn(100)),magenta:getset("cmyk",1,maxfn(100)),yellow:getset("cmyk",2,maxfn(100)),black:getset("cmyk",3,maxfn(100)),x:getset("xyz",0,maxfn(100)),y:getset("xyz",1,maxfn(100)),z:getset("xyz",2,maxfn(100)),l:getset("lab",0,maxfn(100)),a:getset("lab",1),b:getset("lab",2),keyword:function(e){if(arguments.length){return new Color(e)}return i[this.model].keyword(this.color)},hex:function(e){if(arguments.length){return new Color(e)}return n.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity:function(){var e=this.rgb().color;var t=[];for(var r=0;r<e.length;r++){var n=e[r]/255;t[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity();var r=e.luminosity();if(t>r){return(t+.05)/(r+.05)}return(r+.05)/(t+.05)},level:function(e){var t=this.contrast(e);if(t>=7.1){return"AAA"}return t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color;var t=(e[0]*299+e[1]*587+e[2]*114)/1e3;return t<128},isLight:function(){return!this.isDark()},negate:function(){var e=this.rgb();for(var t=0;t<3;t++){e.color[t]=255-e.color[t]}return e},lighten:function(e){var t=this.hsl();t.color[2]+=t.color[2]*e;return t},darken:function(e){var t=this.hsl();t.color[2]-=t.color[2]*e;return t},saturate:function(e){var t=this.hsl();t.color[1]+=t.color[1]*e;return t},desaturate:function(e){var t=this.hsl();t.color[1]-=t.color[1]*e;return t},whiten:function(e){var t=this.hwb();t.color[1]+=t.color[1]*e;return t},blacken:function(e){var t=this.hwb();t.color[2]+=t.color[2]*e;return t},grayscale:function(){var e=this.rgb().color;var t=e[0]*.3+e[1]*.59+e[2]*.11;return Color.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl();var r=t.color[0];r=(r+e)%360;r=r<0?360+r:r;t.color[0]=r;return t},mix:function(e,t){if(!e||!e.rgb){throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e)}var r=e.rgb();var n=this.rgb();var i=t===undefined?.5:t;var s=2*i-1;var o=r.alpha()-n.alpha();var a=((s*o===-1?s:(s+o)/(1+s*o))+1)/2;var l=1-a;return Color.rgb(a*r.red()+l*n.red(),a*r.green()+l*n.green(),a*r.blue()+l*n.blue(),r.alpha()*i+n.alpha()*(1-i))}};Object.keys(i).forEach((function(e){if(o.indexOf(e)!==-1){return}var t=i[e].channels;Color.prototype[e]=function(){if(this.model===e){return new Color(this)}if(arguments.length){return new Color(arguments,e)}var r=typeof arguments[t]==="number"?t:this.valpha;return new Color(assertArray(i[this.model][e].raw(this.color)).concat(r),e)};Color[e]=function(r){if(typeof r==="number"){r=zeroArray(s.call(arguments),t)}return new Color(r,e)}}));function roundTo(e,t){return Number(e.toFixed(t))}function roundToPlace(e){return function(t){return roundTo(t,e)}}function getset(e,t,r){e=Array.isArray(e)?e:[e];e.forEach((function(e){(l[e]||(l[e]=[]))[t]=r}));e=e[0];return function(n){var i;if(arguments.length){if(r){n=r(n)}i=this[e]();i.color[t]=n;return i}i=this[e]().color[t];if(r){i=r(i)}return i}}function maxfn(e){return function(t){return Math.max(0,Math.min(e,t))}}function assertArray(e){return Array.isArray(e)?e:[e]}function zeroArray(e,t){for(var r=0;r<t;r++){if(typeof e[r]!=="number"){e[r]=0}}return e}e.exports=Color},236:(e,t,r)=>{var n=r(3816),i=r(4062);e.exports=function colorspace(e,t){var r=e.split(t||":");var s=i(r[0]);if(!r.length)return s;for(var o=0,a=r.length-1;o<a;o++){s=n(s).mix(n(i(r[o+1]))).saturate(1).hex()}return s}},1671:e=>{e.exports=function enabled(e,t){if(!t)return false;var r=t.split(/[\s,]+/),n=0;for(;n<r.length;n++){t=r[n].replace("*",".*?");if("-"===t.charAt(0)){if(new RegExp("^"+t.substr(1)+"$").test(e)){return false}continue}if(new RegExp("^"+t+"$").test(e)){return true}}return false}},7326:function(e,t){(function(e,r){true?r(t):0})(this,(function(e){"use strict";var t=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g;var r="\\d\\d?";var n="\\d\\d";var i="\\d{3}";var s="\\d{4}";var o="[^\\s]+";var a=/\[([^]*?)\]/gm;function shorten(e,t){var r=[];for(var n=0,i=e.length;n<i;n++){r.push(e[n].substr(0,t))}return r}var monthUpdate=function(e){return function(t,r){var n=r[e].map((function(e){return e.toLowerCase()}));var i=n.indexOf(t.toLowerCase());if(i>-1){return i}return null}};function assign(e){var t=[];for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}for(var n=0,i=t;n<i.length;n++){var s=i[n];for(var o in s){e[o]=s[o]}}return e}var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var u=["January","February","March","April","May","June","July","August","September","October","November","December"];var c=shorten(u,3);var f=shorten(l,3);var h={dayNamesShort:f,dayNames:l,monthNamesShort:c,monthNames:u,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!==10?1:0)*e%10]}};var d=assign({},h);var setGlobalDateI18n=function(e){return d=assign(d,e)};var regexEscape=function(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")};var pad=function(e,t){if(t===void 0){t=2}e=String(e);while(e.length<t){e="0"+e}return e};var p={D:function(e){return String(e.getDate())},DD:function(e){return pad(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return pad(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return pad(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return pad(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return pad(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return pad(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return pad(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return pad(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return pad(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return pad(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return pad(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+pad(Math.floor(Math.abs(t)/60)*100+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+pad(Math.floor(Math.abs(t)/60),2)+":"+pad(Math.abs(t)%60,2)}};var monthParse=function(e){return+e-1};var g=[null,r];var b=[null,o];var y=["isPm",o,function(e,t){var r=e.toLowerCase();if(r===t.amPm[0]){return 0}else if(r===t.amPm[1]){return 1}return null}];var v=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var r=+t[1]*60+parseInt(t[2],10);return t[0]==="+"?r:-r}return 0}];var _={D:["day",r],DD:["day",n],Do:["day",r+o,function(e){return parseInt(e,10)}],M:["month",r,monthParse],MM:["month",n,monthParse],YY:["year",n,function(e){var t=new Date;var r=+(""+t.getFullYear()).substr(0,2);return+(""+(+e>68?r-1:r)+e)}],h:["hour",r,undefined,"isPm"],hh:["hour",n,undefined,"isPm"],H:["hour",r],HH:["hour",n],m:["minute",r],mm:["minute",n],s:["second",r],ss:["second",n],YYYY:["year",s],S:["millisecond","\\d",function(e){return+e*100}],SS:["millisecond",n,function(e){return+e*10}],SSS:["millisecond",i],d:g,dd:g,ddd:b,dddd:b,MMM:["month",o,monthUpdate("monthNamesShort")],MMMM:["month",o,monthUpdate("monthNames")],a:y,A:y,ZZ:v,Z:v};var w={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"};var setGlobalDateMasks=function(e){return assign(w,e)};var format=function(e,r,n){if(r===void 0){r=w["default"]}if(n===void 0){n={}}if(typeof e==="number"){e=new Date(e)}if(Object.prototype.toString.call(e)!=="[object Date]"||isNaN(e.getTime())){throw new Error("Invalid Date pass to format")}r=w[r]||r;var i=[];r=r.replace(a,(function(e,t){i.push(t);return"@@@"}));var s=assign(assign({},d),n);r=r.replace(t,(function(t){return p[t](e,s)}));return r.replace(/@@@/g,(function(){return i.shift()}))};function parse(e,r,n){if(n===void 0){n={}}if(typeof r!=="string"){throw new Error("Invalid format in fecha parse")}r=w[r]||r;if(e.length>1e3){return null}var i=new Date;var s={year:i.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null};var o=[];var l=[];var u=r.replace(a,(function(e,t){l.push(regexEscape(t));return"@@@"}));var c={};var f={};u=regexEscape(u).replace(t,(function(e){var t=_[e];var r=t[0],n=t[1],i=t[3];if(c[r]){throw new Error("Invalid format. "+r+" specified twice in format")}c[r]=true;if(i){f[i]=true}o.push(t);return"("+n+")"}));Object.keys(f).forEach((function(e){if(!c[e]){throw new Error("Invalid format. "+e+" is required in specified format")}}));u=u.replace(/@@@/g,(function(){return l.shift()}));var h=e.match(new RegExp(u,"i"));if(!h){return null}var p=assign(assign({},d),n);for(var g=1;g<h.length;g++){var b=o[g-1],y=b[0],v=b[2];var E=v?v(h[g],p):+h[g];if(E==null){return null}s[y]=E}if(s.isPm===1&&s.hour!=null&&+s.hour!==12){s.hour=+s.hour+12}else if(s.isPm===0&&+s.hour===12){s.hour=0}var x;if(s.timezoneOffset==null){x=new Date(s.year,s.month,s.day,s.hour,s.minute,s.second,s.millisecond);var S=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]];for(var g=0,k=S.length;g<k;g++){if(c[S[g][0]]&&s[S[g][0]]!==x[S[g][1]]()){return null}}}else{x=new Date(Date.UTC(s.year,s.month,s.day,s.hour,s.minute-s.timezoneOffset,s.second,s.millisecond));if(s.month>11||s.month<0||s.day>31||s.day<1||s.hour>23||s.hour<0||s.minute>59||s.minute<0||s.second>59||s.second<0){return null}}return x}var E={format:format,parse:parse,defaultI18n:h,setGlobalDateI18n:setGlobalDateI18n,setGlobalDateMasks:setGlobalDateMasks};e.assign=assign;e.default=E;e.format=format;e.parse=parse;e.defaultI18n=h;e.setGlobalDateI18n=setGlobalDateI18n;e.setGlobalDateMasks=setGlobalDateMasks;Object.defineProperty(e,"__esModule",{value:true})}))},1852:e=>{var t=Object.prototype.toString;e.exports=function name(e){if("string"===typeof e.displayName&&e.constructor.name){return e.displayName}else if("string"===typeof e.name&&e.name){return e.name}if("object"===typeof e&&e.constructor&&"string"===typeof e.constructor.name)return e.constructor.name;var r=e.toString(),n=t.call(e).slice(8,-1);if("Function"===n){r=r.substring(r.indexOf("(")+1,r.indexOf(")"))}else{r=n}return r||"anonymous"}},4626:(e,t,r)=>{try{var n=r(3837);if(typeof n.inherits!=="function")throw"";e.exports=n.inherits}catch(t){e.exports=r(6034)}},6034:e=>{if(typeof Object.create==="function"){e.exports=function inherits(e,t){if(t){e.super_=t;e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}})}}}else{e.exports=function inherits(e,t){if(t){e.super_=t;var TempCtor=function(){};TempCtor.prototype=t.prototype;e.prototype=new TempCtor;e.prototype.constructor=e}}}},1196:e=>{e.exports=function isArrayish(e){if(!e||typeof e==="string"){return false}return e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")}},2325:e=>{const isStream=e=>e!==null&&typeof e==="object"&&typeof e.pipe==="function";isStream.writable=e=>isStream(e)&&e.writable!==false&&typeof e._write==="function"&&typeof e._writableState==="object";isStream.readable=e=>isStream(e)&&e.readable!==false&&typeof e._read==="function"&&typeof e._readableState==="object";isStream.duplex=e=>isStream.writable(e)&&isStream.readable(e);isStream.transform=e=>isStream.duplex(e)&&typeof e._transform==="function";e.exports=isStream},6831:e=>{function Kuler(e,t){if(t)return new Kuler(e).style(t);if(!(this instanceof Kuler))return new Kuler(e);this.text=e}Kuler.prototype.prefix="[";Kuler.prototype.suffix="m";Kuler.prototype.hex=function hex(e){e=e[0]==="#"?e.substring(1):e;if(e.length===3){e=e.split("");e[5]=e[2];e[4]=e[2];e[3]=e[1];e[2]=e[1];e[1]=e[0];e=e.join("")}var t=e.substring(0,2),r=e.substring(2,4),n=e.substring(4,6);return[parseInt(t,16),parseInt(r,16),parseInt(n,16)]};Kuler.prototype.rgb=function rgb(e,t,r){var n=e/255*5,i=t/255*5,s=r/255*5;return this.ansi(n,i,s)};Kuler.prototype.ansi=function ansi(e,t,r){var n=Math.round(e),i=Math.round(t),s=Math.round(r);return 16+n*36+i*6+s};Kuler.prototype.reset=function reset(){return this.prefix+"39;49"+this.suffix};Kuler.prototype.style=function style(e){return this.prefix+"38;5;"+this.rgb.apply(this,this.hex(e))+this.suffix+this.text+this.reset()};e.exports=Kuler},599:(e,t,r)=>{const n=r(3024);e.exports=n((e=>{e.message=`\t${e.message}`;return e}))},5880:(e,t,r)=>{const{Colorizer:n}=r(9690);const{Padder:i}=r(5158);const{configs:s,MESSAGE:o}=r(5206);class CliFormat{constructor(e={}){if(!e.levels){e.levels=s.cli.levels}this.colorizer=new n(e);this.padder=new i(e);this.options=e}transform(e,t){this.colorizer.transform(this.padder.transform(e,t),t);e[o]=`${e.level}:${e.message}`;return e}}e.exports=e=>new CliFormat(e);e.exports.Format=CliFormat},9690:(e,t,r)=>{const n=r(607);const{LEVEL:i,MESSAGE:s}=r(5206);n.enabled=true;const o=/\s+/;class Colorizer{constructor(e={}){if(e.colors){this.addColors(e.colors)}this.options=e}static addColors(e){const t=Object.keys(e).reduce(((t,r)=>{t[r]=o.test(e[r])?e[r].split(o):e[r];return t}),{});Colorizer.allColors=Object.assign({},Colorizer.allColors||{},t);return Colorizer.allColors}addColors(e){return Colorizer.addColors(e)}colorize(e,t,r){if(typeof r==="undefined"){r=t}if(!Array.isArray(Colorizer.allColors[e])){return n[Colorizer.allColors[e]](r)}for(let t=0,i=Colorizer.allColors[e].length;t<i;t++){r=n[Colorizer.allColors[e][t]](r)}return r}transform(e,t){if(t.all&&typeof e[s]==="string"){e[s]=this.colorize(e[i],e.level,e[s])}if(t.level||t.all||!t.message){e.level=this.colorize(e[i],e.level)}if(t.all||t.message){e.message=this.colorize(e[i],e.level,e.message)}return e}}e.exports=e=>new Colorizer(e);e.exports.Colorizer=e.exports.Format=Colorizer},5908:(e,t,r)=>{const n=r(3024);function cascade(e){if(!e.every(isValidFormat)){return}return t=>{let r=t;for(let t=0;t<e.length;t++){r=e[t].transform(r,e[t].options);if(!r){return false}}return r}}function isValidFormat(e){if(typeof e.transform!=="function"){throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join("\n"))}return true}e.exports=(...e)=>{const t=n(cascade(e));const r=t();r.Format=t.Format;return r};e.exports.cascade=cascade},739:(e,t,r)=>{const n=r(3024);const{LEVEL:i,MESSAGE:s}=r(5206);e.exports=n(((e,{stack:t,cause:r})=>{if(e instanceof Error){const n=Object.assign({},e,{level:e.level,[i]:e[i]||e.level,message:e.message,[s]:e[s]||e.message});if(t)n.stack=e.stack;if(r)n.cause=e.cause;return n}if(!(e.message instanceof Error))return e;const n=e.message;Object.assign(e,n);e.message=n.message;e[s]=n.message;if(t)e.stack=n.stack;if(r)e.cause=n.cause;return e}))},3024:e=>{class InvalidFormatError extends Error{constructor(e){super(`Format functions must be synchronous taking a two arguments: (info, opts)\nFound: ${e.toString().split("\n")[0]}\n`);Error.captureStackTrace(this,InvalidFormatError)}}e.exports=e=>{if(e.length>2){throw new InvalidFormatError(e)}function Format(e={}){this.options=e}Format.prototype.transform=e;function createFormatWrap(e){return new Format(e)}createFormatWrap.Format=Format;return createFormatWrap}},9207:(e,t,r)=>{const n=t.format=r(3024);t.levels=r(1545);function exposeFormat(e,t){Object.defineProperty(n,e,{get(){return t()},configurable:true})}exposeFormat("align",(function(){return r(599)}));exposeFormat("errors",(function(){return r(739)}));exposeFormat("cli",(function(){return r(5880)}));exposeFormat("combine",(function(){return r(5908)}));exposeFormat("colorize",(function(){return r(9690)}));exposeFormat("json",(function(){return r(3991)}));exposeFormat("label",(function(){return r(2018)}));exposeFormat("logstash",(function(){return r(5521)}));exposeFormat("metadata",(function(){return r(5119)}));exposeFormat("ms",(function(){return r(8471)}));exposeFormat("padLevels",(function(){return r(5158)}));exposeFormat("prettyPrint",(function(){return r(4694)}));exposeFormat("printf",(function(){return r(745)}));exposeFormat("simple",(function(){return r(5642)}));exposeFormat("splat",(function(){return r(5121)}));exposeFormat("timestamp",(function(){return r(1680)}));exposeFormat("uncolorize",(function(){return r(7111)}))},3991:(e,t,r)=>{const n=r(3024);const{MESSAGE:i}=r(5206);const s=r(6188);function replacer(e,t){if(typeof t==="bigint")return t.toString();return t}e.exports=n(((e,t)=>{const r=s.configure(t);e[i]=r(e,t.replacer||replacer,t.space);return e}))},2018:(e,t,r)=>{const n=r(3024);e.exports=n(((e,t)=>{if(t.message){e.message=`[${t.label}] ${e.message}`;return e}e.label=t.label;return e}))},1545:(e,t,r)=>{const{Colorizer:n}=r(9690);e.exports=e=>{n.addColors(e.colors||e);return e}},5521:(e,t,r)=>{const n=r(3024);const{MESSAGE:i}=r(5206);const s=r(6188);e.exports=n((e=>{const t={};if(e.message){t["@message"]=e.message;delete e.message}if(e.timestamp){t["@timestamp"]=e.timestamp;delete e.timestamp}t["@fields"]=e;e[i]=s(t);return e}))},5119:(e,t,r)=>{const n=r(3024);function fillExcept(e,t,r){const n=t.reduce(((t,r)=>{t[r]=e[r];delete e[r];return t}),{});const i=Object.keys(e).reduce(((t,r)=>{t[r]=e[r];delete e[r];return t}),{});Object.assign(e,n,{[r]:i});return e}function fillWith(e,t,r){e[r]=t.reduce(((t,r)=>{t[r]=e[r];delete e[r];return t}),{});return e}e.exports=n(((e,t={})=>{let r="metadata";if(t.key){r=t.key}let n=[];if(!t.fillExcept&&!t.fillWith){n.push("level");n.push("message")}if(t.fillExcept){n=t.fillExcept}if(n.length>0){return fillExcept(e,n,r)}if(t.fillWith){return fillWith(e,t.fillWith,r)}return e}))},8471:function(e,t,r){const n=r(3024);const i=r(2757);e.exports=n((e=>{const t=+new Date;this.diff=t-(this.prevTime||t);this.prevTime=t;e.ms=`+${i(this.diff)}`;return e}))},5158:(e,t,r)=>{const{configs:n,LEVEL:i,MESSAGE:s}=r(5206);class Padder{constructor(e={levels:n.npm.levels}){this.paddings=Padder.paddingForLevels(e.levels,e.filler);this.options=e}static getLongestLevel(e){const t=Object.keys(e).map((e=>e.length));return Math.max(...t)}static paddingForLevel(e,t,r){const n=r+1-e.length;const i=Math.floor(n/t.length);const s=`${t}${t.repeat(i)}`;return s.slice(0,n)}static paddingForLevels(e,t=" "){const r=Padder.getLongestLevel(e);return Object.keys(e).reduce(((e,n)=>{e[n]=Padder.paddingForLevel(n,t,r);return e}),{})}transform(e,t){e.message=`${this.paddings[e[i]]}${e.message}`;if(e[s]){e[s]=`${this.paddings[e[i]]}${e[s]}`}return e}}e.exports=e=>new Padder(e);e.exports.Padder=e.exports.Format=Padder},4694:(e,t,r)=>{const n=r(3837).inspect;const i=r(3024);const{LEVEL:s,MESSAGE:o,SPLAT:a}=r(5206);e.exports=i(((e,t={})=>{const r=Object.assign({},e);delete r[s];delete r[o];delete r[a];e[o]=n(r,false,t.depth||null,t.colorize);return e}))},745:(e,t,r)=>{const{MESSAGE:n}=r(5206);class Printf{constructor(e){this.template=e}transform(e){e[n]=this.template(e);return e}}e.exports=e=>new Printf(e);e.exports.Printf=e.exports.Format=Printf},5642:(e,t,r)=>{const n=r(3024);const{MESSAGE:i}=r(5206);const s=r(6188);e.exports=n((e=>{const t=s(Object.assign({},e,{level:undefined,message:undefined,splat:undefined}));const r=e.padding&&e.padding[e.level]||"";if(t!=="{}"){e[i]=`${e.level}:${r} ${e.message} ${t}`}else{e[i]=`${e.level}:${r} ${e.message}`}return e}))},5121:(e,t,r)=>{const n=r(3837);const{SPLAT:i}=r(5206);const s=/%[scdjifoO%]/g;const o=/%%/g;class Splatter{constructor(e){this.options=e}_splat(e,t){const r=e.message;const s=e[i]||e.splat||[];const a=r.match(o);const l=a&&a.length||0;const u=t.length-l;const c=u-s.length;const f=c<0?s.splice(c,-1*c):[];const h=f.length;if(h){for(let t=0;t<h;t++){Object.assign(e,f[t])}}e.message=n.format(r,...s);return e}transform(e){const t=e.message;const r=e[i]||e.splat;if(!r||!r.length){return e}const n=t&&t.match&&t.match(s);if(!n&&(r||r.length)){const t=r.length>1?r.splice(0):r;const n=t.length;if(n){for(let r=0;r<n;r++){Object.assign(e,t[r])}}return e}if(n){return this._splat(e,n)}return e}}e.exports=e=>new Splatter(e)},1680:(e,t,r)=>{const n=r(7326);const i=r(3024);e.exports=i(((e,t={})=>{if(t.format){e.timestamp=typeof t.format==="function"?t.format():n.format(new Date,t.format)}if(!e.timestamp){e.timestamp=(new Date).toISOString()}if(t.alias){e[t.alias]=e.timestamp}return e}))},7111:(e,t,r)=>{const n=r(607);const i=r(3024);const{MESSAGE:s}=r(5206);e.exports=i(((e,t)=>{if(t.level!==false){e.level=n.strip(e.level)}if(t.message!==false){e.message=n.strip(String(e.message))}if(t.raw!==false&&e[s]){e[s]=n.strip(String(e[s]))}return e}))},2757:e=>{var t=1e3;var r=t*60;var n=r*60;var i=n*24;var s=i*7;var o=i*365.25;e.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0){return parse(e)}else if(r==="number"&&isFinite(e)){return t.long?fmtLong(e):fmtShort(e)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse(e){e=String(e);if(e.length>100){return}var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a){return}var l=parseFloat(a[1]);var u=(a[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return l*o;case"weeks":case"week":case"w":return l*s;case"days":case"day":case"d":return l*i;case"hours":case"hour":case"hrs":case"hr":case"h":return l*n;case"minutes":case"minute":case"mins":case"min":case"m":return l*r;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return undefined}}function fmtShort(e){var s=Math.abs(e);if(s>=i){return Math.round(e/i)+"d"}if(s>=n){return Math.round(e/n)+"h"}if(s>=r){return Math.round(e/r)+"m"}if(s>=t){return Math.round(e/t)+"s"}return e+"ms"}function fmtLong(e){var s=Math.abs(e);if(s>=i){return plural(e,s,i,"day")}if(s>=n){return plural(e,s,n,"hour")}if(s>=r){return plural(e,s,r,"minute")}if(s>=t){return plural(e,s,t,"second")}return e+" ms"}function plural(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}},9513:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var i;Object.defineProperty(t,"__esModule",{value:true});t.BaseApi=void 0;const s=r(2361);const o=Symbol("DO_REQUEST");class BaseApi extends s.EventEmitter{constructor({transport:e,data:t,logger:n,metadata:s,client:o}){super();this[i]=(e,t=[])=>new Promise(((r,n)=>{this.transport.request(e,t,((t,i)=>{this.logger.debug(`response -> neovim.api.${e}: ${i}`);if(t){n(new Error(`${e}: ${t[1]}`))}else{r(i)}}))}));this.setTransport(e);this.data=t;this.logger=n||r(4732).logger;this.client=o;if(s){Object.defineProperty(this,"metadata",{value:s})}}setTransport(e){this.transport=e}equals(e){try{return String(this.data)===String(e.data)}catch(e){return false}}asyncRequest(e,t=[],r){return n(this,void 0,void 0,(function*(){yield this._isReady;this.logger.debug(`request -> neovim.api.${e}`);return this[o](e,t).catch((t=>{const n=new Error(t.message);n.stack=r;this.logger.error(`Error making request to ${e}`,n);throw n}))}))}request(e,t=[]){const r=new Error(`Error making request to ${e}`);return this.asyncRequest(e,t,r.stack)}_getArgsByPrefix(...e){const t=[];if(this.prefix!=="nvim_"){t.push(this)}return t.concat(e)}getVar(e){return n(this,void 0,void 0,(function*(){const t=this._getArgsByPrefix(e);return this.request(`${this.prefix}get_var`,t).then((e=>e),(e=>{if(e&&e.message&&e.message.includes("not found")){return null}throw e}))}))}setVar(e,t){const r=this._getArgsByPrefix(e,t);return this.request(`${this.prefix}set_var`,r)}deleteVar(e){const t=this._getArgsByPrefix(e);return this.request(`${this.prefix}del_var`,t)}getOption(e){const t=this._getArgsByPrefix(e);return this.request(`${this.prefix}get_option`,t)}setOption(e,t){const r=this._getArgsByPrefix(e,t);return this.request(`${this.prefix}set_option`,r)}notify(e,t){this.logger.debug(`notify -> neovim.api.${e}`);this.transport.notify(e,t)}}t.BaseApi=BaseApi;i=o},1267:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var i,s;Object.defineProperty(t,"__esModule",{value:true});t.Buffer=t.ATTACH=t.DETACH=void 0;const o=r(9513);const a=r(7230);t.DETACH=Symbol("detachBuffer");t.ATTACH=Symbol("attachBuffer");class Buffer extends o.BaseApi{constructor(){super(...arguments);this.prefix=a.Metadata[a.ExtType.Buffer].prefix;this[i]=(e=false,t={})=>n(this,void 0,void 0,(function*(){if(this.client.isAttached(this))return true;return this.request(`${this.prefix}attach`,[this,e,t])}));this[s]=()=>this.request(`${this.prefix}detach`,[this])}get isAttached(){return this.client.isAttached(this)}get id(){return this.data}get length(){return this.request(`${this.prefix}line_count`,[this])}get lines(){return this.getLines()}get changedtick(){return this.request(`${this.prefix}get_changedtick`,[this])}get commands(){return this.getCommands()}getCommands(e={}){return this.request(`${this.prefix}get_commands`,[this,e])}getLines({start:e,end:t,strictIndexing:r}={start:0,end:-1,strictIndexing:true}){const n=typeof r==="undefined"?true:r;return this.request(`${this.prefix}get_lines`,[this,e,t,n])}setLines(e,{start:t,end:r,strictIndexing:n}={strictIndexing:true}){const i=typeof n==="undefined"?true:n;const s=typeof e==="string"?[e]:e;const o=typeof r!=="undefined"?r:t+1;return this.request(`${this.prefix}set_lines`,[this,t,o,i,s])}insert(e,t){return this.setLines(e,{start:t,end:t,strictIndexing:true})}replace(e,t){const r=typeof e==="string"?[e]:e;return this.setLines(r,{start:t,end:t+r.length,strictIndexing:false})}remove(e,t,r){return this.setLines([],{start:e,end:t,strictIndexing:r})}append(e){return this.setLines(e,{start:-1,end:-1,strictIndexing:false})}get name(){return this.request(`${this.prefix}get_name`,[this])}set name(e){this.request(`${this.prefix}set_name`,[this,e])}get valid(){return this.request(`${this.prefix}is_valid`,[this])}mark(e){return this.request(`${this.prefix}get_mark`,[this,e])}getKeymap(e){return this.request(`${this.prefix}get_keymap`,[this,e])}get loaded(){return this.request(`${this.prefix}is_loaded`,[this])}getOffset(e){return this.request(`${this.prefix}get_offset`,[this,e])}addHighlight({hlGroup:e,line:t,colStart:r,colEnd:n,srcId:i}){const s=typeof e!=="undefined"?e:"";const o=typeof n!=="undefined"?n:-1;const a=typeof r!=="undefined"?r:-0;const l=typeof i!=="undefined"?i:-1;return this.request(`${this.prefix}add_highlight`,[this,l,s,t,a,o])}clearHighlight(e={}){console.warn("`clearHighlight` is deprecated, use ``clearNamespace()` instead");const t={srcId:-1,lineStart:0,lineEnd:-1};const{srcId:r,lineStart:n,lineEnd:i}=Object.assign(Object.assign({},t),e);return this.request(`${this.prefix}clear_highlight`,[this,r,n,i])}clearNamespace(e){const t={nsId:-1,lineStart:0,lineEnd:-1};const{nsId:r,lineStart:n,lineEnd:i}=Object.assign(Object.assign({},t),e);this.request(`${this.prefix}clear_namespace`,[this,r,n,i])}setVirtualText(e,t,r,n={}){return this.request(`${this.prefix}set_virtual_text`,[this,e,t,r,n])}listen(e,r){if(!this.isAttached){this[t.ATTACH]().then((t=>{if(!t){this.unlisten(e,r)}}))}this.client.attachBuffer(this,e,r);return()=>{this.unlisten(e,r)}}unlisten(e,r){if(!this.isAttached)return;const n=this.client.detachBuffer(this,e,r);if(!n)return;this[t.DETACH]()}}t.Buffer=Buffer;i=t.ATTACH,s=t.DETACH},6292:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.Neovim=void 0;const n=r(9513);const i=r(602);const s=r(1267);const o=r(7757);const a=r(158);class Neovim extends n.BaseApi{constructor(){super(...arguments);this.prefix="nvim_";this.Buffer=s.Buffer;this.Window=a.Window;this.Tabpage=o.Tabpage}get apiInfo(){return this.request(`${this.prefix}get_api_info`)}get buffers(){return this.request(`${this.prefix}list_bufs`)}get buffer(){return i.createChainableApi.call(this,"Buffer",s.Buffer,(()=>this.request(`${this.prefix}get_current_buf`)))}set buffer(e){this.request(`${this.prefix}set_current_buf`,[e])}get chans(){return this.request(`${this.prefix}list_chans`)}getChanInfo(e){return this.request(`${this.prefix}get_chan_info`,[e])}get commands(){return this.getCommands()}getCommands(e={}){return this.request(`${this.prefix}get_commands`,[e])}get tabpages(){return this.request(`${this.prefix}list_tabpages`)}get tabpage(){return i.createChainableApi.call(this,"Tabpage",o.Tabpage,(()=>this.request(`${this.prefix}get_current_tabpage`)))}set tabpage(e){this.request(`${this.prefix}set_current_tabpage`,[e])}get windows(){return this.getWindows()}get window(){return this.getWindow()}set window(e){this.setWindow(e)}getWindows(){return this.request(`${this.prefix}list_wins`)}getWindow(){return i.createChainableApi.call(this,"Window",a.Window,(()=>this.request(`${this.prefix}get_current_win`)))}setWindow(e){return this.request(`${this.prefix}set_current_win`,[e])}get runtimePaths(){return this.request(`${this.prefix}list_runtime_paths`)}set dir(e){this.request(`${this.prefix}set_current_dir`,[e])}get line(){return this.getLine()}set line(e){if(typeof e==="string"){this.setLine(e)}}getLine(){return this.request(`${this.prefix}get_current_line`)}setLine(e){return this.request(`${this.prefix}set_current_line`,[e])}getKeymap(e){return this.request(`${this.prefix}get_keymap`,[e])}get mode(){return this.request(`${this.prefix}get_mode`)}get colorMap(){return this.request(`${this.prefix}get_color_map`)}getColorByName(e){return this.request(`${this.prefix}get_color_by_name`,[e])}getHighlight(e,t=true){const r=typeof e==="string"?"by_name":"by_id";return this.request(`${this.prefix}get_hl_${r}`,[e,t])}getHighlightByName(e,t=true){return this.request(`${this.prefix}get_hl_by_name`,[e,t])}getHighlightById(e,t=true){return this.request(`${this.prefix}get_hl_by_id`,[e,t])}deleteCurrentLine(){return this.request(`${this.prefix}del_current_line`)}eval(e){return this.request(`${this.prefix}eval`,[e])}lua(e,t=[]){const r=Array.isArray(t)?t:[t];return this.request(`${this.prefix}execute_lua`,[e,r])}executeLua(e,t=[]){return this.lua(e,t)}callDictFunction(e,t,r=[]){const n=Array.isArray(r)?r:[r];return this.request(`${this.prefix}call_dict_function`,[e,t,n])}call(e,t=[]){const r=Array.isArray(t)?t:[t];return this.request(`${this.prefix}call_function`,[e,r])}callFunction(e,t=[]){return this.call(e,t)}callAtomic(e){return this.request(`${this.prefix}call_atomic`,[e])}command(e){return this.request(`${this.prefix}command`,[e])}commandOutput(e){return this.request(`${this.prefix}command_output`,[e])}getVvar(e){return this.request(`${this.prefix}get_vvar`,[e])}setVvar(e,t){return this.request(`${this.prefix}set_vvar`,[e,t])}feedKeys(e,t,r){return this.request(`${this.prefix}feedkeys`,[e,t,r])}input(e){return this.request(`${this.prefix}input`,[e])}inputMouse(e,t,r,n,i,s){return this.request(`${this.prefix}input_mouse`,[e,t,r,n,i,s])}parseExpression(e,t,r){return this.request(`${this.prefix}parse_expression`,[e,t,r])}getProc(e){return this.request(`${this.prefix}get_proc`,[e])}getProcChildren(e){return this.request(`${this.prefix}get_proc_children`,[e])}replaceTermcodes(e,t,r,n){return this.request(`${this.prefix}replace_termcodes`,[e,t,r,n])}strWidth(e){return this.request(`${this.prefix}strwidth`,[e])}outWrite(e){return this.request(`${this.prefix}out_write`,[e])}outWriteLine(e){return this.outWrite(`${e}\n`)}errWrite(e){return this.request(`${this.prefix}err_write`,[e])}errWriteLine(e){return this.request(`${this.prefix}err_writeln`,[e])}get uis(){return this.request(`${this.prefix}list_uis`)}uiAttach(e,t,r){return this.request(`${this.prefix}ui_attach`,[e,t,r])}uiDetach(){return this.request(`${this.prefix}ui_detach`,[])}uiTryResize(e,t){return this.request(`${this.prefix}ui_try_resize`,[e,t])}uiTryResizeGrid(e,t,r){return this.request(`${this.prefix}ui_try_resize_grid`,[e,t,r])}uiSetOption(e,t){return this.request(`${this.prefix}ui_set_option`,[e,t])}subscribe(e){return this.request(`${this.prefix}subscribe`,[e])}unsubscribe(e){return this.request(`${this.prefix}unsubscribe`,[e])}setClientInfo(e,t,r,n,i){this.request(`${this.prefix}set_client_info`,[e,t,r,n,i])}createNamespace(e=""){return this.request(`${this.prefix}create_namespace`,[e])}get namespaces(){return this.getNamespaces()}getNamespaces(){return this.request(`${this.prefix}get_namespaces`)}selectPopupmenuItem(e,t,r,n={}){return this.request(`${this.prefix}select_popupmenu_item`,[e,t,r,n])}createBuf(e,t){return this.request(`${this.prefix}create_buf`,[e,t])}createBuffer(e,t){return this.createBuf(e,t)}openWin(e,t,r){return this.request(`${this.prefix}open_win`,[e,t,r])}openWindow(e,t,r){return this.openWin(e,t,r)}winConfig(e,t={}){return e.config(t)}windowConfig(e,t={}){return this.winConfig(e,t)}winClose(e,t){return e.close(t)}windowClose(e,t){return this.winClose(e,t)}quit(){this.command("qa!")}}t.Neovim=Neovim},7757:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.Tabpage=void 0;const n=r(9513);const i=r(7230);const s=r(602);const o=r(158);class Tabpage extends n.BaseApi{constructor(){super(...arguments);this.prefix=i.Metadata[i.ExtType.Tabpage].prefix}get windows(){return this.request(`${this.prefix}list_wins`,[this])}get window(){return s.createChainableApi.call(this,"Window",o.Window,(()=>this.request(`${this.prefix}get_win`,[this])))}get valid(){return this.request(`${this.prefix}is_valid`,[this])}get number(){return this.request(`${this.prefix}get_number`,[this])}getOption(){this.logger.error("Tabpage does not have `getOption`")}setOption(){this.logger.error("Tabpage does not have `setOption`")}}t.Tabpage=Tabpage},158:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.Window=void 0;const n=r(9513);const i=r(7230);const s=r(602);const o=r(7757);const a=r(1267);class Window extends n.BaseApi{constructor(){super(...arguments);this.prefix=i.Metadata[i.ExtType.Window].prefix}get id(){return this.data}get buffer(){return s.createChainableApi.call(this,"Buffer",a.Buffer,(()=>this.request(`${this.prefix}get_buf`,[this])))}get tabpage(){return s.createChainableApi.call(this,"Tabpage",o.Tabpage,(()=>this.request(`${this.prefix}get_tabpage`,[this])))}get cursor(){return this.request(`${this.prefix}get_cursor`,[this])}set cursor(e){this.request(`${this.prefix}set_cursor`,[this,e])}get height(){return this.request(`${this.prefix}get_height`,[this])}set height(e){this.request(`${this.prefix}set_height`,[this,e])}get width(){return this.request(`${this.prefix}get_width`,[this])}set width(e){this.request(`${this.prefix}set_width`,[this,e])}get position(){return this.request(`${this.prefix}get_position`,[this])}get row(){return this.request(`${this.prefix}get_position`,[this]).then((e=>e[0]))}get col(){return this.request(`${this.prefix}get_position`,[this]).then((e=>e[1]))}get valid(){return this.request(`${this.prefix}is_valid`,[this])}get number(){return this.request(`${this.prefix}get_number`,[this])}close(e=false){return this.request(`${this.prefix}close`,[this,e])}config(e={}){return this.request(`${this.prefix}set_config`,[this,e])}}t.Window=Window},3572:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:true});t.NeovimClient=void 0;const i=r(4029);const s=r(6292);class NeovimClient extends s.Neovim{constructor(e={}){super({logger:e.logger});this.attachedBuffers=new Map;const t=e.transport||new i.Transport;this.setTransport(t);this.requestQueue=[];this.transportAttached=false;this.handleRequest=this.handleRequest.bind(this);this.handleNotification=this.handleNotification.bind(this)}attach({reader:e,writer:t}){this.transport.attach(t,e,this);this.transportAttached=true;this.setupTransport()}get isApiReady(){return this.transportAttached&&typeof this._channelId!=="undefined"}get channelId(){return(()=>n(this,void 0,void 0,(function*(){yield this._isReady;return this._channelId})))()}isAttached(e){const t=`${e.data}`;return this.attachedBuffers.has(t)}handleRequest(e,t,r,...n){this.logger.info("handleRequest: ",e);if(!this.isApiReady&&e!=="specs"){this.requestQueue.push({type:"request",args:[e,t,r,...n]})}else{this.emit("request",e,t,r)}}emitNotification(e,t){if(e.endsWith("_event")){if(!e.startsWith("nvim_buf_")){this.logger.error("Unhandled event: ",e);return}const r=e.replace(/nvim_buf_(.*)_event/,"$1");const[n]=t;const i=`${n.data}`;if(!this.attachedBuffers.has(i)){return}const s=this.attachedBuffers.get(i);const o=s.get(r)||[];o.forEach((e=>e(...t)));if(r==="detach"){this.attachedBuffers.delete(i)}}else{this.emit("notification",e,t)}}handleNotification(e,t,...r){this.logger.info("handleNotification: ",e);if(!this.isApiReady){this.requestQueue.push({type:"notification",args:[e,t,...r]})}else{this.emitNotification(e,t)}}setupTransport(){if(!this.transportAttached){throw new Error("Not attached to input/output")}this.transport.on("request",this.handleRequest);this.transport.on("notification",this.handleNotification);this.transport.on("detach",(()=>{this.emit("disconnect");this.transport.removeAllListeners("request");this.transport.removeAllListeners("notification");this.transport.removeAllListeners("detach")}));this._isReady=this.generateApi()}requestApi(){return new Promise(((e,t)=>{this.transport.request("nvim_get_api_info",[],((r,n)=>{if(r){t(r)}else{e(n)}}))}))}generateApi(){return n(this,void 0,void 0,(function*(){let e;try{e=yield this.requestApi()}catch(e){this.logger.error("Could not get vim api results");this.logger.error(e)}if(e){try{const[t]=e;this._channelId=t;this.requestQueue.forEach((e=>{if(e.type==="notification"){this.emitNotification(e.args[0],e.args[1])}else{this.emit(e.type,...e.args)}}));this.requestQueue=[];return true}catch(e){this.logger.error(`Could not dynamically generate neovim API: ${e}`,{error:e});this.logger.error(e.stack);return null}}return null}))}attachBuffer(e,t,r){const n=`${e.data}`;if(!this.attachedBuffers.has(n)){this.attachedBuffers.set(n,new Map)}const i=this.attachedBuffers.get(n);if(!i.get(t)){i.set(t,[])}const s=i.get(t);if(s.indexOf(r)!==-1)return r;s.push(r);i.set(t,s);this.attachedBuffers.set(n,i);return r}detachBuffer(e,t,r){const n=`${e.data}`;const i=this.attachedBuffers.get(n);if(!i)return false;const s=(i.get(t)||[]).filter((e=>e!==r));if(!s.length){i.delete(t)}else{i.set(t,s)}if(!i.size){this.attachedBuffers.delete(n);return true}return false}}t.NeovimClient=NeovimClient},602:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.createChainableApi=void 0;const n=r(9513);const i=Object.getOwnPropertyNames(n.BaseApi.prototype);function createChainableApi(e,t,r,s){if(this[`${e}Promise`]&&this[`${e}Promise`].status===0&&this[`${e}Proxy`]){return this[`${e}Proxy`]}this[`${e}Promise`]=r();[...i,...Object.getOwnPropertyNames(t.prototype)].forEach((t=>{Object.defineProperty(this[`${e}Promise`],t,{enumerable:true,writable:true,configurable:true})}));const o={get:(r,i)=>{const o=Object.prototype.hasOwnProperty.call(t.prototype,i)||Object.prototype.hasOwnProperty.call(n.BaseApi.prototype,i);const a=Object.getOwnPropertyDescriptor(t.prototype,i)||Object.getOwnPropertyDescriptor(n.BaseApi.prototype,i);const l=a&&(typeof a.get!=="undefined"||typeof a.set!=="undefined");if(t&&o){if(o&&!l&&(i in t.prototype&&typeof t.prototype[i]==="function"||i in n.BaseApi.prototype&&typeof n.BaseApi.prototype[i]==="function")){return(...t)=>this[`${e}Promise`].then((e=>e[i].call(e,...t)))}return s&&s()||this[`${e}Promise`].then((e=>e[i]))}if(i in r){if(typeof r[i]==="function"){return r[i].bind(r)}return r[i]}return null},set:(e,t,r,n)=>{if(n&&(n instanceof Promise||"then"in n)){n.then((e=>{if(t in e){e[t]=r}}))}else{e[t]=r}return true}};this[`${e}Proxy`]=new Proxy(this[`${e}Promise`],o);return this[`${e}Proxy`]}t.createChainableApi=createChainableApi},9529:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.Tabpage=t.Window=t.Buffer=t.NeovimClient=t.Neovim=void 0;var n=r(6292);Object.defineProperty(t,"Neovim",{enumerable:true,get:function(){return n.Neovim}});var i=r(3572);Object.defineProperty(t,"NeovimClient",{enumerable:true,get:function(){return i.NeovimClient}});var s=r(1267);Object.defineProperty(t,"Buffer",{enumerable:true,get:function(){return s.Buffer}});var o=r(158);Object.defineProperty(t,"Window",{enumerable:true,get:function(){return o.Window}});var a=r(7757);Object.defineProperty(t,"Tabpage",{enumerable:true,get:function(){return a.Tabpage}})},7230:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.Metadata=t.ExtType=void 0;const n=r(1267);const i=r(158);const s=r(7757);var o;(function(e){e[e["Buffer"]=0]="Buffer";e[e["Window"]=1]="Window";e[e["Tabpage"]=2]="Tabpage"})(o=t.ExtType||(t.ExtType={}));t.Metadata=[{constructor:n.Buffer,name:"Buffer",prefix:"nvim_buf_"},{constructor:i.Window,name:"Window",prefix:"nvim_win_"},{constructor:s.Tabpage,name:"Tabpage",prefix:"nvim_tabpage_"}]},9059:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.attach=void 0;var n=r(2526);Object.defineProperty(t,"attach",{enumerable:true,get:function(){return n.attach}})},2526:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.attach=void 0;const n=r(1808);const i=r(3572);function attach({reader:e,writer:t,proc:s,socket:o,options:a={}}){let l;let u;if(o){const e=(0,n.createConnection)(o);l=e;u=e}else if(e&&t){l=t;u=e}else if(s){l=s.stdin;u=s.stdout}if(l&&u){const e=a.logger||r(4732).logger;const t=new i.NeovimClient({logger:e});t.attach({writer:l,reader:u});return t}throw new Error("Invalid arguments, could not attach")}t.attach=attach},579:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:true});t.NvimPlugin=t.callable=void 0;const i=r(4732);function callable(e){if(typeof e==="function"){return e}if(Array.isArray(e)&&e.length===2){return function(...t){return e[1].apply(e[0],t)}}throw new Error}t.callable=callable;class NvimPlugin{constructor(e,t,r){this.filename=e;this.nvim=r;this.dev=false;this.alwaysInit=false;this.autocmds={};this.commands={};this.functions={};try{this.instance=new t(this)}catch(e){if(e instanceof TypeError){this.instance=t(this)}else{throw e}}}setOptions(e){this.dev=e.dev===undefined?this.dev:e.dev;this.alwaysInit=e.alwaysInit}get shouldCacheModule(){return!this.dev}registerAutocmd(e,t,r){if(!r.pattern){i.logger.error(`registerAutocmd expected pattern option for ${e}`);return}const n={type:"autocmd",name:e,sync:r&&!!r.sync,opts:{}};["pattern","eval"].forEach((e=>{if(r&&typeof r[e]!=="undefined"){n.opts[e]=r[e]}}));try{this.autocmds[`${e} ${r.pattern}`]={fn:callable(t),spec:n}}catch(t){i.logger.error(`registerAutocmd expected callable argument for ${e}`)}}registerCommand(e,t,r){const n={type:"command",name:e,sync:r&&!!r.sync,opts:{}};["range","nargs","complete"].forEach((e=>{if(r&&typeof r[e]!=="undefined"){n.opts[e]=r[e]}}));try{this.commands[e]={fn:callable(t),spec:n}}catch(t){i.logger.error(`registerCommand expected callable argument for ${e}`)}}registerFunction(e,t,r){const n={type:"function",name:e,sync:r&&!!r.sync,opts:{}};["range","eval"].forEach((e=>{if(r&&typeof r[e]!=="undefined"){n.opts[e]=r[e]}}));try{this.functions[e]={fn:callable(t),spec:n}}catch(t){i.logger.error(`registerFunction expected callable argument for ${e}`)}}get specs(){const e=Object.keys(this.autocmds).map((e=>this.autocmds[e].spec));const t=Object.keys(this.commands).map((e=>this.commands[e].spec));const r=Object.keys(this.functions).map((e=>this.functions[e].spec));return e.concat(t).concat(r)}handleRequest(e,t,r){return n(this,void 0,void 0,(function*(){let n;switch(t){case"autocmd":n=this.autocmds;break;case"command":n=this.commands;break;case"function":n=this.functions;break;default:const r=`No handler for unknown type ${t}: "${e}" in ${this.filename}`;i.logger.error(r);throw new Error(r)}if(n.hasOwnProperty(e)){const s=n[e];try{return s.spec.sync?s.fn(...r):yield s.fn(...r)}catch(r){const n=`Error in plugin for ${t}:${e}: ${r.message}`;i.logger.error(`${n} (file: ${this.filename}, stack: ${r.stack})`);throw new Error(r)}}else{const r=`Missing handler for ${t}: "${e}" in ${this.filename}`;i.logger.error(r);throw new Error(r)}}))}}t.NvimPlugin=NvimPlugin},903:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))n(t,e,r);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.loadPlugin=void 0;const o=s(r(1017));const a=r(2503);const l=r(4732);const u=r(579);function createPlugin(e,t,r={}){try{l.logger.debug(`createPlugin.${e}.clearCache: ${r&&!r.cache}`);if(r&&!r.cache){try{delete a._cache[require.resolve(e)]}catch(e){}}const n=require(e);const i=n&&n.default||n;if(typeof i==="function"){return new u.NvimPlugin(e,i,t)}}catch(t){const r=o.basename(e);l.logger.error(`[${r}] ${t.stack}`);l.logger.error(`[${r}] Error loading child ChildPlugin ${e}`)}return null}function loadPlugin(e,t,r={}){try{return createPlugin(e,t,r)}catch(e){return null}}t.loadPlugin=loadPlugin},8942:(e,t,r)=>{var n;n={value:true};n=n=n=n=n=n=n=n=n=n=n=t.ub=void 0;var i=r(9059);Object.defineProperty(t,"ub",{enumerable:true,get:function(){return i.attach}});var s=r(9529);n={enumerable:true,get:function(){return s.Neovim}};n={enumerable:true,get:function(){return s.NeovimClient}};n={enumerable:true,get:function(){return s.Buffer}};n={enumerable:true,get:function(){return s.Tabpage}};n={enumerable:true,get:function(){return s.Window}};var o=r(1216);n={enumerable:true,get:function(){return o.Plugin}};n={enumerable:true,get:function(){return o.Function}};n={enumerable:true,get:function(){return o.Autocmd}};n={enumerable:true,get:function(){return o.Command}};var a=r(579);n={enumerable:true,get:function(){return a.NvimPlugin}};var l=r(903);n={enumerable:true,get:function(){return l.loadPlugin}}},1216:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.Command=t.Autocmd=t.Function=t.Plugin=void 0;var n=r(6553);Object.defineProperty(t,"Plugin",{enumerable:true,get:function(){return n.Plugin}});Object.defineProperty(t,"Function",{enumerable:true,get:function(){return n.Function}});Object.defineProperty(t,"Autocmd",{enumerable:true,get:function(){return n.Autocmd}});Object.defineProperty(t,"Command",{enumerable:true,get:function(){return n.Command}})},1874:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.autocmd=void 0;const n=r(8125);function autocmd(e,t){return function(r,i){const s=t&&!!t.sync;const o=typeof i==="string";const a=o?r[i]:r;const l={pattern:""};["pattern","eval"].forEach((e=>{if(t&&typeof t[e]!=="undefined"){l[e]=t[e]}}));const u=`${e}${t.pattern?`:${t.pattern}`:""}`;Object.defineProperty(a,n.NVIM_METHOD_NAME,{value:`autocmd:${u}`});Object.defineProperty(a,n.NVIM_SYNC,{value:!!s});Object.defineProperty(a,n.NVIM_SPEC,{value:{type:"autocmd",name:e,sync:!!s,opts:l}});if(o){r[i]=a}return r}}t.autocmd=autocmd},3612:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.command=void 0;const n=r(8125);function command(e,t){return function(r,i){const s=t&&!!t.sync;const o=typeof i==="string";const a=o?r[i]:r;const l={};["range","nargs","complete"].forEach((e=>{if(t&&typeof t[e]!=="undefined"){l[e]=t[e]}}));Object.defineProperty(a,n.NVIM_METHOD_NAME,{value:`command:${e}`});Object.defineProperty(a,n.NVIM_SYNC,{value:!!s});Object.defineProperty(a,n.NVIM_SPEC,{value:{type:"command",name:e,sync:!!s,opts:l}});if(o){r[i]=a}return r}}t.command=command},8302:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.nvimFunction=void 0;const n=r(8125);function nvimFunction(e,t={}){return function(r,i){const s=t&&!!t.sync;const o=typeof i==="string";const a=o?r[i]:r;const l={};if(t&&t.range){l.range=t.range}if(t&&t.eval){l.eval=t.eval}Object.defineProperty(a,n.NVIM_METHOD_NAME,{value:`function:${e}`});Object.defineProperty(a,n.NVIM_SYNC,{value:!!s});Object.defineProperty(a,n.NVIM_SPEC,{value:{type:"function",name:e,sync:!!s,opts:l}});if(o){r[i]=a}return r}}t.nvimFunction=nvimFunction},6553:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.Command=t.Autocmd=t.Function=t.Plugin=void 0;var n=r(1533);Object.defineProperty(t,"Plugin",{enumerable:true,get:function(){return n.plugin}});var i=r(8302);Object.defineProperty(t,"Function",{enumerable:true,get:function(){return i.nvimFunction}});var s=r(1874);Object.defineProperty(t,"Autocmd",{enumerable:true,get:function(){return s.autocmd}});var o=r(3612);Object.defineProperty(t,"Command",{enumerable:true,get:function(){return o.command}})},1533:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.plugin=t.NvimPlugin=t.Neovim=void 0;const n=r(4732);const i=r(8125);const s=r(6292);Object.defineProperty(t,"Neovim",{enumerable:true,get:function(){return s.Neovim}});const o=r(579);Object.defineProperty(t,"NvimPlugin",{enumerable:true,get:function(){return o.NvimPlugin}});function wrapper(e,t){n.logger.info(`Decorating class ${e}`);return class extends e{constructor(...r){const s=r[0];super(s.nvim,s);this.setApi(s.nvim);if(t){s.setOptions(t)}Object.getOwnPropertyNames(e.prototype).forEach((t=>{n.logger.info(`Method name ${t}`);n.logger.info(`${e.prototype[t]} ${typeof e.prototype[t]}`);n.logger.info(`${this} ${typeof this}`);const r=e.prototype[t];if(r&&r[i.NVIM_SPEC]){const e=r[i.NVIM_SPEC];switch(e.type){case"autocmd":const t={pattern:e.opts.pattern,sync:e.sync};if(typeof e.opts.eval!=="undefined"){t.eval=e.opts.eval}s.registerAutocmd(e.name,[this,r],t);break;case"command":const n={sync:e.sync};if(typeof e.opts.range!=="undefined"){n.range=e.opts.range}if(typeof e.opts.nargs!=="undefined"){n.nargs=e.opts.nargs}if(typeof e.opts.complete!=="undefined"){n.complete=e.opts.complete}s.registerCommand(e.name,[this,r],n);break;case"function":const i={sync:e.sync};if(typeof e.opts.range!=="undefined"){i.range=e.opts.range}if(typeof e.opts.eval!=="undefined"){i.eval=e.opts.eval}s.registerFunction(e.name,[this,r],i);break;default:break}}}))}setApi(e){this.nvim=e}}}function plugin(e){return typeof e!=="function"?t=>wrapper(t,e):wrapper(e)}t.plugin=plugin},8125:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.NVIM_METHOD_NAME=t.NVIM_SYNC=t.NVIM_SPEC=t.NVIM_DEV_MODE=t.NVIM_PLUGIN=void 0;t.NVIM_PLUGIN="_nvim_plugin";t.NVIM_DEV_MODE="_nvim_dev_mode";t.NVIM_SPEC="_nvim_rpc_spec";t.NVIM_SYNC="_nvim_rpc_sync";t.NVIM_METHOD_NAME="_nvim_rpc_method_name"},4732:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))n(t,e,r);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.logger=void 0;const o=s(r(6540));const a=process.env.NVIM_NODE_LOG_LEVEL||"debug";function setupWinstonLogger(){const e=o.createLogger({level:a});if(process.env.NVIM_NODE_LOG_FILE){e.add(new o.transports.File({filename:process.env.NVIM_NODE_LOG_FILE,level:a}))}if(process.env.ALLOW_CONSOLE){e.add(new o.transports.Console({format:o.format.simple()}))}if(!process.env.NVIM_NODE_LOG_FILE&&!process.env.ALLOW_CONSOLE){e.add(new o.transports.Console({silent:true}))}return e}t.logger=setupWinstonLogger()},4029:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:true});t.Transport=void 0;const n=r(2361);const i=r(2803);const s=r(7230);class Response{constructor(e,t){this.encoder=e;this.requestId=t}send(e,t){if(this.sent){throw new Error(`Response to id ${this.requestId} already sent`)}const r=(0,i.encode)([1,this.requestId,t?e:null,!t?e:null]);this.encoder.write(Buffer.from(r.buffer,r.byteOffset,r.byteLength));this.sent=true}}class Transport extends n.EventEmitter{constructor(){super(...arguments);this.pending=new Map;this.nextRequestId=1;this.extensionCodec=this.initializeExtensionCodec()}initializeExtensionCodec(){const e=new i.ExtensionCodec;s.Metadata.forEach((({constructor:t},r)=>{e.register({type:r,encode:e=>{if(e instanceof t){return(0,i.encode)(e.data)}return null},decode:e=>new t({transport:this,client:this.client,data:(0,i.decode)(e)})})}));return e}encodeToBuffer(e){const t=(0,i.encode)(e,{extensionCodec:this.extensionCodec});return Buffer.from(t.buffer,t.byteOffset,t.byteLength)}attach(e,t,r){this.writer=e;this.reader=t;this.client=r;this.reader.on("end",(()=>{this.emit("detach")}));const n=(0,i.decodeMultiStream)(this.reader,{extensionCodec:this.extensionCodec});const resolveGeneratorRecursively=e=>{e.next().then((t=>{if(!t.done){this.parseMessage(t.value);return resolveGeneratorRecursively(e)}return Promise.resolve()}))};resolveGeneratorRecursively(n)}request(e,t,r){this.nextRequestId=this.nextRequestId+1;this.writer.write(this.encodeToBuffer([0,this.nextRequestId,e,t]));this.pending.set(this.nextRequestId,r)}notify(e,t){this.writer.write(this.encodeToBuffer([2,e,t]))}parseMessage(e){const t=e[0];if(t===0){this.emit("request",e[2].toString(),e[3],new Response(this.writer,e[1]))}else if(t===1){const t=e[1];const r=this.pending.get(t);this.pending.delete(t);r(e[2],e[3])}else if(t===2){this.emit("notification",e[1].toString(),e[2])}else{this.writer.write(this.encodeToBuffer([1,0,"Invalid message type",null]))}}}t.Transport=Transport},5956:(e,t,r)=>{var n=r(1852);e.exports=function one(e){var t=0,r;function onetime(){if(t)return r;t=1;r=e.apply(this,arguments);e=null;return r}onetime.displayName=n(e);return onetime}},8399:e=>{const t={};function createErrorType(e,r,n){if(!n){n=Error}function getMessage(e,t,n){if(typeof r==="string"){return r}else{return r(e,t,n)}}class NodeError extends n{constructor(e,t,r){super(getMessage(e,t,r))}}NodeError.prototype.name=n.name;NodeError.prototype.code=e;t[e]=NodeError}function oneOf(e,t){if(Array.isArray(e)){const r=e.length;e=e.map((e=>String(e)));if(r>2){return`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]}else if(r===2){return`one of ${t} ${e[0]} or ${e[1]}`}else{return`of ${t} ${e[0]}`}}else{return`of ${t} ${String(e)}`}}function startsWith(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function endsWith(e,t,r){if(r===undefined||r>e.length){r=e.length}return e.substring(r-t.length,r)===t}function includes(e,t,r){if(typeof r!=="number"){r=0}if(r+t.length>e.length){return false}else{return e.indexOf(t,r)!==-1}}createErrorType("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError);createErrorType("ERR_INVALID_ARG_TYPE",(function(e,t,r){let n;if(typeof t==="string"&&startsWith(t,"not ")){n="must not be";t=t.replace(/^not /,"")}else{n="must be"}let i;if(endsWith(e," argument")){i=`The ${e} ${n} ${oneOf(t,"type")}`}else{const r=includes(e,".")?"property":"argument";i=`The "${e}" ${r} ${n} ${oneOf(t,"type")}`}i+=`. Received type ${typeof r}`;return i}),TypeError);createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");createErrorType("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"}));createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close");createErrorType("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"}));createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times");createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);createErrorType("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError);createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");e.exports.q=t},6599:(e,t,r)=>{var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=Duplex;var i=r(8547);var s=r(9821);r(4626)(Duplex,i);{var o=n(s.prototype);for(var a=0;a<o.length;a++){var l=o[a];if(!Duplex.prototype[l])Duplex.prototype[l]=s.prototype[l]}}function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);i.call(this,e);s.call(this,e);this.allowHalfOpen=true;if(e){if(e.readable===false)this.readable=false;if(e.writable===false)this.writable=false;if(e.allowHalfOpen===false){this.allowHalfOpen=false;this.once("end",onend)}}}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:false,get:function get(){return this._writableState.highWaterMark}});Object.defineProperty(Duplex.prototype,"writableBuffer",{enumerable:false,get:function get(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Duplex.prototype,"writableLength",{enumerable:false,get:function get(){return this._writableState.length}});function onend(){if(this._writableState.ended)return;process.nextTick(onEndNT,this)}function onEndNT(e){e.end()}Object.defineProperty(Duplex.prototype,"destroyed",{enumerable:false,get:function get(){if(this._readableState===undefined||this._writableState===undefined){return false}return this._readableState.destroyed&&this._writableState.destroyed},set:function set(e){if(this._readableState===undefined||this._writableState===undefined){return}this._readableState.destroyed=e;this._writableState.destroyed=e}})},3826:(e,t,r)=>{e.exports=PassThrough;var n=r(118);r(4626)(PassThrough,n);function PassThrough(e){if(!(this instanceof PassThrough))return new PassThrough(e);n.call(this,e)}PassThrough.prototype._transform=function(e,t,r){r(null,e)}},8547:(e,t,r)=>{e.exports=Readable;var n;Readable.ReadableState=ReadableState;var i=r(2361).EventEmitter;var s=function EElistenerCount(e,t){return e.listeners(t).length};var o=r(2572);var a=r(4300).Buffer;var l=(typeof global!=="undefined"?global:typeof window!=="undefined"?window:typeof self!=="undefined"?self:{}).Uint8Array||function(){};function _uint8ArrayToBuffer(e){return a.from(e)}function _isUint8Array(e){return a.isBuffer(e)||e instanceof l}var u=r(3837);var c;if(u&&u.debuglog){c=u.debuglog("stream")}else{c=function debug(){}}var f=r(2561);var h=r(147);var d=r(5361),p=d.getHighWaterMark;var g=r(8399).q,b=g.ERR_INVALID_ARG_TYPE,y=g.ERR_STREAM_PUSH_AFTER_EOF,v=g.ERR_METHOD_NOT_IMPLEMENTED,_=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;var w;var E;var x;r(4626)(Readable,o);var S=h.errorOrDestroy;var k=["error","close","destroy","pause","resume"];function prependListener(e,t,r){if(typeof e.prependListener==="function")return e.prependListener(t,r);if(!e._events||!e._events[t])e.on(t,r);else if(Array.isArray(e._events[t]))e._events[t].unshift(r);else e._events[t]=[r,e._events[t]]}function ReadableState(e,t,i){n=n||r(6599);e=e||{};if(typeof i!=="boolean")i=t instanceof n;this.objectMode=!!e.objectMode;if(i)this.objectMode=this.objectMode||!!e.readableObjectMode;this.highWaterMark=p(this,e,"readableHighWaterMark",i);this.buffer=new f;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.paused=true;this.emitClose=e.emitClose!==false;this.autoDestroy=!!e.autoDestroy;this.destroyed=false;this.defaultEncoding=e.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(e.encoding){if(!w)w=r(515).s;this.decoder=new w(e.encoding);this.encoding=e.encoding}}function Readable(e){n=n||r(6599);if(!(this instanceof Readable))return new Readable(e);var t=this instanceof n;this._readableState=new ReadableState(e,this,t);this.readable=true;if(e){if(typeof e.read==="function")this._read=e.read;if(typeof e.destroy==="function")this._destroy=e.destroy}o.call(this)}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:false,get:function get(){if(this._readableState===undefined){return false}return this._readableState.destroyed},set:function set(e){if(!this._readableState){return}this._readableState.destroyed=e}});Readable.prototype.destroy=h.destroy;Readable.prototype._undestroy=h.undestroy;Readable.prototype._destroy=function(e,t){t(e)};Readable.prototype.push=function(e,t){var r=this._readableState;var n;if(!r.objectMode){if(typeof e==="string"){t=t||r.defaultEncoding;if(t!==r.encoding){e=a.from(e,t);t=""}n=true}}else{n=true}return readableAddChunk(this,e,t,false,n)};Readable.prototype.unshift=function(e){return readableAddChunk(this,e,null,true,false)};function readableAddChunk(e,t,r,n,i){c("readableAddChunk",t);var s=e._readableState;if(t===null){s.reading=false;onEofChunk(e,s)}else{var o;if(!i)o=chunkInvalid(s,t);if(o){S(e,o)}else if(s.objectMode||t&&t.length>0){if(typeof t!=="string"&&!s.objectMode&&Object.getPrototypeOf(t)!==a.prototype){t=_uint8ArrayToBuffer(t)}if(n){if(s.endEmitted)S(e,new _);else addChunk(e,s,t,true)}else if(s.ended){S(e,new y)}else if(s.destroyed){return false}else{s.reading=false;if(s.decoder&&!r){t=s.decoder.write(t);if(s.objectMode||t.length!==0)addChunk(e,s,t,false);else maybeReadMore(e,s)}else{addChunk(e,s,t,false)}}}else if(!n){s.reading=false;maybeReadMore(e,s)}}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function addChunk(e,t,r,n){if(t.flowing&&t.length===0&&!t.sync){t.awaitDrain=0;e.emit("data",r)}else{t.length+=t.objectMode?1:r.length;if(n)t.buffer.unshift(r);else t.buffer.push(r);if(t.needReadable)emitReadable(e)}maybeReadMore(e,t)}function chunkInvalid(e,t){var r;if(!_isUint8Array(t)&&typeof t!=="string"&&t!==undefined&&!e.objectMode){r=new b("chunk",["string","Buffer","Uint8Array"],t)}return r}Readable.prototype.isPaused=function(){return this._readableState.flowing===false};Readable.prototype.setEncoding=function(e){if(!w)w=r(515).s;var t=new w(e);this._readableState.decoder=t;this._readableState.encoding=this._readableState.decoder.encoding;var n=this._readableState.buffer.head;var i="";while(n!==null){i+=t.write(n.data);n=n.next}this._readableState.buffer.clear();if(i!=="")this._readableState.buffer.push(i);this._readableState.length=i.length;return this};var O=1073741824;function computeNewHighWaterMark(e){if(e>=O){e=O}else{e--;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;e++}return e}function howMuchToRead(e,t){if(e<=0||t.length===0&&t.ended)return 0;if(t.objectMode)return 1;if(e!==e){if(t.flowing&&t.length)return t.buffer.head.data.length;else return t.length}if(e>t.highWaterMark)t.highWaterMark=computeNewHighWaterMark(e);if(e<=t.length)return e;if(!t.ended){t.needReadable=true;return 0}return t.length}Readable.prototype.read=function(e){c("read",e);e=parseInt(e,10);var t=this._readableState;var r=e;if(e!==0)t.emittedReadable=false;if(e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended)){c("read: emitReadable",t.length,t.ended);if(t.length===0&&t.ended)endReadable(this);else emitReadable(this);return null}e=howMuchToRead(e,t);if(e===0&&t.ended){if(t.length===0)endReadable(this);return null}var n=t.needReadable;c("need readable",n);if(t.length===0||t.length-e<t.highWaterMark){n=true;c("length less than watermark",n)}if(t.ended||t.reading){n=false;c("reading or ended",n)}else if(n){c("do read");t.reading=true;t.sync=true;if(t.length===0)t.needReadable=true;this._read(t.highWaterMark);t.sync=false;if(!t.reading)e=howMuchToRead(r,t)}var i;if(e>0)i=fromList(e,t);else i=null;if(i===null){t.needReadable=t.length<=t.highWaterMark;e=0}else{t.length-=e;t.awaitDrain=0}if(t.length===0){if(!t.ended)t.needReadable=true;if(r!==e&&t.ended)endReadable(this)}if(i!==null)this.emit("data",i);return i};function onEofChunk(e,t){c("onEofChunk");if(t.ended)return;if(t.decoder){var r=t.decoder.end();if(r&&r.length){t.buffer.push(r);t.length+=t.objectMode?1:r.length}}t.ended=true;if(t.sync){emitReadable(e)}else{t.needReadable=false;if(!t.emittedReadable){t.emittedReadable=true;emitReadable_(e)}}}function emitReadable(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable);t.needReadable=false;if(!t.emittedReadable){c("emitReadable",t.flowing);t.emittedReadable=true;process.nextTick(emitReadable_,e)}}function emitReadable_(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended);if(!t.destroyed&&(t.length||t.ended)){e.emit("readable");t.emittedReadable=false}t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark;flow(e)}function maybeReadMore(e,t){if(!t.readingMore){t.readingMore=true;process.nextTick(maybeReadMore_,e,t)}}function maybeReadMore_(e,t){while(!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0)){var r=t.length;c("maybeReadMore read 0");e.read(0);if(r===t.length)break}t.readingMore=false}Readable.prototype._read=function(e){S(this,new v("_read()"))};Readable.prototype.pipe=function(e,t){var r=this;var n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1;c("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||t.end!==false)&&e!==process.stdout&&e!==process.stderr;var o=i?onend:unpipe;if(n.endEmitted)process.nextTick(o);else r.once("end",o);e.on("unpipe",onunpipe);function onunpipe(e,t){c("onunpipe");if(e===r){if(t&&t.hasUnpiped===false){t.hasUnpiped=true;cleanup()}}}function onend(){c("onend");e.end()}var a=pipeOnDrain(r);e.on("drain",a);var l=false;function cleanup(){c("cleanup");e.removeListener("close",onclose);e.removeListener("finish",onfinish);e.removeListener("drain",a);e.removeListener("error",onerror);e.removeListener("unpipe",onunpipe);r.removeListener("end",onend);r.removeListener("end",unpipe);r.removeListener("data",ondata);l=true;if(n.awaitDrain&&(!e._writableState||e._writableState.needDrain))a()}r.on("data",ondata);function ondata(t){c("ondata");var i=e.write(t);c("dest.write",i);if(i===false){if((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&indexOf(n.pipes,e)!==-1)&&!l){c("false write response, pause",n.awaitDrain);n.awaitDrain++}r.pause()}}function onerror(t){c("onerror",t);unpipe();e.removeListener("error",onerror);if(s(e,"error")===0)S(e,t)}prependListener(e,"error",onerror);function onclose(){e.removeListener("finish",onfinish);unpipe()}e.once("close",onclose);function onfinish(){c("onfinish");e.removeListener("close",onclose);unpipe()}e.once("finish",onfinish);function unpipe(){c("unpipe");r.unpipe(e)}e.emit("pipe",r);if(!n.flowing){c("pipe resume");r.resume()}return e};function pipeOnDrain(e){return function pipeOnDrainFunctionResult(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain);if(t.awaitDrain)t.awaitDrain--;if(t.awaitDrain===0&&s(e,"data")){t.flowing=true;flow(e)}}}Readable.prototype.unpipe=function(e){var t=this._readableState;var r={hasUnpiped:false};if(t.pipesCount===0)return this;if(t.pipesCount===1){if(e&&e!==t.pipes)return this;if(!e)e=t.pipes;t.pipes=null;t.pipesCount=0;t.flowing=false;if(e)e.emit("unpipe",this,r);return this}if(!e){var n=t.pipes;var i=t.pipesCount;t.pipes=null;t.pipesCount=0;t.flowing=false;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:false});return this}var o=indexOf(t.pipes,e);if(o===-1)return this;t.pipes.splice(o,1);t.pipesCount-=1;if(t.pipesCount===1)t.pipes=t.pipes[0];e.emit("unpipe",this,r);return this};Readable.prototype.on=function(e,t){var r=o.prototype.on.call(this,e,t);var n=this._readableState;if(e==="data"){n.readableListening=this.listenerCount("readable")>0;if(n.flowing!==false)this.resume()}else if(e==="readable"){if(!n.endEmitted&&!n.readableListening){n.readableListening=n.needReadable=true;n.flowing=false;n.emittedReadable=false;c("on readable",n.length,n.reading);if(n.length){emitReadable(this)}else if(!n.reading){process.nextTick(nReadingNextTick,this)}}}return r};Readable.prototype.addListener=Readable.prototype.on;Readable.prototype.removeListener=function(e,t){var r=o.prototype.removeListener.call(this,e,t);if(e==="readable"){process.nextTick(updateReadableListening,this)}return r};Readable.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);if(e==="readable"||e===undefined){process.nextTick(updateReadableListening,this)}return t};function updateReadableListening(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0;if(t.resumeScheduled&&!t.paused){t.flowing=true}else if(e.listenerCount("data")>0){e.resume()}}function nReadingNextTick(e){c("readable nexttick read 0");e.read(0)}Readable.prototype.resume=function(){var e=this._readableState;if(!e.flowing){c("resume");e.flowing=!e.readableListening;resume(this,e)}e.paused=false;return this};function resume(e,t){if(!t.resumeScheduled){t.resumeScheduled=true;process.nextTick(resume_,e,t)}}function resume_(e,t){c("resume",t.reading);if(!t.reading){e.read(0)}t.resumeScheduled=false;e.emit("resume");flow(e);if(t.flowing&&!t.reading)e.read(0)}Readable.prototype.pause=function(){c("call pause flowing=%j",this._readableState.flowing);if(this._readableState.flowing!==false){c("pause");this._readableState.flowing=false;this.emit("pause")}this._readableState.paused=true;return this};function flow(e){var t=e._readableState;c("flow",t.flowing);while(t.flowing&&e.read()!==null);}Readable.prototype.wrap=function(e){var t=this;var r=this._readableState;var n=false;e.on("end",(function(){c("wrapped end");if(r.decoder&&!r.ended){var e=r.decoder.end();if(e&&e.length)t.push(e)}t.push(null)}));e.on("data",(function(i){c("wrapped data");if(r.decoder)i=r.decoder.write(i);if(r.objectMode&&(i===null||i===undefined))return;else if(!r.objectMode&&(!i||!i.length))return;var s=t.push(i);if(!s){n=true;e.pause()}}));for(var i in e){if(this[i]===undefined&&typeof e[i]==="function"){this[i]=function methodWrap(t){return function methodWrapReturnFunction(){return e[t].apply(e,arguments)}}(i)}}for(var s=0;s<k.length;s++){e.on(k[s],this.emit.bind(this,k[s]))}this._read=function(t){c("wrapped _read",t);if(n){n=false;e.resume()}};return this};if(typeof Symbol==="function"){Readable.prototype[Symbol.asyncIterator]=function(){if(E===undefined){E=r(3096)}return E(this)}}Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:false,get:function get(){return this._readableState.highWaterMark}});Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:false,get:function get(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:false,get:function get(){return this._readableState.flowing},set:function set(e){if(this._readableState){this._readableState.flowing=e}}});Readable._fromList=fromList;Object.defineProperty(Readable.prototype,"readableLength",{enumerable:false,get:function get(){return this._readableState.length}});function fromList(e,t){if(t.length===0)return null;var r;if(t.objectMode)r=t.buffer.shift();else if(!e||e>=t.length){if(t.decoder)r=t.buffer.join("");else if(t.buffer.length===1)r=t.buffer.first();else r=t.buffer.concat(t.length);t.buffer.clear()}else{r=t.buffer.consume(e,t.decoder)}return r}function endReadable(e){var t=e._readableState;c("endReadable",t.endEmitted);if(!t.endEmitted){t.ended=true;process.nextTick(endReadableNT,t,e)}}function endReadableNT(e,t){c("endReadableNT",e.endEmitted,e.length);if(!e.endEmitted&&e.length===0){e.endEmitted=true;t.readable=false;t.emit("end");if(e.autoDestroy){var r=t._writableState;if(!r||r.autoDestroy&&r.finished){t.destroy()}}}}if(typeof Symbol==="function"){Readable.from=function(e,t){if(x===undefined){x=r(5602)}return x(Readable,e,t)}}function indexOf(e,t){for(var r=0,n=e.length;r<n;r++){if(e[r]===t)return r}return-1}},118:(e,t,r)=>{e.exports=Transform;var n=r(8399).q,i=n.ERR_METHOD_NOT_IMPLEMENTED,s=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0;var l=r(6599);r(4626)(Transform,l);function afterTransform(e,t){var r=this._transformState;r.transforming=false;var n=r.writecb;if(n===null){return this.emit("error",new s)}r.writechunk=null;r.writecb=null;if(t!=null)this.push(t);n(e);var i=this._readableState;i.reading=false;if(i.needReadable||i.length<i.highWaterMark){this._read(i.highWaterMark)}}function Transform(e){if(!(this instanceof Transform))return new Transform(e);l.call(this,e);this._transformState={afterTransform:afterTransform.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(e){if(typeof e.transform==="function")this._transform=e.transform;if(typeof e.flush==="function")this._flush=e.flush}this.on("prefinish",prefinish)}function prefinish(){var e=this;if(typeof this._flush==="function"&&!this._readableState.destroyed){this._flush((function(t,r){done(e,t,r)}))}else{done(this,null,null)}}Transform.prototype.push=function(e,t){this._transformState.needTransform=false;return l.prototype.push.call(this,e,t)};Transform.prototype._transform=function(e,t,r){r(new i("_transform()"))};Transform.prototype._write=function(e,t,r){var n=this._transformState;n.writecb=r;n.writechunk=e;n.writeencoding=t;if(!n.transforming){var i=this._readableState;if(n.needTransform||i.needReadable||i.length<i.highWaterMark)this._read(i.highWaterMark)}};Transform.prototype._read=function(e){var t=this._transformState;if(t.writechunk!==null&&!t.transforming){t.transforming=true;this._transform(t.writechunk,t.writeencoding,t.afterTransform)}else{t.needTransform=true}};Transform.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))};function done(e,t,r){if(t)return e.emit("error",t);if(r!=null)e.push(r);if(e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}},9821:(e,t,r)=>{e.exports=Writable;function WriteReq(e,t,r){this.chunk=e;this.encoding=t;this.callback=r;this.next=null}function CorkedRequest(e){var t=this;this.next=null;this.entry=null;this.finish=function(){onCorkedFinish(t,e)}}var n;Writable.WritableState=WritableState;var i={deprecate:r(1174)};var s=r(2572);var o=r(4300).Buffer;var a=(typeof global!=="undefined"?global:typeof window!=="undefined"?window:typeof self!=="undefined"?self:{}).Uint8Array||function(){};function _uint8ArrayToBuffer(e){return o.from(e)}function _isUint8Array(e){return o.isBuffer(e)||e instanceof a}var l=r(147);var u=r(5361),c=u.getHighWaterMark;var f=r(8399).q,h=f.ERR_INVALID_ARG_TYPE,d=f.ERR_METHOD_NOT_IMPLEMENTED,p=f.ERR_MULTIPLE_CALLBACK,g=f.ERR_STREAM_CANNOT_PIPE,b=f.ERR_STREAM_DESTROYED,y=f.ERR_STREAM_NULL_VALUES,v=f.ERR_STREAM_WRITE_AFTER_END,_=f.ERR_UNKNOWN_ENCODING;var w=l.errorOrDestroy;r(4626)(Writable,s);function nop(){}function WritableState(e,t,i){n=n||r(6599);e=e||{};if(typeof i!=="boolean")i=t instanceof n;this.objectMode=!!e.objectMode;if(i)this.objectMode=this.objectMode||!!e.writableObjectMode;this.highWaterMark=c(this,e,"writableHighWaterMark",i);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var s=e.decodeStrings===false;this.decodeStrings=!s;this.defaultEncoding=e.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(e){onwrite(t,e)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.emitClose=e.emitClose!==false;this.autoDestroy=!!e.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function getBuffer(){var e=this.bufferedRequest;var t=[];while(e){t.push(e);e=e.next}return t};(function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:i.deprecate((function writableStateBufferGetter(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}})();var E;if(typeof Symbol==="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==="function"){E=Function.prototype[Symbol.hasInstance];Object.defineProperty(Writable,Symbol.hasInstance,{value:function value(e){if(E.call(this,e))return true;if(this!==Writable)return false;return e&&e._writableState instanceof WritableState}})}else{E=function realHasInstance(e){return e instanceof this}}function Writable(e){n=n||r(6599);var t=this instanceof n;if(!t&&!E.call(Writable,this))return new Writable(e);this._writableState=new WritableState(e,this,t);this.writable=true;if(e){if(typeof e.write==="function")this._write=e.write;if(typeof e.writev==="function")this._writev=e.writev;if(typeof e.destroy==="function")this._destroy=e.destroy;if(typeof e.final==="function")this._final=e.final}s.call(this)}Writable.prototype.pipe=function(){w(this,new g)};function writeAfterEnd(e,t){var r=new v;w(e,r);process.nextTick(t,r)}function validChunk(e,t,r,n){var i;if(r===null){i=new y}else if(typeof r!=="string"&&!t.objectMode){i=new h("chunk",["string","Buffer"],r)}if(i){w(e,i);process.nextTick(n,i);return false}return true}Writable.prototype.write=function(e,t,r){var n=this._writableState;var i=false;var s=!n.objectMode&&_isUint8Array(e);if(s&&!o.isBuffer(e)){e=_uint8ArrayToBuffer(e)}if(typeof t==="function"){r=t;t=null}if(s)t="buffer";else if(!t)t=n.defaultEncoding;if(typeof r!=="function")r=nop;if(n.ending)writeAfterEnd(this,r);else if(s||validChunk(this,n,e,r)){n.pendingcb++;i=writeOrBuffer(this,n,s,e,t,r)}return i};Writable.prototype.cork=function(){this._writableState.corked++};Writable.prototype.uncork=function(){var e=this._writableState;if(e.corked){e.corked--;if(!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest)clearBuffer(this,e)}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(e){if(typeof e==="string")e=e.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new _(e);this._writableState.defaultEncoding=e;return this};Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:false,get:function get(){return this._writableState&&this._writableState.getBuffer()}});function decodeChunk(e,t,r){if(!e.objectMode&&e.decodeStrings!==false&&typeof t==="string"){t=o.from(t,r)}return t}Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:false,get:function get(){return this._writableState.highWaterMark}});function writeOrBuffer(e,t,r,n,i,s){if(!r){var o=decodeChunk(t,n,i);if(n!==o){r=true;i="buffer";n=o}}var a=t.objectMode?1:n.length;t.length+=a;var l=t.length<t.highWaterMark;if(!l)t.needDrain=true;if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null};if(u){u.next=t.lastBufferedRequest}else{t.bufferedRequest=t.lastBufferedRequest}t.bufferedRequestCount+=1}else{doWrite(e,t,false,a,n,i,s)}return l}function doWrite(e,t,r,n,i,s,o){t.writelen=n;t.writecb=o;t.writing=true;t.sync=true;if(t.destroyed)t.onwrite(new b("write"));else if(r)e._writev(i,t.onwrite);else e._write(i,s,t.onwrite);t.sync=false}function onwriteError(e,t,r,n,i){--t.pendingcb;if(r){process.nextTick(i,n);process.nextTick(finishMaybe,e,t);e._writableState.errorEmitted=true;w(e,n)}else{i(n);e._writableState.errorEmitted=true;w(e,n);finishMaybe(e,t)}}function onwriteStateUpdate(e){e.writing=false;e.writecb=null;e.length-=e.writelen;e.writelen=0}function onwrite(e,t){var r=e._writableState;var n=r.sync;var i=r.writecb;if(typeof i!=="function")throw new p;onwriteStateUpdate(r);if(t)onwriteError(e,r,n,t,i);else{var s=needFinish(r)||e.destroyed;if(!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest){clearBuffer(e,r)}if(n){process.nextTick(afterWrite,e,r,s,i)}else{afterWrite(e,r,s,i)}}}function afterWrite(e,t,r,n){if(!r)onwriteDrain(e,t);t.pendingcb--;n();finishMaybe(e,t)}function onwriteDrain(e,t){if(t.length===0&&t.needDrain){t.needDrain=false;e.emit("drain")}}function clearBuffer(e,t){t.bufferProcessing=true;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount;var i=new Array(n);var s=t.corkedRequestsFree;s.entry=r;var o=0;var a=true;while(r){i[o]=r;if(!r.isBuf)a=false;r=r.next;o+=1}i.allBuffers=a;doWrite(e,t,true,t.length,i,"",s.finish);t.pendingcb++;t.lastBufferedRequest=null;if(s.next){t.corkedRequestsFree=s.next;s.next=null}else{t.corkedRequestsFree=new CorkedRequest(t)}t.bufferedRequestCount=0}else{while(r){var l=r.chunk;var u=r.encoding;var c=r.callback;var f=t.objectMode?1:l.length;doWrite(e,t,false,f,l,u,c);r=r.next;t.bufferedRequestCount--;if(t.writing){break}}if(r===null)t.lastBufferedRequest=null}t.bufferedRequest=r;t.bufferProcessing=false}Writable.prototype._write=function(e,t,r){r(new d("_write()"))};Writable.prototype._writev=null;Writable.prototype.end=function(e,t,r){var n=this._writableState;if(typeof e==="function"){r=e;e=null;t=null}else if(typeof t==="function"){r=t;t=null}if(e!==null&&e!==undefined)this.write(e,t);if(n.corked){n.corked=1;this.uncork()}if(!n.ending)endWritable(this,n,r);return this};Object.defineProperty(Writable.prototype,"writableLength",{enumerable:false,get:function get(){return this._writableState.length}});function needFinish(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function callFinal(e,t){e._final((function(r){t.pendingcb--;if(r){w(e,r)}t.prefinished=true;e.emit("prefinish");finishMaybe(e,t)}))}function prefinish(e,t){if(!t.prefinished&&!t.finalCalled){if(typeof e._final==="function"&&!t.destroyed){t.pendingcb++;t.finalCalled=true;process.nextTick(callFinal,e,t)}else{t.prefinished=true;e.emit("prefinish")}}}function finishMaybe(e,t){var r=needFinish(t);if(r){prefinish(e,t);if(t.pendingcb===0){t.finished=true;e.emit("finish");if(t.autoDestroy){var n=e._readableState;if(!n||n.autoDestroy&&n.endEmitted){e.destroy()}}}}return r}function endWritable(e,t,r){t.ending=true;finishMaybe(e,t);if(r){if(t.finished)process.nextTick(r);else e.once("finish",r)}t.ended=true;e.writable=false}function onCorkedFinish(e,t,r){var n=e.entry;e.entry=null;while(n){var i=n.callback;t.pendingcb--;i(r);n=n.next}t.corkedRequestsFree.next=e}Object.defineProperty(Writable.prototype,"destroyed",{enumerable:false,get:function get(){if(this._writableState===undefined){return false}return this._writableState.destroyed},set:function set(e){if(!this._writableState){return}this._writableState.destroyed=e}});Writable.prototype.destroy=l.destroy;Writable.prototype._undestroy=l.undestroy;Writable.prototype._destroy=function(e,t){t(e)}},3096:(e,t,r)=>{var n;function _defineProperty(e,t,r){t=_toPropertyKey(t);if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return typeof t==="symbol"?t:String(t)}function _toPrimitive(e,t){if(typeof e!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if(typeof n!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i=r(9706);var s=Symbol("lastResolve");var o=Symbol("lastReject");var a=Symbol("error");var l=Symbol("ended");var u=Symbol("lastPromise");var c=Symbol("handlePromise");var f=Symbol("stream");function createIterResult(e,t){return{value:e,done:t}}function readAndResolve(e){var t=e[s];if(t!==null){var r=e[f].read();if(r!==null){e[u]=null;e[s]=null;e[o]=null;t(createIterResult(r,false))}}}function onReadable(e){process.nextTick(readAndResolve,e)}function wrapForNext(e,t){return function(r,n){e.then((function(){if(t[l]){r(createIterResult(undefined,true));return}t[c](r,n)}),n)}}var h=Object.getPrototypeOf((function(){}));var d=Object.setPrototypeOf((n={get stream(){return this[f]},next:function next(){var e=this;var t=this[a];if(t!==null){return Promise.reject(t)}if(this[l]){return Promise.resolve(createIterResult(undefined,true))}if(this[f].destroyed){return new Promise((function(t,r){process.nextTick((function(){if(e[a]){r(e[a])}else{t(createIterResult(undefined,true))}}))}))}var r=this[u];var n;if(r){n=new Promise(wrapForNext(r,this))}else{var i=this[f].read();if(i!==null){return Promise.resolve(createIterResult(i,false))}n=new Promise(this[c])}this[u]=n;return n}},_defineProperty(n,Symbol.asyncIterator,(function(){return this})),_defineProperty(n,"return",(function _return(){var e=this;return new Promise((function(t,r){e[f].destroy(null,(function(e){if(e){r(e);return}t(createIterResult(undefined,true))}))}))})),n),h);var p=function createReadableStreamAsyncIterator(e){var t;var r=Object.create(d,(t={},_defineProperty(t,f,{value:e,writable:true}),_defineProperty(t,s,{value:null,writable:true}),_defineProperty(t,o,{value:null,writable:true}),_defineProperty(t,a,{value:null,writable:true}),_defineProperty(t,l,{value:e._readableState.endEmitted,writable:true}),_defineProperty(t,c,{value:function value(e,t){var n=r[f].read();if(n){r[u]=null;r[s]=null;r[o]=null;e(createIterResult(n,false))}else{r[s]=e;r[o]=t}},writable:true}),t));r[u]=null;i(e,(function(e){if(e&&e.code!=="ERR_STREAM_PREMATURE_CLOSE"){var t=r[o];if(t!==null){r[u]=null;r[s]=null;r[o]=null;t(e)}r[a]=e;return}var n=r[s];if(n!==null){r[u]=null;r[s]=null;r[o]=null;n(createIterResult(undefined,true))}r[l]=true}));e.on("readable",onReadable.bind(null,r));return r};e.exports=p},2561:(e,t,r)=>{function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){t=_toPropertyKey(t);if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,r){if(t)_defineProperties(e.prototype,t);if(r)_defineProperties(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return typeof t==="symbol"?t:String(t)}function _toPrimitive(e,t){if(typeof e!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if(typeof n!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var n=r(4300),i=n.Buffer;var s=r(3837),o=s.inspect;var a=o&&o.custom||"inspect";function copyBuffer(e,t,r){i.prototype.copy.call(e,t,r)}e.exports=function(){function BufferList(){_classCallCheck(this,BufferList);this.head=null;this.tail=null;this.length=0}_createClass(BufferList,[{key:"push",value:function push(e){var t={data:e,next:null};if(this.length>0)this.tail.next=t;else this.head=t;this.tail=t;++this.length}},{key:"unshift",value:function unshift(e){var t={data:e,next:this.head};if(this.length===0)this.tail=t;this.head=t;++this.length}},{key:"shift",value:function shift(){if(this.length===0)return;var e=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return e}},{key:"clear",value:function clear(){this.head=this.tail=null;this.length=0}},{key:"join",value:function join(e){if(this.length===0)return"";var t=this.head;var r=""+t.data;while(t=t.next)r+=e+t.data;return r}},{key:"concat",value:function concat(e){if(this.length===0)return i.alloc(0);var t=i.allocUnsafe(e>>>0);var r=this.head;var n=0;while(r){copyBuffer(r.data,t,n);n+=r.data.length;r=r.next}return t}},{key:"consume",value:function consume(e,t){var r;if(e<this.head.data.length){r=this.head.data.slice(0,e);this.head.data=this.head.data.slice(e)}else if(e===this.head.data.length){r=this.shift()}else{r=t?this._getString(e):this._getBuffer(e)}return r}},{key:"first",value:function first(){return this.head.data}},{key:"_getString",value:function _getString(e){var t=this.head;var r=1;var n=t.data;e-=n.length;while(t=t.next){var i=t.data;var s=e>i.length?i.length:e;if(s===i.length)n+=i;else n+=i.slice(0,e);e-=s;if(e===0){if(s===i.length){++r;if(t.next)this.head=t.next;else this.head=this.tail=null}else{this.head=t;t.data=i.slice(s)}break}++r}this.length-=r;return n}},{key:"_getBuffer",value:function _getBuffer(e){var t=i.allocUnsafe(e);var r=this.head;var n=1;r.data.copy(t);e-=r.data.length;while(r=r.next){var s=r.data;var o=e>s.length?s.length:e;s.copy(t,t.length-e,0,o);e-=o;if(e===0){if(o===s.length){++n;if(r.next)this.head=r.next;else this.head=this.tail=null}else{this.head=r;r.data=s.slice(o)}break}++n}this.length-=n;return t}},{key:a,value:function value(e,t){return o(this,_objectSpread(_objectSpread({},t),{},{depth:0,customInspect:false}))}}]);return BufferList}()},147:e=>{function destroy(e,t){var r=this;var n=this._readableState&&this._readableState.destroyed;var i=this._writableState&&this._writableState.destroyed;if(n||i){if(t){t(e)}else if(e){if(!this._writableState){process.nextTick(emitErrorNT,this,e)}else if(!this._writableState.errorEmitted){this._writableState.errorEmitted=true;process.nextTick(emitErrorNT,this,e)}}return this}if(this._readableState){this._readableState.destroyed=true}if(this._writableState){this._writableState.destroyed=true}this._destroy(e||null,(function(e){if(!t&&e){if(!r._writableState){process.nextTick(emitErrorAndCloseNT,r,e)}else if(!r._writableState.errorEmitted){r._writableState.errorEmitted=true;process.nextTick(emitErrorAndCloseNT,r,e)}else{process.nextTick(emitCloseNT,r)}}else if(t){process.nextTick(emitCloseNT,r);t(e)}else{process.nextTick(emitCloseNT,r)}}));return this}function emitErrorAndCloseNT(e,t){emitErrorNT(e,t);emitCloseNT(e)}function emitCloseNT(e){if(e._writableState&&!e._writableState.emitClose)return;if(e._readableState&&!e._readableState.emitClose)return;e.emit("close")}function undestroy(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finalCalled=false;this._writableState.prefinished=false;this._writableState.finished=false;this._writableState.errorEmitted=false}}function emitErrorNT(e,t){e.emit("error",t)}function errorOrDestroy(e,t){var r=e._readableState;var n=e._writableState;if(r&&r.autoDestroy||n&&n.autoDestroy)e.destroy(t);else e.emit("error",t)}e.exports={destroy:destroy,undestroy:undestroy,errorOrDestroy:errorOrDestroy}},9706:(e,t,r)=>{var n=r(8399).q.ERR_STREAM_PREMATURE_CLOSE;function once(e){var t=false;return function(){if(t)return;t=true;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}e.apply(this,n)}}function noop(){}function isRequest(e){return e.setHeader&&typeof e.abort==="function"}function eos(e,t,r){if(typeof t==="function")return eos(e,null,t);if(!t)t={};r=once(r||noop);var i=t.readable||t.readable!==false&&e.readable;var s=t.writable||t.writable!==false&&e.writable;var o=function onlegacyfinish(){if(!e.writable)l()};var a=e._writableState&&e._writableState.finished;var l=function onfinish(){s=false;a=true;if(!i)r.call(e)};var u=e._readableState&&e._readableState.endEmitted;var c=function onend(){i=false;u=true;if(!s)r.call(e)};var f=function onerror(t){r.call(e,t)};var h=function onclose(){var t;if(i&&!u){if(!e._readableState||!e._readableState.ended)t=new n;return r.call(e,t)}if(s&&!a){if(!e._writableState||!e._writableState.ended)t=new n;return r.call(e,t)}};var d=function onrequest(){e.req.on("finish",l)};if(isRequest(e)){e.on("complete",l);e.on("abort",h);if(e.req)d();else e.on("request",d)}else if(s&&!e._writableState){e.on("end",o);e.on("close",o)}e.on("end",c);e.on("finish",l);if(t.error!==false)e.on("error",f);e.on("close",h);return function(){e.removeListener("complete",l);e.removeListener("abort",h);e.removeListener("request",d);if(e.req)e.req.removeListener("finish",l);e.removeListener("end",o);e.removeListener("close",o);e.removeListener("finish",l);e.removeListener("end",c);e.removeListener("error",f);e.removeListener("close",h)}}e.exports=eos},5602:(e,t,r)=>{function asyncGeneratorStep(e,t,r,n,i,s,o){try{var a=e[s](o);var l=a.value}catch(e){r(e);return}if(a.done){t(l)}else{Promise.resolve(l).then(n,i)}}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var s=e.apply(t,r);function _next(e){asyncGeneratorStep(s,n,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,n,i,_next,_throw,"throw",e)}_next(undefined)}))}}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){t=_toPropertyKey(t);if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return typeof t==="symbol"?t:String(t)}function _toPrimitive(e,t){if(typeof e!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if(typeof n!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var n=r(8399).q.ERR_INVALID_ARG_TYPE;function from(e,t,r){var i;if(t&&typeof t.next==="function"){i=t}else if(t&&t[Symbol.asyncIterator])i=t[Symbol.asyncIterator]();else if(t&&t[Symbol.iterator])i=t[Symbol.iterator]();else throw new n("iterable",["Iterable"],t);var s=new e(_objectSpread({objectMode:true},r));var o=false;s._read=function(){if(!o){o=true;next()}};function next(){return _next2.apply(this,arguments)}function _next2(){_next2=_asyncToGenerator((function*(){try{var e=yield i.next(),t=e.value,r=e.done;if(r){s.push(null)}else if(s.push(yield t)){next()}else{o=false}}catch(e){s.destroy(e)}}));return _next2.apply(this,arguments)}return s}e.exports=from},2886:(e,t,r)=>{var n;function once(e){var t=false;return function(){if(t)return;t=true;e.apply(void 0,arguments)}}var i=r(8399).q,s=i.ERR_MISSING_ARGS,o=i.ERR_STREAM_DESTROYED;function noop(e){if(e)throw e}function isRequest(e){return e.setHeader&&typeof e.abort==="function"}function destroyer(e,t,i,s){s=once(s);var a=false;e.on("close",(function(){a=true}));if(n===undefined)n=r(9706);n(e,{readable:t,writable:i},(function(e){if(e)return s(e);a=true;s()}));var l=false;return function(t){if(a)return;if(l)return;l=true;if(isRequest(e))return e.abort();if(typeof e.destroy==="function")return e.destroy();s(t||new o("pipe"))}}function call(e){e()}function pipe(e,t){return e.pipe(t)}function popCallback(e){if(!e.length)return noop;if(typeof e[e.length-1]!=="function")return noop;return e.pop()}function pipeline(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n=popCallback(t);if(Array.isArray(t[0]))t=t[0];if(t.length<2){throw new s("streams")}var i;var o=t.map((function(e,r){var s=r<t.length-1;var a=r>0;return destroyer(e,s,a,(function(e){if(!i)i=e;if(e)o.forEach(call);if(s)return;o.forEach(call);n(i)}))}));return t.reduce(pipe)}e.exports=pipeline},5361:(e,t,r)=>{var n=r(8399).q.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function getHighWaterMark(e,t,r,i){var s=highWaterMarkFrom(t,i,r);if(s!=null){if(!(isFinite(s)&&Math.floor(s)===s)||s<0){var o=i?r:"highWaterMark";throw new n(o,s)}return Math.floor(s)}return e.objectMode?16:16*1024}e.exports={getHighWaterMark:getHighWaterMark}},2572:(e,t,r)=>{e.exports=r(2781)},3022:(e,t,r)=>{var n=r(2781);if(process.env.READABLE_STREAM==="disable"&&n){e.exports=n.Readable;Object.assign(e.exports,n);e.exports.Stream=n}else{t=e.exports=r(8547);t.Stream=n||t;t.Readable=t;t.Writable=r(9821);t.Duplex=r(6599);t.Transform=r(118);t.PassThrough=r(3826);t.finished=r(9706);t.pipeline=r(2886)}},6053:(e,t,r)=>{
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r(4300);var i=n.Buffer;function copyProps(e,t){for(var r in e){t[r]=e[r]}}if(i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow){e.exports=n}else{copyProps(n,t);t.Buffer=SafeBuffer}function SafeBuffer(e,t,r){return i(e,t,r)}SafeBuffer.prototype=Object.create(i.prototype);copyProps(i,SafeBuffer);SafeBuffer.from=function(e,t,r){if(typeof e==="number"){throw new TypeError("Argument must not be a number")}return i(e,t,r)};SafeBuffer.alloc=function(e,t,r){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}var n=i(e);if(t!==undefined){if(typeof r==="string"){n.fill(t,r)}else{n.fill(t)}}else{n.fill(0)}return n};SafeBuffer.allocUnsafe=function(e){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}return i(e)};SafeBuffer.allocUnsafeSlow=function(e){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}return n.SlowBuffer(e)}},6188:(e,t)=>{const{hasOwnProperty:r}=Object.prototype;const n=configure();n.configure=configure;n.stringify=n;n.default=n;t.stringify=n;t.configure=configure;e.exports=n;const i=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function strEscape(e){if(e.length<5e3&&!i.test(e)){return`"${e}"`}return JSON.stringify(e)}function insertSort(e){if(e.length>200){return e.sort()}for(let t=1;t<e.length;t++){const r=e[t];let n=t;while(n!==0&&e[n-1]>r){e[n]=e[n-1];n--}e[n]=r}return e}const s=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function isTypedArrayWithEntries(e){return s.call(e)!==undefined&&e.length!==0}function stringifyTypedArray(e,t,r){if(e.length<r){r=e.length}const n=t===","?"":" ";let i=`"0":${n}${e[0]}`;for(let s=1;s<r;s++){i+=`${t}"${s}":${n}${e[s]}`}return i}function getCircularValueOption(e){if(r.call(e,"circularValue")){const t=e.circularValue;if(typeof t==="string"){return`"${t}"`}if(t==null){return t}if(t===Error||t===TypeError){return{toString(){throw new TypeError("Converting circular structure to JSON")}}}throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function getBooleanOption(e,t){let n;if(r.call(e,t)){n=e[t];if(typeof n!=="boolean"){throw new TypeError(`The "${t}" argument must be of type boolean`)}}return n===undefined?true:n}function getPositiveIntegerOption(e,t){let n;if(r.call(e,t)){n=e[t];if(typeof n!=="number"){throw new TypeError(`The "${t}" argument must be of type number`)}if(!Number.isInteger(n)){throw new TypeError(`The "${t}" argument must be an integer`)}if(n<1){throw new RangeError(`The "${t}" argument must be >= 1`)}}return n===undefined?Infinity:n}function getItemCount(e){if(e===1){return"1 item"}return`${e} items`}function getUniqueReplacerSet(e){const t=new Set;for(const r of e){if(typeof r==="string"||typeof r==="number"){t.add(String(r))}}return t}function getStrictOption(e){if(r.call(e,"strict")){const t=e.strict;if(typeof t!=="boolean"){throw new TypeError('The "strict" argument must be of type boolean')}if(t){return e=>{let t=`Object can not safely be stringified. Received type ${typeof e}`;if(typeof e!=="function")t+=` (${e.toString()})`;throw new Error(t)}}}}function configure(e){e={...e};const t=getStrictOption(e);if(t){if(e.bigint===undefined){e.bigint=false}if(!("circularValue"in e)){e.circularValue=Error}}const r=getCircularValueOption(e);const n=getBooleanOption(e,"bigint");const i=getBooleanOption(e,"deterministic");const s=getPositiveIntegerOption(e,"maximumDepth");const o=getPositiveIntegerOption(e,"maximumBreadth");function stringifyFnReplacer(e,a,l,u,c,f){let h=a[e];if(typeof h==="object"&&h!==null&&typeof h.toJSON==="function"){h=h.toJSON(e)}h=u.call(a,e,h);switch(typeof h){case"string":return strEscape(h);case"object":{if(h===null){return"null"}if(l.indexOf(h)!==-1){return r}let e="";let t=",";const n=f;if(Array.isArray(h)){if(h.length===0){return"[]"}if(s<l.length+1){return'"[Array]"'}l.push(h);if(c!==""){f+=c;e+=`\n${f}`;t=`,\n${f}`}const r=Math.min(h.length,o);let i=0;for(;i<r-1;i++){const r=stringifyFnReplacer(String(i),h,l,u,c,f);e+=r!==undefined?r:"null";e+=t}const a=stringifyFnReplacer(String(i),h,l,u,c,f);e+=a!==undefined?a:"null";if(h.length-1>o){const r=h.length-o-1;e+=`${t}"... ${getItemCount(r)} not stringified"`}if(c!==""){e+=`\n${n}`}l.pop();return`[${e}]`}let a=Object.keys(h);const d=a.length;if(d===0){return"{}"}if(s<l.length+1){return'"[Object]"'}let p="";let g="";if(c!==""){f+=c;t=`,\n${f}`;p=" "}const b=Math.min(d,o);if(i&&!isTypedArrayWithEntries(h)){a=insertSort(a)}l.push(h);for(let r=0;r<b;r++){const n=a[r];const i=stringifyFnReplacer(n,h,l,u,c,f);if(i!==undefined){e+=`${g}${strEscape(n)}:${p}${i}`;g=t}}if(d>o){const r=d-o;e+=`${g}"...":${p}"${getItemCount(r)} not stringified"`;g=t}if(c!==""&&g.length>1){e=`\n${f}${e}\n${n}`}l.pop();return`{${e}}`}case"number":return isFinite(h)?String(h):t?t(h):"null";case"boolean":return h===true?"true":"false";case"undefined":return undefined;case"bigint":if(n){return String(h)}default:return t?t(h):undefined}}function stringifyArrayReplacer(e,i,a,l,u,c){if(typeof i==="object"&&i!==null&&typeof i.toJSON==="function"){i=i.toJSON(e)}switch(typeof i){case"string":return strEscape(i);case"object":{if(i===null){return"null"}if(a.indexOf(i)!==-1){return r}const e=c;let t="";let n=",";if(Array.isArray(i)){if(i.length===0){return"[]"}if(s<a.length+1){return'"[Array]"'}a.push(i);if(u!==""){c+=u;t+=`\n${c}`;n=`,\n${c}`}const r=Math.min(i.length,o);let f=0;for(;f<r-1;f++){const e=stringifyArrayReplacer(String(f),i[f],a,l,u,c);t+=e!==undefined?e:"null";t+=n}const h=stringifyArrayReplacer(String(f),i[f],a,l,u,c);t+=h!==undefined?h:"null";if(i.length-1>o){const e=i.length-o-1;t+=`${n}"... ${getItemCount(e)} not stringified"`}if(u!==""){t+=`\n${e}`}a.pop();return`[${t}]`}a.push(i);let f="";if(u!==""){c+=u;n=`,\n${c}`;f=" "}let h="";for(const e of l){const r=stringifyArrayReplacer(e,i[e],a,l,u,c);if(r!==undefined){t+=`${h}${strEscape(e)}:${f}${r}`;h=n}}if(u!==""&&h.length>1){t=`\n${c}${t}\n${e}`}a.pop();return`{${t}}`}case"number":return isFinite(i)?String(i):t?t(i):"null";case"boolean":return i===true?"true":"false";case"undefined":return undefined;case"bigint":if(n){return String(i)}default:return t?t(i):undefined}}function stringifyIndent(e,a,l,u,c){switch(typeof a){case"string":return strEscape(a);case"object":{if(a===null){return"null"}if(typeof a.toJSON==="function"){a=a.toJSON(e);if(typeof a!=="object"){return stringifyIndent(e,a,l,u,c)}if(a===null){return"null"}}if(l.indexOf(a)!==-1){return r}const t=c;if(Array.isArray(a)){if(a.length===0){return"[]"}if(s<l.length+1){return'"[Array]"'}l.push(a);c+=u;let e=`\n${c}`;const r=`,\n${c}`;const n=Math.min(a.length,o);let i=0;for(;i<n-1;i++){const t=stringifyIndent(String(i),a[i],l,u,c);e+=t!==undefined?t:"null";e+=r}const f=stringifyIndent(String(i),a[i],l,u,c);e+=f!==undefined?f:"null";if(a.length-1>o){const t=a.length-o-1;e+=`${r}"... ${getItemCount(t)} not stringified"`}e+=`\n${t}`;l.pop();return`[${e}]`}let n=Object.keys(a);const f=n.length;if(f===0){return"{}"}if(s<l.length+1){return'"[Object]"'}c+=u;const h=`,\n${c}`;let d="";let p="";let g=Math.min(f,o);if(isTypedArrayWithEntries(a)){d+=stringifyTypedArray(a,h,o);n=n.slice(a.length);g-=a.length;p=h}if(i){n=insertSort(n)}l.push(a);for(let e=0;e<g;e++){const t=n[e];const r=stringifyIndent(t,a[t],l,u,c);if(r!==undefined){d+=`${p}${strEscape(t)}: ${r}`;p=h}}if(f>o){const e=f-o;d+=`${p}"...": "${getItemCount(e)} not stringified"`;p=h}if(p!==""){d=`\n${c}${d}\n${t}`}l.pop();return`{${d}}`}case"number":return isFinite(a)?String(a):t?t(a):"null";case"boolean":return a===true?"true":"false";case"undefined":return undefined;case"bigint":if(n){return String(a)}default:return t?t(a):undefined}}function stringifySimple(e,a,l){switch(typeof a){case"string":return strEscape(a);case"object":{if(a===null){return"null"}if(typeof a.toJSON==="function"){a=a.toJSON(e);if(typeof a!=="object"){return stringifySimple(e,a,l)}if(a===null){return"null"}}if(l.indexOf(a)!==-1){return r}let t="";if(Array.isArray(a)){if(a.length===0){return"[]"}if(s<l.length+1){return'"[Array]"'}l.push(a);const e=Math.min(a.length,o);let r=0;for(;r<e-1;r++){const e=stringifySimple(String(r),a[r],l);t+=e!==undefined?e:"null";t+=","}const n=stringifySimple(String(r),a[r],l);t+=n!==undefined?n:"null";if(a.length-1>o){const e=a.length-o-1;t+=`,"... ${getItemCount(e)} not stringified"`}l.pop();return`[${t}]`}let n=Object.keys(a);const u=n.length;if(u===0){return"{}"}if(s<l.length+1){return'"[Object]"'}let c="";let f=Math.min(u,o);if(isTypedArrayWithEntries(a)){t+=stringifyTypedArray(a,",",o);n=n.slice(a.length);f-=a.length;c=","}if(i){n=insertSort(n)}l.push(a);for(let e=0;e<f;e++){const r=n[e];const i=stringifySimple(r,a[r],l);if(i!==undefined){t+=`${c}${strEscape(r)}:${i}`;c=","}}if(u>o){const e=u-o;t+=`${c}"...":"${getItemCount(e)} not stringified"`}l.pop();return`{${t}}`}case"number":return isFinite(a)?String(a):t?t(a):"null";case"boolean":return a===true?"true":"false";case"undefined":return undefined;case"bigint":if(n){return String(a)}default:return t?t(a):undefined}}function stringify(e,t,r){if(arguments.length>1){let n="";if(typeof r==="number"){n=" ".repeat(Math.min(r,10))}else if(typeof r==="string"){n=r.slice(0,10)}if(t!=null){if(typeof t==="function"){return stringifyFnReplacer("",{"":e},[],t,n,"")}if(Array.isArray(t)){return stringifyArrayReplacer("",e,[],getUniqueReplacerSet(t),n,"")}}if(n.length!==0){return stringifyIndent("",e,[],n,"")}}return stringifySimple("",e,[])}return stringify}},7562:(e,t,r)=>{var n=r(1196);var i=Array.prototype.concat;var s=Array.prototype.slice;var o=e.exports=function swizzle(e){var t=[];for(var r=0,o=e.length;r<o;r++){var a=e[r];if(n(a)){t=i.call(t,s.call(a))}else{t.push(a)}}return t};o.wrap=function(e){return function(){return e(o(arguments))}}},6962:(e,t)=>{t.get=function(e){var r=Error.stackTraceLimit;Error.stackTraceLimit=Infinity;var n={};var i=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t};Error.captureStackTrace(n,e||t.get);var s=n.stack;Error.prepareStackTrace=i;Error.stackTraceLimit=r;return s};t.parse=function(e){if(!e.stack){return[]}var t=this;var r=e.stack.split("\n").slice(1);return r.map((function(e){if(e.match(/^\s*[-]{4,}$/)){return t._createParsedCallSite({fileName:e,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null})}var r=e.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(!r){return}var n=null;var i=null;var s=null;var o=null;var a=null;var l=r[5]==="native";if(r[1]){s=r[1];var u=s.lastIndexOf(".");if(s[u-1]==".")u--;if(u>0){n=s.substr(0,u);i=s.substr(u+1);var c=n.indexOf(".Module");if(c>0){s=s.substr(c+1);n=n.substr(0,c)}}o=null}if(i){o=n;a=i}if(i==="<anonymous>"){a=null;s=null}var f={fileName:r[2]||null,lineNumber:parseInt(r[3],10)||null,functionName:s,typeName:o,methodName:a,columnNumber:parseInt(r[4],10)||null,native:l};return t._createParsedCallSite(f)})).filter((function(e){return!!e}))};function CallSite(e){for(var t in e){this[t]=e[t]}}var r=["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"];var n=["topLevel","eval","native","constructor"];r.forEach((function(e){CallSite.prototype[e]=null;CallSite.prototype["get"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}}));n.forEach((function(e){CallSite.prototype[e]=false;CallSite.prototype["is"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}}));t._createParsedCallSite=function(e){return new CallSite(e)}},515:(e,t,r)=>{var n=r(6053).Buffer;var i=n.isEncoding||function(e){e=""+e;switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function _normalizeEncoding(e){if(!e)return"utf8";var t;while(true){switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase();t=true}}}function normalizeEncoding(e){var t=_normalizeEncoding(e);if(typeof t!=="string"&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}t.s=StringDecoder;function StringDecoder(e){this.encoding=normalizeEncoding(e);var t;switch(this.encoding){case"utf16le":this.text=utf16Text;this.end=utf16End;t=4;break;case"utf8":this.fillLast=utf8FillLast;t=4;break;case"base64":this.text=base64Text;this.end=base64End;t=3;break;default:this.write=simpleWrite;this.end=simpleEnd;return}this.lastNeed=0;this.lastTotal=0;this.lastChar=n.allocUnsafe(t)}StringDecoder.prototype.write=function(e){if(e.length===0)return"";var t;var r;if(this.lastNeed){t=this.fillLast(e);if(t===undefined)return"";r=this.lastNeed;this.lastNeed=0}else{r=0}if(r<e.length)return t?t+this.text(e,r):this.text(e,r);return t||""};StringDecoder.prototype.end=utf8End;StringDecoder.prototype.text=utf8Text;StringDecoder.prototype.fillLast=function(e){if(this.lastNeed<=e.length){e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length);this.lastNeed-=e.length};function utf8CheckByte(e){if(e<=127)return 0;else if(e>>5===6)return 2;else if(e>>4===14)return 3;else if(e>>3===30)return 4;return e>>6===2?-1:-2}function utf8CheckIncomplete(e,t,r){var n=t.length-1;if(n<r)return 0;var i=utf8CheckByte(t[n]);if(i>=0){if(i>0)e.lastNeed=i-1;return i}if(--n<r||i===-2)return 0;i=utf8CheckByte(t[n]);if(i>=0){if(i>0)e.lastNeed=i-2;return i}if(--n<r||i===-2)return 0;i=utf8CheckByte(t[n]);if(i>=0){if(i>0){if(i===2)i=0;else e.lastNeed=i-3}return i}return 0}function utf8CheckExtraBytes(e,t,r){if((t[0]&192)!==128){e.lastNeed=0;return"ÔøΩ"}if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128){e.lastNeed=1;return"ÔøΩ"}if(e.lastNeed>2&&t.length>2){if((t[2]&192)!==128){e.lastNeed=2;return"ÔøΩ"}}}}function utf8FillLast(e){var t=this.lastTotal-this.lastNeed;var r=utf8CheckExtraBytes(this,e,t);if(r!==undefined)return r;if(this.lastNeed<=e.length){e.copy(this.lastChar,t,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}e.copy(this.lastChar,t,0,e.length);this.lastNeed-=e.length}function utf8Text(e,t){var r=utf8CheckIncomplete(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);e.copy(this.lastChar,0,n);return e.toString("utf8",t,n)}function utf8End(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed)return t+"ÔøΩ";return t}function utf16Text(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=e[e.length-2];this.lastChar[1]=e[e.length-1];return r.slice(0,-1)}}return r}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=e[e.length-1];return e.toString("utf16le",t,e.length-1)}function utf16End(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function base64Text(e,t){var r=(e.length-t)%3;if(r===0)return e.toString("base64",t);this.lastNeed=3-r;this.lastTotal=3;if(r===1){this.lastChar[0]=e[e.length-1]}else{this.lastChar[0]=e[e.length-2];this.lastChar[1]=e[e.length-1]}return e.toString("base64",t,e.length-r)}function base64End(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed)return t+this.lastChar.toString("base64",0,3-this.lastNeed);return t}function simpleWrite(e){return e.toString(this.encoding)}function simpleEnd(e){return e&&e.length?this.write(e):""}},4062:e=>{e.exports=function hex(e){for(var t=0,r=0;t<e.length;r=e.charCodeAt(t++)+((r<<5)-r));var n=Math.floor(Math.abs(Math.sin(r)*1e4%1*16777216)).toString(16);return"#"+Array(6-n.length+1).join("0")+n}},3217:(e,t)=>{t.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9};t.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}},71:(e,t,r)=>{Object.defineProperty(t,"cli",{value:r(3217)});Object.defineProperty(t,"npm",{value:r(520)});Object.defineProperty(t,"syslog",{value:r(721)})},520:(e,t)=>{t.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6};t.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}},721:(e,t)=>{t.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7};t.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}},5206:(e,t,r)=>{Object.defineProperty(t,"LEVEL",{value:Symbol.for("level")});Object.defineProperty(t,"MESSAGE",{value:Symbol.for("message")});Object.defineProperty(t,"SPLAT",{value:Symbol.for("splat")});Object.defineProperty(t,"configs",{value:r(71)})},1174:(e,t,r)=>{e.exports=r(3837).deprecate},5741:(e,t,r)=>{const n=r(3837);const i=r(9821);const{LEVEL:s}=r(5206);const o=e.exports=function TransportStream(e={}){i.call(this,{objectMode:true,highWaterMark:e.highWaterMark});this.format=e.format;this.level=e.level;this.handleExceptions=e.handleExceptions;this.handleRejections=e.handleRejections;this.silent=e.silent;if(e.log)this.log=e.log;if(e.logv)this.logv=e.logv;if(e.close)this.close=e.close;this.once("pipe",(e=>{this.levels=e.levels;this.parent=e}));this.once("unpipe",(e=>{if(e===this.parent){this.parent=null;if(this.close){this.close()}}}))};n.inherits(o,i);o.prototype._write=function _write(e,t,r){if(this.silent||e.exception===true&&!this.handleExceptions){return r(null)}const n=this.level||this.parent&&this.parent.level;if(!n||this.levels[n]>=this.levels[e[s]]){if(e&&!this.format){return this.log(e,r)}let t;let n;try{n=this.format.transform(Object.assign({},e),this.format.options)}catch(e){t=e}if(t||!n){r();if(t)throw t;return}return this.log(n,r)}this._writableState.sync=false;return r(null)};o.prototype._writev=function _writev(e,t){if(this.logv){const r=e.filter(this._accept,this);if(!r.length){return t(null)}return this.logv(r,t)}for(let r=0;r<e.length;r++){if(!this._accept(e[r]))continue;if(e[r].chunk&&!this.format){this.log(e[r].chunk,e[r].callback);continue}let n;let i;try{i=this.format.transform(Object.assign({},e[r].chunk),this.format.options)}catch(e){n=e}if(n||!i){e[r].callback();if(n){t(null);throw n}}else{this.log(i,e[r].callback)}}return t(null)};o.prototype._accept=function _accept(e){const t=e.chunk;if(this.silent){return false}const r=this.level||this.parent&&this.parent.level;if(t.exception===true||!r||this.levels[r]>=this.levels[t[s]]){if(this.handleExceptions||t.exception!==true){return true}}return false};o.prototype._nop=function _nop(){return void undefined};e.exports.LegacyTransportStream=r(8011)},8011:(e,t,r)=>{const n=r(3837);const{LEVEL:i}=r(5206);const s=r(5741);const o=e.exports=function LegacyTransportStream(e={}){s.call(this,e);if(!e.transport||typeof e.transport.log!=="function"){throw new Error("Invalid transport, must be an object with a log method.")}this.transport=e.transport;this.level=this.level||e.transport.level;this.handleExceptions=this.handleExceptions||e.transport.handleExceptions;this._deprecated();function transportError(e){this.emit("error",e,this.transport)}if(!this.transport.__winstonError){this.transport.__winstonError=transportError.bind(this);this.transport.on("error",this.transport.__winstonError)}};n.inherits(o,s);o.prototype._write=function _write(e,t,r){if(this.silent||e.exception===true&&!this.handleExceptions){return r(null)}if(!this.level||this.levels[this.level]>=this.levels[e[i]]){this.transport.log(e[i],e.message,e,this._nop)}r(null)};o.prototype._writev=function _writev(e,t){for(let t=0;t<e.length;t++){if(this._accept(e[t])){this.transport.log(e[t].chunk[i],e[t].chunk.message,e[t].chunk,this._nop);e[t].callback()}}return t(null)};o.prototype._deprecated=function _deprecated(){console.error([`${this.transport.name} is a legacy winston transport. Consider upgrading: `,"- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join("\n"))};o.prototype.close=function close(){if(this.transport.close){this.transport.close()}if(this.transport.__winstonError){this.transport.removeListener("error",this.transport.__winstonError);this.transport.__winstonError=null}}},6540:(e,t,r)=>{const n=r(9207);const{warn:i}=r(408);const s=t;s.version=r(4228).i8;s.transports=r(7594);s.config=r(1364);s.addColors=n.levels;s.format=n.format;s.createLogger=r(348);s.ExceptionHandler=r(3012);s.RejectionHandler=r(8188);s.Container=r(4943);s.Transport=r(5741);s.loggers=new s.Container;const o=s.createLogger();Object.keys(s.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach((e=>s[e]=(...t)=>o[e](...t)));Object.defineProperty(s,"level",{get(){return o.level},set(e){o.level=e}});Object.defineProperty(s,"exceptions",{get(){return o.exceptions}});["exitOnError"].forEach((e=>{Object.defineProperty(s,e,{get(){return o[e]},set(t){o[e]=t}})}));Object.defineProperty(s,"default",{get(){return{exceptionHandlers:o.exceptionHandlers,rejectionHandlers:o.rejectionHandlers,transports:o.transports}}});i.deprecated(s,"setLevels");i.forFunctions(s,"useFormat",["cli"]);i.forProperties(s,"useFormat",["padLevels","stripColors"]);i.forFunctions(s,"deprecated",["addRewriter","addFilter","clone","extend"]);i.forProperties(s,"deprecated",["emitErrs","levelLength"]);i.moved(s,"createLogger","Logger")},408:(e,t,r)=>{const{format:n}=r(3837);t.warn={deprecated(e){return()=>{throw new Error(n("{ %s } was removed in winston@3.0.0.",e))}},useFormat(e){return()=>{throw new Error([n("{ %s } was removed in winston@3.0.0.",e),"Use a custom winston.format = winston.format(function) instead."].join("\n"))}},forFunctions(e,r,n){n.forEach((n=>{e[n]=t.warn[r](n)}))},moved(e,t,r){function movedNotice(){return()=>{throw new Error([n("winston.%s was moved in winston@3.0.0.",r),n("Use a winston.%s instead.",t)].join("\n"))}}Object.defineProperty(e,r,{get:movedNotice,set:movedNotice})},forProperties(e,r,n){n.forEach((n=>{const i=t.warn[r](n);Object.defineProperty(e,n,{get:i,set:i})}))}}},1364:(e,t,r)=>{const n=r(9207);const{configs:i}=r(5206);t.cli=n.levels(i.cli);t.npm=n.levels(i.npm);t.syslog=n.levels(i.syslog);t.addColors=n.levels},4943:(e,t,r)=>{const n=r(348);e.exports=class Container{constructor(e={}){this.loggers=new Map;this.options=e}add(e,t){if(!this.loggers.has(e)){t=Object.assign({},t||this.options);const r=t.transports||this.options.transports;t.transports=r?r.slice():[];const i=n(t);i.on("close",(()=>this._delete(e)));this.loggers.set(e,i)}return this.loggers.get(e)}get(e,t){return this.add(e,t)}has(e){return!!this.loggers.has(e)}close(e){if(e){return this._removeLogger(e)}this.loggers.forEach(((e,t)=>this._removeLogger(t)))}_removeLogger(e){if(!this.loggers.has(e)){return}const t=this.loggers.get(e);t.close();this._delete(e)}_delete(e){this.loggers.delete(e)}}},348:(e,t,r)=>{const{LEVEL:n}=r(5206);const i=r(1364);const s=r(3793);const o=r(1984)("winston:create-logger");function isLevelEnabledFunctionName(e){return"is"+e.charAt(0).toUpperCase()+e.slice(1)+"Enabled"}e.exports=function(e={}){e.levels=e.levels||i.npm.levels;class DerivedLogger extends s{constructor(e){super(e)}}const t=new DerivedLogger(e);Object.keys(e.levels).forEach((function(e){o('Define prototype method for "%s"',e);if(e==="log"){console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.');return}DerivedLogger.prototype[e]=function(...r){const i=this||t;if(r.length===1){const[s]=r;const o=s&&s.message&&s||{message:s};o.level=o[n]=e;i._addDefaultMeta(o);i.write(o);return this||t}if(r.length===0){i.log(e,"");return i}return i.log(e,...r)};DerivedLogger.prototype[isLevelEnabledFunctionName(e)]=function(){return(this||t).isLevelEnabled(e)}}));return t}},3012:(e,t,r)=>{const n=r(2037);const i=r(6985);const s=r(1984)("winston:exception");const o=r(5956);const a=r(6962);const l=r(7876);e.exports=class ExceptionHandler{constructor(e){if(!e){throw new Error("Logger is required to handle exceptions")}this.logger=e;this.handlers=new Map}handle(...e){e.forEach((e=>{if(Array.isArray(e)){return e.forEach((e=>this._addHandler(e)))}this._addHandler(e)}));if(!this.catcher){this.catcher=this._uncaughtException.bind(this);process.on("uncaughtException",this.catcher)}}unhandle(){if(this.catcher){process.removeListener("uncaughtException",this.catcher);this.catcher=false;Array.from(this.handlers.values()).forEach((e=>this.logger.unpipe(e)))}}getAllInfo(e){let{message:t}=e;if(!t&&typeof e==="string"){t=e}return{error:e,level:"error",message:[`uncaughtException: ${t||"(no error message)"}`,e.stack||"  No stack trace"].join("\n"),stack:e.stack,exception:true,date:(new Date).toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:n.loadavg(),uptime:n.uptime()}}getTrace(e){const t=e?a.parse(e):a.get();return t.map((e=>({column:e.getColumnNumber(),file:e.getFileName(),function:e.getFunctionName(),line:e.getLineNumber(),method:e.getMethodName(),native:e.isNative()})))}_addHandler(e){if(!this.handlers.has(e)){e.handleExceptions=true;const t=new l(e);this.handlers.set(e,t);this.logger.pipe(t)}}_uncaughtException(e){const t=this.getAllInfo(e);const r=this._getExceptionHandlers();let n=typeof this.logger.exitOnError==="function"?this.logger.exitOnError(e):this.logger.exitOnError;let a;if(!r.length&&n){console.warn("winston: exitOnError cannot be true with no exception handlers.");console.warn("winston: not exiting process.");n=false}function gracefulExit(){s("doExit",n);s("process._exiting",process._exiting);if(n&&!process._exiting){if(a){clearTimeout(a)}process.exit(1)}}if(!r||r.length===0){return process.nextTick(gracefulExit)}i(r,((e,t)=>{const r=o(t);const n=e.transport||e;function onDone(e){return()=>{s(e);r()}}n._ending=true;n.once("finish",onDone("finished"));n.once("error",onDone("error"))}),(()=>n&&gracefulExit()));this.logger.log(t);if(n){a=setTimeout(gracefulExit,3e3)}}_getExceptionHandlers(){return this.logger.transports.filter((e=>{const t=e.transport||e;return t.handleExceptions}))}}},7876:(e,t,r)=>{const{Writable:n}=r(3022);e.exports=class ExceptionStream extends n{constructor(e){super({objectMode:true});if(!e){throw new Error("ExceptionStream requires a TransportStream instance.")}this.handleExceptions=true;this.transport=e}_write(e,t,r){if(e.exception){return this.transport.log(e,r)}r();return true}}},3793:(e,t,r)=>{const{Stream:n,Transform:i}=r(3022);const s=r(6985);const{LEVEL:o,SPLAT:a}=r(5206);const l=r(2325);const u=r(3012);const c=r(8188);const f=r(8011);const h=r(8686);const{warn:d}=r(408);const p=r(1364);const g=/%[scdjifoO%]/g;class Logger extends i{constructor(e){super({objectMode:true});this.configure(e)}child(e){const t=this;return Object.create(t,{write:{value:function(r){const n=Object.assign({},e,r);if(r instanceof Error){n.stack=r.stack;n.message=r.message}t.write(n)}}})}configure({silent:e,format:t,defaultMeta:n,levels:i,level:s="info",exitOnError:o=true,transports:a,colors:l,emitErrs:f,formatters:h,padLevels:d,rewriters:g,stripColors:b,exceptionHandlers:y,rejectionHandlers:v}={}){if(this.transports.length){this.clear()}this.silent=e;this.format=t||this.format||r(3991)();this.defaultMeta=n||null;this.levels=i||this.levels||p.npm.levels;this.level=s;this.exceptions=new u(this);this.rejections=new c(this);this.profilers={};this.exitOnError=o;if(a){a=Array.isArray(a)?a:[a];a.forEach((e=>this.add(e)))}if(l||f||h||d||g||b){throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join("\n"))}if(y){this.exceptions.handle(y)}if(v){this.rejections.handle(v)}}isLevelEnabled(e){const t=getLevelValue(this.levels,e);if(t===null){return false}const r=getLevelValue(this.levels,this.level);if(r===null){return false}if(!this.transports||this.transports.length===0){return r>=t}const n=this.transports.findIndex((e=>{let n=getLevelValue(this.levels,e.level);if(n===null){n=r}return n>=t}));return n!==-1}log(e,t,...r){if(arguments.length===1){e[o]=e.level;this._addDefaultMeta(e);this.write(e);return this}if(arguments.length===2){if(t&&typeof t==="object"){t[o]=t.level=e;this._addDefaultMeta(t);this.write(t);return this}this.write({[o]:e,level:e,message:t});return this}const[n]=r;if(typeof n==="object"&&n!==null){const i=t&&t.match&&t.match(g);if(!i){const i=Object.assign({},this.defaultMeta,n,{[o]:e,[a]:r,level:e,message:t});if(n.message)i.message=`${i.message} ${n.message}`;if(n.stack)i.stack=n.stack;this.write(i);return this}}this.write(Object.assign({},this.defaultMeta,{[o]:e,[a]:r,level:e,message:t}));return this}_transform(e,t,r){if(this.silent){return r()}if(!e[o]){e[o]=e.level}if(!this.levels[e[o]]&&this.levels[e[o]]!==0){console.error("[winston] Unknown logger level: %s",e[o])}if(!this._readableState.pipes){console.error("[winston] Attempt to write logs with no transports %j",e)}try{this.push(this.format.transform(e,this.format.options))}catch(e){throw e}finally{r()}}_final(e){const t=this.transports.slice();s(t,((e,t)=>{if(!e||e.finished)return setImmediate(t);e.once("finish",t);e.end()}),e)}add(e){const t=!l(e)||e.log.length>2?new f({transport:e}):e;if(!t._writableState||!t._writableState.objectMode){throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.")}this._onEvent("error",t);this._onEvent("warn",t);this.pipe(t);if(e.handleExceptions){this.exceptions.handle()}if(e.handleRejections){this.rejections.handle()}return this}remove(e){if(!e)return this;let t=e;if(!l(e)||e.log.length>2){t=this.transports.filter((t=>t.transport===e))[0]}if(t){this.unpipe(t)}return this}clear(){this.unpipe();return this}close(){this.clear();this.emit("close");return this}setLevels(){d.deprecated("setLevels")}query(e,t){if(typeof e==="function"){t=e;e={}}e=e||{};const r={};const n=Object.assign({},e.query||{});function queryTransport(t,r){if(e.query&&typeof t.formatQuery==="function"){e.query=t.formatQuery(n)}t.query(e,((n,i)=>{if(n){return r(n)}if(typeof t.formatResults==="function"){i=t.formatResults(i,e.format)}r(null,i)}))}function addResults(e,t){queryTransport(e,((n,i)=>{if(t){i=n||i;if(i){r[e.name]=i}t()}t=null}))}s(this.transports.filter((e=>!!e.query)),addResults,(()=>t(null,r)))}stream(e={}){const t=new n;const r=[];t._streams=r;t.destroy=()=>{let e=r.length;while(e--){r[e].destroy()}};this.transports.filter((e=>!!e.stream)).forEach((n=>{const i=n.stream(e);if(!i){return}r.push(i);i.on("log",(e=>{e.transport=e.transport||[];e.transport.push(n.name);t.emit("log",e)}));i.on("error",(e=>{e.transport=e.transport||[];e.transport.push(n.name);t.emit("error",e)}))}));return t}startTimer(){return new h(this)}profile(e,...t){const r=Date.now();if(this.profilers[e]){const n=this.profilers[e];delete this.profilers[e];if(typeof t[t.length-2]==="function"){console.warn("Callback function no longer supported as of winston@3.0.0");t.pop()}const i=typeof t[t.length-1]==="object"?t.pop():{};i.level=i.level||"info";i.durationMs=r-n;i.message=i.message||e;return this.write(i)}this.profilers[e]=r;return this}handleExceptions(...e){console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()");this.exceptions.handle(...e)}unhandleExceptions(...e){console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()");this.exceptions.unhandle(...e)}cli(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join("\n"))}_onEvent(e,t){function transportEvent(r){if(e==="error"&&!this.transports.includes(t)){this.add(t)}this.emit(e,r,t)}if(!t["__winston"+e]){t["__winston"+e]=transportEvent.bind(this);t.on(e,t["__winston"+e])}}_addDefaultMeta(e){if(this.defaultMeta){Object.assign(e,this.defaultMeta)}}}function getLevelValue(e,t){const r=e[t];if(!r&&r!==0){return null}return r}Object.defineProperty(Logger.prototype,"transports",{configurable:false,enumerable:true,get(){const{pipes:e}=this._readableState;return!Array.isArray(e)?[e].filter(Boolean):e}});e.exports=Logger},8686:e=>{e.exports=class Profiler{constructor(e){if(!e){throw new Error("Logger is required for profiling.")}this.logger=e;this.start=Date.now()}done(...e){if(typeof e[e.length-1]==="function"){console.warn("Callback function no longer supported as of winston@3.0.0");e.pop()}const t=typeof e[e.length-1]==="object"?e.pop():{};t.level=t.level||"info";t.durationMs=Date.now()-this.start;return this.logger.write(t)}}},8188:(e,t,r)=>{const n=r(2037);const i=r(6985);const s=r(1984)("winston:rejection");const o=r(5956);const a=r(6962);const l=r(7876);e.exports=class RejectionHandler{constructor(e){if(!e){throw new Error("Logger is required to handle rejections")}this.logger=e;this.handlers=new Map}handle(...e){e.forEach((e=>{if(Array.isArray(e)){return e.forEach((e=>this._addHandler(e)))}this._addHandler(e)}));if(!this.catcher){this.catcher=this._unhandledRejection.bind(this);process.on("unhandledRejection",this.catcher)}}unhandle(){if(this.catcher){process.removeListener("unhandledRejection",this.catcher);this.catcher=false;Array.from(this.handlers.values()).forEach((e=>this.logger.unpipe(e)))}}getAllInfo(e){let{message:t}=e;if(!t&&typeof e==="string"){t=e}return{error:e,level:"error",message:[`unhandledRejection: ${t||"(no error message)"}`,e.stack||"  No stack trace"].join("\n"),stack:e.stack,exception:true,date:(new Date).toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:n.loadavg(),uptime:n.uptime()}}getTrace(e){const t=e?a.parse(e):a.get();return t.map((e=>({column:e.getColumnNumber(),file:e.getFileName(),function:e.getFunctionName(),line:e.getLineNumber(),method:e.getMethodName(),native:e.isNative()})))}_addHandler(e){if(!this.handlers.has(e)){e.handleRejections=true;const t=new l(e);this.handlers.set(e,t);this.logger.pipe(t)}}_unhandledRejection(e){const t=this.getAllInfo(e);const r=this._getRejectionHandlers();let n=typeof this.logger.exitOnError==="function"?this.logger.exitOnError(e):this.logger.exitOnError;let a;if(!r.length&&n){console.warn("winston: exitOnError cannot be true with no rejection handlers.");console.warn("winston: not exiting process.");n=false}function gracefulExit(){s("doExit",n);s("process._exiting",process._exiting);if(n&&!process._exiting){if(a){clearTimeout(a)}process.exit(1)}}if(!r||r.length===0){return process.nextTick(gracefulExit)}i(r,((e,t)=>{const r=o(t);const n=e.transport||e;function onDone(e){return()=>{s(e);r()}}n._ending=true;n.once("finish",onDone("finished"));n.once("error",onDone("error"))}),(()=>n&&gracefulExit()));this.logger.log(t);if(n){a=setTimeout(gracefulExit,3e3)}}_getRejectionHandlers(){return this.logger.transports.filter((e=>{const t=e.transport||e;return t.handleRejections}))}}},804:(e,t,r)=>{const n=r(7147);const{StringDecoder:i}=r(1576);const{Stream:s}=r(3022);function noop(){}e.exports=(e,t)=>{const r=Buffer.alloc(64*1024);const o=new i("utf8");const a=new s;let l="";let u=0;let c=0;if(e.start===-1){delete e.start}a.readable=true;a.destroy=()=>{a.destroyed=true;a.emit("end");a.emit("close")};n.open(e.file,"a+","0644",((i,s)=>{if(i){if(!t){a.emit("error",i)}else{t(i)}a.destroy();return}(function read(){if(a.destroyed){n.close(s,noop);return}return n.read(s,r,0,r.length,u,((n,i)=>{if(n){if(!t){a.emit("error",n)}else{t(n)}a.destroy();return}if(!i){if(l){if(e.start==null||c>e.start){if(!t){a.emit("line",l)}else{t(null,l)}}c++;l=""}return setTimeout(read,1e3)}let s=o.write(r.slice(0,i));if(!t){a.emit("data",s)}s=(l+s).split(/\n+/);const f=s.length-1;let h=0;for(;h<f;h++){if(e.start==null||c>e.start){if(!t){a.emit("line",s[h])}else{t(null,s[h])}}c++}l=s[f];u+=i;return read()}))})()}));if(!t){return a}return a.destroy}},2799:(e,t,r)=>{const n=r(2037);const{LEVEL:i,MESSAGE:s}=r(5206);const o=r(5741);e.exports=class Console extends o{constructor(e={}){super(e);this.name=e.name||"console";this.stderrLevels=this._stringArrayToSet(e.stderrLevels);this.consoleWarnLevels=this._stringArrayToSet(e.consoleWarnLevels);this.eol=e.eol||n.EOL;this.setMaxListeners(30)}log(e,t){setImmediate((()=>this.emit("logged",e)));if(this.stderrLevels[e[i]]){if(console._stderr){console._stderr.write(`${e[s]}${this.eol}`)}else{console.error(e[s])}if(t){t()}return}else if(this.consoleWarnLevels[e[i]]){if(console._stderr){console._stderr.write(`${e[s]}${this.eol}`)}else{console.warn(e[s])}if(t){t()}return}if(console._stdout){console._stdout.write(`${e[s]}${this.eol}`)}else{console.log(e[s])}if(t){t()}}_stringArrayToSet(e,t){if(!e)return{};t=t||"Cannot make set from type other than Array of string elements";if(!Array.isArray(e)){throw new Error(t)}return e.reduce(((e,r)=>{if(typeof r!=="string"){throw new Error(t)}e[r]=true;return e}),{})}}},7463:(e,t,r)=>{const n=r(7147);const i=r(1017);const s=r(9676);const o=r(9796);const{MESSAGE:a}=r(5206);const{Stream:l,PassThrough:u}=r(3022);const c=r(5741);const f=r(1984)("winston:file");const h=r(2037);const d=r(804);e.exports=class File extends c{constructor(e={}){super(e);this.name=e.name||"file";function throwIf(t,...r){r.slice(1).forEach((r=>{if(e[r]){throw new Error(`Cannot set ${r} and ${t} together`)}}))}this._stream=new u;this._stream.setMaxListeners(30);this._onError=this._onError.bind(this);if(e.filename||e.dirname){throwIf("filename or dirname","stream");this._basename=this.filename=e.filename?i.basename(e.filename):"winston.log";this.dirname=e.dirname||i.dirname(e.filename);this.options=e.options||{flags:"a"}}else if(e.stream){console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream");throwIf("stream","filename","maxsize");this._dest=this._stream.pipe(this._setupStream(e.stream));this.dirname=i.dirname(this._dest.path)}else{throw new Error("Cannot log to file without filename or stream.")}this.maxsize=e.maxsize||null;this.rotationFormat=e.rotationFormat||false;this.zippedArchive=e.zippedArchive||false;this.maxFiles=e.maxFiles||null;this.eol=e.eol||h.EOL;this.tailable=e.tailable||false;this._size=0;this._pendingSize=0;this._created=0;this._drain=false;this._opening=false;this._ending=false;if(this.dirname)this._createLogDirIfNotExist(this.dirname);this.open()}finishIfEnding(){if(this._ending){if(this._opening){this.once("open",(()=>{this._stream.once("finish",(()=>this.emit("finish")));setImmediate((()=>this._stream.end()))}))}else{this._stream.once("finish",(()=>this.emit("finish")));setImmediate((()=>this._stream.end()))}}}log(e,t=(()=>{})){if(this.silent){t();return true}if(this._drain){this._stream.once("drain",(()=>{this._drain=false;this.log(e,t)}));return}if(this._rotate){this._stream.once("rotate",(()=>{this._rotate=false;this.log(e,t)}));return}const r=`${e[a]}${this.eol}`;const n=Buffer.byteLength(r);function logged(){this._size+=n;this._pendingSize-=n;f("logged %s %s",this._size,r);this.emit("logged",e);if(this._opening){return}if(!this._needsNewFile()){return}this._rotate=true;this._endStream((()=>this._rotateFile()))}this._pendingSize+=n;if(this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)){this.rotatedWhileOpening=true}const i=this._stream.write(r,logged.bind(this));if(!i){this._drain=true;this._stream.once("drain",(()=>{this._drain=false;t()}))}else{t()}f("written",i,this._drain);this.finishIfEnding();return i}query(e,t){if(typeof e==="function"){t=e;e={}}e=normalizeQuery(e);const r=i.join(this.dirname,this.filename);let s="";let o=[];let a=0;const l=n.createReadStream(r,{encoding:"utf8"});l.on("error",(e=>{if(l.readable){l.destroy()}if(!t){return}return e.code!=="ENOENT"?t(e):t(null,o)}));l.on("data",(t=>{t=(s+t).split(/\n+/);const r=t.length-1;let n=0;for(;n<r;n++){if(!e.start||a>=e.start){add(t[n])}a++}s=t[r]}));l.on("close",(()=>{if(s){add(s,true)}if(e.order==="desc"){o=o.reverse()}if(t)t(null,o)}));function add(e,t){try{const t=JSON.parse(e);if(check(t)){push(t)}}catch(e){if(!t){l.emit("error",e)}}}function push(t){if(e.rows&&o.length>=e.rows&&e.order!=="desc"){if(l.readable){l.destroy()}return}if(e.fields){t=e.fields.reduce(((e,r)=>{e[r]=t[r];return e}),{})}if(e.order==="desc"){if(o.length>=e.rows){o.shift()}}o.push(t)}function check(t){if(!t){return}if(typeof t!=="object"){return}const r=new Date(t.timestamp);if(e.from&&r<e.from||e.until&&r>e.until||e.level&&e.level!==t.level){return}return true}function normalizeQuery(e){e=e||{};e.rows=e.rows||e.limit||10;e.start=e.start||0;e.until=e.until||new Date;if(typeof e.until!=="object"){e.until=new Date(e.until)}e.from=e.from||e.until-24*60*60*1e3;if(typeof e.from!=="object"){e.from=new Date(e.from)}e.order=e.order||"desc";return e}}stream(e={}){const t=i.join(this.dirname,this.filename);const r=new l;const n={file:t,start:e.start};r.destroy=d(n,((e,t)=>{if(e){return r.emit("error",e)}try{r.emit("data",t);t=JSON.parse(t);r.emit("log",t)}catch(e){r.emit("error",e)}}));return r}open(){if(!this.filename)return;if(this._opening)return;this._opening=true;this.stat(((e,t)=>{if(e){return this.emit("error",e)}f("stat done: %s { size: %s }",this.filename,t);this._size=t;this._dest=this._createStream(this._stream);this._opening=false;this.once("open",(()=>{if(this._stream.eventNames().includes("rotate")){this._stream.emit("rotate")}else{this._rotate=false}}))}))}stat(e){const t=this._getFile();const r=i.join(this.dirname,t);n.stat(r,((n,i)=>{if(n&&n.code==="ENOENT"){f("ENOENT¬†ok",r);this.filename=t;return e(null,0)}if(n){f(`err ${n.code} ${r}`);return e(n)}if(!i||this._needsNewFile(i.size)){return this._incFile((()=>this.stat(e)))}this.filename=t;e(null,i.size)}))}close(e){if(!this._stream){return}this._stream.end((()=>{if(e){e()}this.emit("flush");this.emit("closed")}))}_needsNewFile(e){e=e||this._size;return this.maxsize&&e>=this.maxsize}_onError(e){this.emit("error",e)}_setupStream(e){e.on("error",this._onError);return e}_cleanupStream(e){e.removeListener("error",this._onError);return e}_rotateFile(){this._incFile((()=>this.open()))}_endStream(e=(()=>{})){if(this._dest){this._stream.unpipe(this._dest);this._dest.end((()=>{this._cleanupStream(this._dest);e()}))}else{e()}}_createStream(e){const t=i.join(this.dirname,this.filename);f("create stream start",t,this.options);const r=n.createWriteStream(t,this.options).on("error",(e=>f(e))).on("close",(()=>f("close",r.path,r.bytesWritten))).on("open",(()=>{f("file open ok",t);this.emit("open",t);e.pipe(r);if(this.rotatedWhileOpening){this._stream=new u;this._stream.setMaxListeners(30);this._rotateFile();this.rotatedWhileOpening=false;this._cleanupStream(r);e.end()}}));f("create stream ok",t);if(this.zippedArchive){const e=o.createGzip();e.pipe(r);return e}return r}_incFile(e){f("_incFile",this.filename);const t=i.extname(this._basename);const r=i.basename(this._basename,t);if(!this.tailable){this._created+=1;this._checkMaxFilesIncrementing(t,r,e)}else{this._checkMaxFilesTailable(t,r,e)}}_getFile(){const e=i.extname(this._basename);const t=i.basename(this._basename,e);const r=this.rotationFormat?this.rotationFormat():this._created;const n=!this.tailable&&this._created?`${t}${r}${e}`:`${t}${e}`;return this.zippedArchive&&!this.tailable?`${n}.gz`:n}_checkMaxFilesIncrementing(e,t,r){if(!this.maxFiles||this._created<this.maxFiles){return setImmediate(r)}const s=this._created-this.maxFiles;const o=s!==0?s:"";const a=this.zippedArchive?".gz":"";const l=`${t}${o}${e}${a}`;const u=i.join(this.dirname,l);n.unlink(u,r)}_checkMaxFilesTailable(e,t,r){const o=[];if(!this.maxFiles){return}const a=this.zippedArchive?".gz":"";for(let r=this.maxFiles-1;r>1;r--){o.push(function(r,s){let o=`${t}${r-1}${e}${a}`;const l=i.join(this.dirname,o);n.exists(l,(u=>{if(!u){return s(null)}o=`${t}${r}${e}${a}`;n.rename(l,i.join(this.dirname,o),s)}))}.bind(this,r))}s(o,(()=>{n.rename(i.join(this.dirname,`${t}${e}`),i.join(this.dirname,`${t}1${e}${a}`),r)}))}_createLogDirIfNotExist(e){if(!n.existsSync(e)){n.mkdirSync(e,{recursive:true})}}}},3618:(e,t,r)=>{const n=r(3685);const i=r(5687);const{Stream:s}=r(3022);const o=r(5741);e.exports=class Http extends o{constructor(e={}){super(e);this.options=e;this.name=e.name||"http";this.ssl=!!e.ssl;this.host=e.host||"localhost";this.port=e.port;this.auth=e.auth;this.path=e.path||"";this.agent=e.agent;this.headers=e.headers||{};this.headers["content-type"]="application/json";if(!this.port){this.port=this.ssl?443:80}}log(e,t){this._request(e,((t,r)=>{if(r&&r.statusCode!==200){t=new Error(`Invalid HTTP Status Code: ${r.statusCode}`)}if(t){this.emit("warn",t)}else{this.emit("logged",e)}}));if(t){setImmediate(t)}}query(e,t){if(typeof e==="function"){t=e;e={}}e={method:"query",params:this.normalizeQuery(e)};if(e.params.path){e.path=e.params.path;delete e.params.path}if(e.params.auth){e.auth=e.params.auth;delete e.params.auth}this._request(e,((e,r,n)=>{if(r&&r.statusCode!==200){e=new Error(`Invalid HTTP Status Code: ${r.statusCode}`)}if(e){return t(e)}if(typeof n==="string"){try{n=JSON.parse(n)}catch(e){return t(e)}}t(null,n)}))}stream(e={}){const t=new s;e={method:"stream",params:e};if(e.params.path){e.path=e.params.path;delete e.params.path}if(e.params.auth){e.auth=e.params.auth;delete e.params.auth}let r="";const n=this._request(e);t.destroy=()=>n.destroy();n.on("data",(e=>{e=(r+e).split(/\n+/);const n=e.length-1;let i=0;for(;i<n;i++){try{t.emit("log",JSON.parse(e[i]))}catch(e){t.emit("error",e)}}r=e[n]}));n.on("error",(e=>t.emit("error",e)));return t}_request(e,t){e=e||{};const r=e.auth||this.auth;const s=e.path||this.path||"";delete e.auth;delete e.path;const o=Object.assign({},this.headers);if(r&&r.bearer){o.Authorization=`Bearer ${r.bearer}`}const a=(this.ssl?i:n).request({...this.options,method:"POST",host:this.host,port:this.port,path:`/${s.replace(/^\//,"")}`,headers:o,auth:r&&r.username&&r.password?`${r.username}:${r.password}`:"",agent:this.agent});a.on("error",t);a.on("response",(e=>e.on("end",(()=>t(null,e))).resume()));a.end(Buffer.from(JSON.stringify(e),"utf8"))}}},7594:(e,t,r)=>{Object.defineProperty(t,"Console",{configurable:true,enumerable:true,get(){return r(2799)}});Object.defineProperty(t,"File",{configurable:true,enumerable:true,get(){return r(7463)}});Object.defineProperty(t,"Http",{configurable:true,enumerable:true,get(){return r(3618)}});Object.defineProperty(t,"Stream",{configurable:true,enumerable:true,get(){return r(9343)}})},9343:(e,t,r)=>{const n=r(2325);const{MESSAGE:i}=r(5206);const s=r(2037);const o=r(5741);e.exports=class Stream extends o{constructor(e={}){super(e);if(!e.stream||!n(e.stream)){throw new Error("options.stream is required.")}this._stream=e.stream;this._stream.setMaxListeners(Infinity);this.isObjectMode=e.stream._writableState.objectMode;this.eol=e.eol||s.EOL}log(e,t){setImmediate((()=>this.emit("logged",e)));if(this.isObjectMode){this._stream.write(e);if(t){t()}return}this._stream.write(`${e[i]}${this.eol}`);if(t){t()}return}}},5990:(e,t,r)=>{const{EMPTY_BUFFER:n}=r(5328);const i=Buffer[Symbol.species];function concat(e,t){if(e.length===0)return n;if(e.length===1)return e[0];const r=Buffer.allocUnsafe(t);let s=0;for(let t=0;t<e.length;t++){const n=e[t];r.set(n,s);s+=n.length}if(s<t){return new i(r.buffer,r.byteOffset,s)}return r}function _mask(e,t,r,n,i){for(let s=0;s<i;s++){r[n+s]=e[s]^t[s&3]}}function _unmask(e,t){for(let r=0;r<e.length;r++){e[r]^=t[r&3]}}function toArrayBuffer(e){if(e.length===e.buffer.byteLength){return e.buffer}return e.buffer.slice(e.byteOffset,e.byteOffset+e.length)}function toBuffer(e){toBuffer.readOnly=true;if(Buffer.isBuffer(e))return e;let t;if(e instanceof ArrayBuffer){t=new i(e)}else if(ArrayBuffer.isView(e)){t=new i(e.buffer,e.byteOffset,e.byteLength)}else{t=Buffer.from(e);toBuffer.readOnly=false}return t}e.exports={concat:concat,mask:_mask,toArrayBuffer:toArrayBuffer,toBuffer:toBuffer,unmask:_unmask};if(!process.env.WS_NO_BUFFER_UTIL){try{const t=r(8921);e.exports.mask=function(e,r,n,i,s){if(s<48)_mask(e,r,n,i,s);else t.mask(e,r,n,i,s)};e.exports.unmask=function(e,r){if(e.length<32)_unmask(e,r);else t.unmask(e,r)}}catch(e){}}},5328:e=>{e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},2427:(e,t,r)=>{const{kForOnEventAttribute:n,kListener:i}=r(5328);const s=Symbol("kCode");const o=Symbol("kData");const a=Symbol("kError");const l=Symbol("kMessage");const u=Symbol("kReason");const c=Symbol("kTarget");const f=Symbol("kType");const h=Symbol("kWasClean");class Event{constructor(e){this[c]=null;this[f]=e}get target(){return this[c]}get type(){return this[f]}}Object.defineProperty(Event.prototype,"target",{enumerable:true});Object.defineProperty(Event.prototype,"type",{enumerable:true});class CloseEvent extends Event{constructor(e,t={}){super(e);this[s]=t.code===undefined?0:t.code;this[u]=t.reason===undefined?"":t.reason;this[h]=t.wasClean===undefined?false:t.wasClean}get code(){return this[s]}get reason(){return this[u]}get wasClean(){return this[h]}}Object.defineProperty(CloseEvent.prototype,"code",{enumerable:true});Object.defineProperty(CloseEvent.prototype,"reason",{enumerable:true});Object.defineProperty(CloseEvent.prototype,"wasClean",{enumerable:true});class ErrorEvent extends Event{constructor(e,t={}){super(e);this[a]=t.error===undefined?null:t.error;this[l]=t.message===undefined?"":t.message}get error(){return this[a]}get message(){return this[l]}}Object.defineProperty(ErrorEvent.prototype,"error",{enumerable:true});Object.defineProperty(ErrorEvent.prototype,"message",{enumerable:true});class MessageEvent extends Event{constructor(e,t={}){super(e);this[o]=t.data===undefined?null:t.data}get data(){return this[o]}}Object.defineProperty(MessageEvent.prototype,"data",{enumerable:true});const d={addEventListener(e,t,r={}){for(const s of this.listeners(e)){if(!r[n]&&s[i]===t&&!s[n]){return}}let s;if(e==="message"){s=function onMessage(e,r){const n=new MessageEvent("message",{data:r?e:e.toString()});n[c]=this;callListener(t,this,n)}}else if(e==="close"){s=function onClose(e,r){const n=new CloseEvent("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});n[c]=this;callListener(t,this,n)}}else if(e==="error"){s=function onError(e){const r=new ErrorEvent("error",{error:e,message:e.message});r[c]=this;callListener(t,this,r)}}else if(e==="open"){s=function onOpen(){const e=new Event("open");e[c]=this;callListener(t,this,e)}}else{return}s[n]=!!r[n];s[i]=t;if(r.once){this.once(e,s)}else{this.on(e,s)}},removeEventListener(e,t){for(const r of this.listeners(e)){if(r[i]===t&&!r[n]){this.removeListener(e,r);break}}}};e.exports={CloseEvent:CloseEvent,ErrorEvent:ErrorEvent,Event:Event,EventTarget:d,MessageEvent:MessageEvent};function callListener(e,t,r){if(typeof e==="object"&&e.handleEvent){e.handleEvent.call(e,r)}else{e.call(t,r)}}},6479:(e,t,r)=>{const{tokenChars:n}=r(11);function push(e,t,r){if(e[t]===undefined)e[t]=[r];else e[t].push(r)}function parse(e){const t=Object.create(null);let r=Object.create(null);let i=false;let s=false;let o=false;let a;let l;let u=-1;let c=-1;let f=-1;let h=0;for(;h<e.length;h++){c=e.charCodeAt(h);if(a===undefined){if(f===-1&&n[c]===1){if(u===-1)u=h}else if(h!==0&&(c===32||c===9)){if(f===-1&&u!==-1)f=h}else if(c===59||c===44){if(u===-1){throw new SyntaxError(`Unexpected character at index ${h}`)}if(f===-1)f=h;const n=e.slice(u,f);if(c===44){push(t,n,r);r=Object.create(null)}else{a=n}u=f=-1}else{throw new SyntaxError(`Unexpected character at index ${h}`)}}else if(l===undefined){if(f===-1&&n[c]===1){if(u===-1)u=h}else if(c===32||c===9){if(f===-1&&u!==-1)f=h}else if(c===59||c===44){if(u===-1){throw new SyntaxError(`Unexpected character at index ${h}`)}if(f===-1)f=h;push(r,e.slice(u,f),true);if(c===44){push(t,a,r);r=Object.create(null);a=undefined}u=f=-1}else if(c===61&&u!==-1&&f===-1){l=e.slice(u,h);u=f=-1}else{throw new SyntaxError(`Unexpected character at index ${h}`)}}else{if(s){if(n[c]!==1){throw new SyntaxError(`Unexpected character at index ${h}`)}if(u===-1)u=h;else if(!i)i=true;s=false}else if(o){if(n[c]===1){if(u===-1)u=h}else if(c===34&&u!==-1){o=false;f=h}else if(c===92){s=true}else{throw new SyntaxError(`Unexpected character at index ${h}`)}}else if(c===34&&e.charCodeAt(h-1)===61){o=true}else if(f===-1&&n[c]===1){if(u===-1)u=h}else if(u!==-1&&(c===32||c===9)){if(f===-1)f=h}else if(c===59||c===44){if(u===-1){throw new SyntaxError(`Unexpected character at index ${h}`)}if(f===-1)f=h;let n=e.slice(u,f);if(i){n=n.replace(/\\/g,"");i=false}push(r,l,n);if(c===44){push(t,a,r);r=Object.create(null);a=undefined}l=undefined;u=f=-1}else{throw new SyntaxError(`Unexpected character at index ${h}`)}}}if(u===-1||o||c===32||c===9){throw new SyntaxError("Unexpected end of input")}if(f===-1)f=h;const d=e.slice(u,f);if(a===undefined){push(t,d,r)}else{if(l===undefined){push(r,d,true)}else if(i){push(r,l,d.replace(/\\/g,""))}else{push(r,l,d)}push(t,a,r)}return t}function format(e){return Object.keys(e).map((t=>{let r=e[t];if(!Array.isArray(r))r=[r];return r.map((e=>[t].concat(Object.keys(e).map((t=>{let r=e[t];if(!Array.isArray(r))r=[r];return r.map((e=>e===true?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")}e.exports={format:format,parse:parse}},6734:e=>{const t=Symbol("kDone");const r=Symbol("kRun");class Limiter{constructor(e){this[t]=()=>{this.pending--;this[r]()};this.concurrency=e||Infinity;this.jobs=[];this.pending=0}add(e){this.jobs.push(e);this[r]()}[r](){if(this.pending===this.concurrency)return;if(this.jobs.length){const e=this.jobs.shift();this.pending++;e(this[t])}}}e.exports=Limiter},4851:(e,t,r)=>{const n=r(9796);const i=r(5990);const s=r(6734);const{kStatusCode:o}=r(5328);const a=Buffer[Symbol.species];const l=Buffer.from([0,0,255,255]);const u=Symbol("permessage-deflate");const c=Symbol("total-length");const f=Symbol("callback");const h=Symbol("buffers");const d=Symbol("error");let p;class PerMessageDeflate{constructor(e,t,r){this._maxPayload=r|0;this._options=e||{};this._threshold=this._options.threshold!==undefined?this._options.threshold:1024;this._isServer=!!t;this._deflate=null;this._inflate=null;this.params=null;if(!p){const e=this._options.concurrencyLimit!==undefined?this._options.concurrencyLimit:10;p=new s(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};if(this._options.serverNoContextTakeover){e.server_no_context_takeover=true}if(this._options.clientNoContextTakeover){e.client_no_context_takeover=true}if(this._options.serverMaxWindowBits){e.server_max_window_bits=this._options.serverMaxWindowBits}if(this._options.clientMaxWindowBits){e.client_max_window_bits=this._options.clientMaxWindowBits}else if(this._options.clientMaxWindowBits==null){e.client_max_window_bits=true}return e}accept(e){e=this.normalizeParams(e);this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e);return this.params}cleanup(){if(this._inflate){this._inflate.close();this._inflate=null}if(this._deflate){const e=this._deflate[f];this._deflate.close();this._deflate=null;if(e){e(new Error("The deflate stream was closed while data was being processed"))}}}acceptAsServer(e){const t=this._options;const r=e.find((e=>{if(t.serverNoContextTakeover===false&&e.server_no_context_takeover||e.server_max_window_bits&&(t.serverMaxWindowBits===false||typeof t.serverMaxWindowBits==="number"&&t.serverMaxWindowBits>e.server_max_window_bits)||typeof t.clientMaxWindowBits==="number"&&!e.client_max_window_bits){return false}return true}));if(!r){throw new Error("None of the extension offers can be accepted")}if(t.serverNoContextTakeover){r.server_no_context_takeover=true}if(t.clientNoContextTakeover){r.client_no_context_takeover=true}if(typeof t.serverMaxWindowBits==="number"){r.server_max_window_bits=t.serverMaxWindowBits}if(typeof t.clientMaxWindowBits==="number"){r.client_max_window_bits=t.clientMaxWindowBits}else if(r.client_max_window_bits===true||t.clientMaxWindowBits===false){delete r.client_max_window_bits}return r}acceptAsClient(e){const t=e[0];if(this._options.clientNoContextTakeover===false&&t.client_no_context_takeover){throw new Error('Unexpected parameter "client_no_context_takeover"')}if(!t.client_max_window_bits){if(typeof this._options.clientMaxWindowBits==="number"){t.client_max_window_bits=this._options.clientMaxWindowBits}}else if(this._options.clientMaxWindowBits===false||typeof this._options.clientMaxWindowBits==="number"&&t.client_max_window_bits>this._options.clientMaxWindowBits){throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}return t}normalizeParams(e){e.forEach((e=>{Object.keys(e).forEach((t=>{let r=e[t];if(r.length>1){throw new Error(`Parameter "${t}" must have only a single value`)}r=r[0];if(t==="client_max_window_bits"){if(r!==true){const e=+r;if(!Number.isInteger(e)||e<8||e>15){throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}r=e}else if(!this._isServer){throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}}else if(t==="server_max_window_bits"){const e=+r;if(!Number.isInteger(e)||e<8||e>15){throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}r=e}else if(t==="client_no_context_takeover"||t==="server_no_context_takeover"){if(r!==true){throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}}else{throw new Error(`Unknown parameter "${t}"`)}e[t]=r}))}));return e}decompress(e,t,r){p.add((n=>{this._decompress(e,t,((e,t)=>{n();r(e,t)}))}))}compress(e,t,r){p.add((n=>{this._compress(e,t,((e,t)=>{n();r(e,t)}))}))}_decompress(e,t,r){const s=this._isServer?"client":"server";if(!this._inflate){const e=`${s}_max_window_bits`;const t=typeof this.params[e]!=="number"?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=n.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t});this._inflate[u]=this;this._inflate[c]=0;this._inflate[h]=[];this._inflate.on("error",inflateOnError);this._inflate.on("data",inflateOnData)}this._inflate[f]=r;this._inflate.write(e);if(t)this._inflate.write(l);this._inflate.flush((()=>{const e=this._inflate[d];if(e){this._inflate.close();this._inflate=null;r(e);return}const n=i.concat(this._inflate[h],this._inflate[c]);if(this._inflate._readableState.endEmitted){this._inflate.close();this._inflate=null}else{this._inflate[c]=0;this._inflate[h]=[];if(t&&this.params[`${s}_no_context_takeover`]){this._inflate.reset()}}r(null,n)}))}_compress(e,t,r){const s=this._isServer?"server":"client";if(!this._deflate){const e=`${s}_max_window_bits`;const t=typeof this.params[e]!=="number"?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=n.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t});this._deflate[c]=0;this._deflate[h]=[];this._deflate.on("data",deflateOnData)}this._deflate[f]=r;this._deflate.write(e);this._deflate.flush(n.Z_SYNC_FLUSH,(()=>{if(!this._deflate){return}let e=i.concat(this._deflate[h],this._deflate[c]);if(t){e=new a(e.buffer,e.byteOffset,e.length-4)}this._deflate[f]=null;this._deflate[c]=0;this._deflate[h]=[];if(t&&this.params[`${s}_no_context_takeover`]){this._deflate.reset()}r(null,e)}))}}e.exports=PerMessageDeflate;function deflateOnData(e){this[h].push(e);this[c]+=e.length}function inflateOnData(e){this[c]+=e.length;if(this[u]._maxPayload<1||this[c]<=this[u]._maxPayload){this[h].push(e);return}this[d]=new RangeError("Max payload size exceeded");this[d].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH";this[d][o]=1009;this.removeListener("data",inflateOnData);this.reset()}function inflateOnError(e){this[u]._inflate=null;e[o]=1007;this[f](e)}},2498:(e,t,r)=>{const{Writable:n}=r(2781);const i=r(4851);const{BINARY_TYPES:s,EMPTY_BUFFER:o,kStatusCode:a,kWebSocket:l}=r(5328);const{concat:u,toArrayBuffer:c,unmask:f}=r(5990);const{isValidStatusCode:h,isValidUTF8:d}=r(11);const p=Buffer[Symbol.species];const g=0;const b=1;const y=2;const v=3;const _=4;const w=5;class Receiver extends n{constructor(e={}){super();this._binaryType=e.binaryType||s[0];this._extensions=e.extensions||{};this._isServer=!!e.isServer;this._maxPayload=e.maxPayload|0;this._skipUTF8Validation=!!e.skipUTF8Validation;this[l]=undefined;this._bufferedBytes=0;this._buffers=[];this._compressed=false;this._payloadLength=0;this._mask=undefined;this._fragmented=0;this._masked=false;this._fin=false;this._opcode=0;this._totalPayloadLength=0;this._messageLength=0;this._fragments=[];this._state=g;this._loop=false}_write(e,t,r){if(this._opcode===8&&this._state==g)return r();this._bufferedBytes+=e.length;this._buffers.push(e);this.startLoop(r)}consume(e){this._bufferedBytes-=e;if(e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];this._buffers[0]=new p(t.buffer,t.byteOffset+e,t.length-e);return new p(t.buffer,t.byteOffset,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0];const n=t.length-e;if(e>=r.length){t.set(this._buffers.shift(),n)}else{t.set(new Uint8Array(r.buffer,r.byteOffset,e),n);this._buffers[0]=new p(r.buffer,r.byteOffset+e,r.length-e)}e-=r.length}while(e>0);return t}startLoop(e){let t;this._loop=true;do{switch(this._state){case g:t=this.getInfo();break;case b:t=this.getPayloadLength16();break;case y:t=this.getPayloadLength64();break;case v:this.getMask();break;case _:t=this.getData(e);break;default:this._loop=false;return}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2){this._loop=false;return}const e=this.consume(2);if((e[0]&48)!==0){this._loop=false;return error(RangeError,"RSV2 and RSV3 must be clear",true,1002,"WS_ERR_UNEXPECTED_RSV_2_3")}const t=(e[0]&64)===64;if(t&&!this._extensions[i.extensionName]){this._loop=false;return error(RangeError,"RSV1 must be clear",true,1002,"WS_ERR_UNEXPECTED_RSV_1")}this._fin=(e[0]&128)===128;this._opcode=e[0]&15;this._payloadLength=e[1]&127;if(this._opcode===0){if(t){this._loop=false;return error(RangeError,"RSV1 must be clear",true,1002,"WS_ERR_UNEXPECTED_RSV_1")}if(!this._fragmented){this._loop=false;return error(RangeError,"invalid opcode 0",true,1002,"WS_ERR_INVALID_OPCODE")}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){this._loop=false;return error(RangeError,`invalid opcode ${this._opcode}`,true,1002,"WS_ERR_INVALID_OPCODE")}this._compressed=t}else if(this._opcode>7&&this._opcode<11){if(!this._fin){this._loop=false;return error(RangeError,"FIN must be set",true,1002,"WS_ERR_EXPECTED_FIN")}if(t){this._loop=false;return error(RangeError,"RSV1 must be clear",true,1002,"WS_ERR_UNEXPECTED_RSV_1")}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){this._loop=false;return error(RangeError,`invalid payload length ${this._payloadLength}`,true,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}}else{this._loop=false;return error(RangeError,`invalid opcode ${this._opcode}`,true,1002,"WS_ERR_INVALID_OPCODE")}if(!this._fin&&!this._fragmented)this._fragmented=this._opcode;this._masked=(e[1]&128)===128;if(this._isServer){if(!this._masked){this._loop=false;return error(RangeError,"MASK must be set",true,1002,"WS_ERR_EXPECTED_MASK")}}else if(this._masked){this._loop=false;return error(RangeError,"MASK must be clear",true,1002,"WS_ERR_UNEXPECTED_MASK")}if(this._payloadLength===126)this._state=b;else if(this._payloadLength===127)this._state=y;else return this.haveLength()}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=false;return}this._payloadLength=this.consume(2).readUInt16BE(0);return this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=false;return}const e=this.consume(8);const t=e.readUInt32BE(0);if(t>Math.pow(2,53-32)-1){this._loop=false;return error(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",false,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")}this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4);return this.haveLength()}haveLength(){if(this._payloadLength&&this._opcode<8){this._totalPayloadLength+=this._payloadLength;if(this._totalPayloadLength>this._maxPayload&&this._maxPayload>0){this._loop=false;return error(RangeError,"Max payload size exceeded",false,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH")}}if(this._masked)this._state=v;else this._state=_}getMask(){if(this._bufferedBytes<4){this._loop=false;return}this._mask=this.consume(4);this._state=_}getData(e){let t=o;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=false;return}t=this.consume(this._payloadLength);if(this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0){f(t,this._mask)}}if(this._opcode>7)return this.controlMessage(t);if(this._compressed){this._state=w;this.decompress(t,e);return}if(t.length){this._messageLength=this._totalPayloadLength;this._fragments.push(t)}return this.dataMessage()}decompress(e,t){const r=this._extensions[i.extensionName];r.decompress(e,this._fin,((e,r)=>{if(e)return t(e);if(r.length){this._messageLength+=r.length;if(this._messageLength>this._maxPayload&&this._maxPayload>0){return t(error(RangeError,"Max payload size exceeded",false,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"))}this._fragments.push(r)}const n=this.dataMessage();if(n)return t(n);this.startLoop(t)}))}dataMessage(){if(this._fin){const e=this._messageLength;const t=this._fragments;this._totalPayloadLength=0;this._messageLength=0;this._fragmented=0;this._fragments=[];if(this._opcode===2){let r;if(this._binaryType==="nodebuffer"){r=u(t,e)}else if(this._binaryType==="arraybuffer"){r=c(u(t,e))}else{r=t}this.emit("message",r,true)}else{const r=u(t,e);if(!this._skipUTF8Validation&&!d(r)){this._loop=false;return error(Error,"invalid UTF-8 sequence",true,1007,"WS_ERR_INVALID_UTF8")}this.emit("message",r,false)}}this._state=g}controlMessage(e){if(this._opcode===8){this._loop=false;if(e.length===0){this.emit("conclude",1005,o);this.end()}else{const t=e.readUInt16BE(0);if(!h(t)){return error(RangeError,`invalid status code ${t}`,true,1002,"WS_ERR_INVALID_CLOSE_CODE")}const r=new p(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!d(r)){return error(Error,"invalid UTF-8 sequence",true,1007,"WS_ERR_INVALID_UTF8")}this.emit("conclude",t,r);this.end()}}else if(this._opcode===9){this.emit("ping",e)}else{this.emit("pong",e)}this._state=g}}e.exports=Receiver;function error(e,t,r,n,i){const s=new e(r?`Invalid WebSocket frame: ${t}`:t);Error.captureStackTrace(s,error);s.code=i;s[a]=n;return s}},8118:(e,t,r)=>{const n=r(1808);const i=r(4404);const{randomFillSync:s}=r(6113);const o=r(4851);const{EMPTY_BUFFER:a}=r(5328);const{isValidStatusCode:l}=r(11);const{mask:u,toBuffer:c}=r(5990);const f=Symbol("kByteLength");const h=Buffer.alloc(4);class Sender{constructor(e,t,r){this._extensions=t||{};if(r){this._generateMask=r;this._maskBuffer=Buffer.alloc(4)}this._socket=e;this._firstFragment=true;this._compress=false;this._bufferedBytes=0;this._deflating=false;this._queue=[]}static frame(e,t){let r;let n=false;let i=2;let o=false;if(t.mask){r=t.maskBuffer||h;if(t.generateMask){t.generateMask(r)}else{s(r,0,4)}o=(r[0]|r[1]|r[2]|r[3])===0;i=6}let a;if(typeof e==="string"){if((!t.mask||o)&&t[f]!==undefined){a=t[f]}else{e=Buffer.from(e);a=e.length}}else{a=e.length;n=t.mask&&t.readOnly&&!o}let l=a;if(a>=65536){i+=8;l=127}else if(a>125){i+=2;l=126}const c=Buffer.allocUnsafe(n?a+i:i);c[0]=t.fin?t.opcode|128:t.opcode;if(t.rsv1)c[0]|=64;c[1]=l;if(l===126){c.writeUInt16BE(a,2)}else if(l===127){c[2]=c[3]=0;c.writeUIntBE(a,4,6)}if(!t.mask)return[c,e];c[1]|=128;c[i-4]=r[0];c[i-3]=r[1];c[i-2]=r[2];c[i-1]=r[3];if(o)return[c,e];if(n){u(e,r,c,i,a);return[c]}u(e,r,e,0,a);return[c,e]}close(e,t,r,n){let i;if(e===undefined){i=a}else if(typeof e!=="number"||!l(e)){throw new TypeError("First argument must be a valid error code number")}else if(t===undefined||!t.length){i=Buffer.allocUnsafe(2);i.writeUInt16BE(e,0)}else{const r=Buffer.byteLength(t);if(r>123){throw new RangeError("The message must not be greater than 123 bytes")}i=Buffer.allocUnsafe(2+r);i.writeUInt16BE(e,0);if(typeof t==="string"){i.write(t,2)}else{i.set(t,2)}}const s={[f]:i.length,fin:true,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:false,rsv1:false};if(this._deflating){this.enqueue([this.dispatch,i,false,s,n])}else{this.sendFrame(Sender.frame(i,s),n)}}ping(e,t,r){let n;let i;if(typeof e==="string"){n=Buffer.byteLength(e);i=false}else{e=c(e);n=e.length;i=c.readOnly}if(n>125){throw new RangeError("The data size must not be greater than 125 bytes")}const s={[f]:n,fin:true,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:false};if(this._deflating){this.enqueue([this.dispatch,e,false,s,r])}else{this.sendFrame(Sender.frame(e,s),r)}}pong(e,t,r){let n;let i;if(typeof e==="string"){n=Buffer.byteLength(e);i=false}else{e=c(e);n=e.length;i=c.readOnly}if(n>125){throw new RangeError("The data size must not be greater than 125 bytes")}const s={[f]:n,fin:true,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:false};if(this._deflating){this.enqueue([this.dispatch,e,false,s,r])}else{this.sendFrame(Sender.frame(e,s),r)}}send(e,t,r){const n=this._extensions[o.extensionName];let i=t.binary?2:1;let s=t.compress;let a;let l;if(typeof e==="string"){a=Buffer.byteLength(e);l=false}else{e=c(e);a=e.length;l=c.readOnly}if(this._firstFragment){this._firstFragment=false;if(s&&n&&n.params[n._isServer?"server_no_context_takeover":"client_no_context_takeover"]){s=a>=n._threshold}this._compress=s}else{s=false;i=0}if(t.fin)this._firstFragment=true;if(n){const n={[f]:a,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:l,rsv1:s};if(this._deflating){this.enqueue([this.dispatch,e,this._compress,n,r])}else{this.dispatch(e,this._compress,n,r)}}else{this.sendFrame(Sender.frame(e,{[f]:a,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:l,rsv1:false}),r)}}dispatch(e,t,r,n){if(!t){this.sendFrame(Sender.frame(e,r),n);return}const i=this._extensions[o.extensionName];this._bufferedBytes+=r[f];this._deflating=true;i.compress(e,r.fin,((e,t)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");if(typeof n==="function")n(e);for(let t=0;t<this._queue.length;t++){const r=this._queue[t];const n=r[r.length-1];if(typeof n==="function")n(e)}return}this._bufferedBytes-=r[f];this._deflating=false;r.readOnly=false;this.sendFrame(Sender.frame(t,r),n);this.dequeue()}))}dequeue(){while(!this._deflating&&this._queue.length){const e=this._queue.shift();this._bufferedBytes-=e[3][f];Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][f];this._queue.push(e)}sendFrame(e,t){if(e.length===2){this._socket.cork();this._socket.write(e[0]);this._socket.write(e[1],t);this._socket.uncork()}else{this._socket.write(e[0],t)}}}e.exports=Sender},9002:(e,t,r)=>{const{Duplex:n}=r(2781);function emitClose(e){e.emit("close")}function duplexOnEnd(){if(!this.destroyed&&this._writableState.finished){this.destroy()}}function duplexOnError(e){this.removeListener("error",duplexOnError);this.destroy();if(this.listenerCount("error")===0){this.emit("error",e)}}function createWebSocketStream(e,t){let r=true;const i=new n({...t,autoDestroy:false,emitClose:false,objectMode:false,writableObjectMode:false});e.on("message",(function message(t,r){const n=!r&&i._readableState.objectMode?t.toString():t;if(!i.push(n))e.pause()}));e.once("error",(function error(e){if(i.destroyed)return;r=false;i.destroy(e)}));e.once("close",(function close(){if(i.destroyed)return;i.push(null)}));i._destroy=function(t,n){if(e.readyState===e.CLOSED){n(t);process.nextTick(emitClose,i);return}let s=false;e.once("error",(function error(e){s=true;n(e)}));e.once("close",(function close(){if(!s)n(t);process.nextTick(emitClose,i)}));if(r)e.terminate()};i._final=function(t){if(e.readyState===e.CONNECTING){e.once("open",(function open(){i._final(t)}));return}if(e._socket===null)return;if(e._socket._writableState.finished){t();if(i._readableState.endEmitted)i.destroy()}else{e._socket.once("finish",(function finish(){t()}));e.close()}};i._read=function(){if(e.isPaused)e.resume()};i._write=function(t,r,n){if(e.readyState===e.CONNECTING){e.once("open",(function open(){i._write(t,r,n)}));return}e.send(t,n)};i.on("end",duplexOnEnd);i.on("error",duplexOnError);return i}e.exports=createWebSocketStream},5175:(e,t,r)=>{const{tokenChars:n}=r(11);function parse(e){const t=new Set;let r=-1;let i=-1;let s=0;for(s;s<e.length;s++){const o=e.charCodeAt(s);if(i===-1&&n[o]===1){if(r===-1)r=s}else if(s!==0&&(o===32||o===9)){if(i===-1&&r!==-1)i=s}else if(o===44){if(r===-1){throw new SyntaxError(`Unexpected character at index ${s}`)}if(i===-1)i=s;const n=e.slice(r,i);if(t.has(n)){throw new SyntaxError(`The "${n}" subprotocol is duplicated`)}t.add(n);r=i=-1}else{throw new SyntaxError(`Unexpected character at index ${s}`)}}if(r===-1||i!==-1){throw new SyntaxError("Unexpected end of input")}const o=e.slice(r,s);if(t.has(o)){throw new SyntaxError(`The "${o}" subprotocol is duplicated`)}t.add(o);return t}e.exports={parse:parse}},11:(e,t,r)=>{const{isUtf8:n}=r(4300);const i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function isValidStatusCode(e){return e>=1e3&&e<=1014&&e!==1004&&e!==1005&&e!==1006||e>=3e3&&e<=4999}function _isValidUTF8(e){const t=e.length;let r=0;while(r<t){if((e[r]&128)===0){r++}else if((e[r]&224)===192){if(r+1===t||(e[r+1]&192)!==128||(e[r]&254)===192){return false}r+=2}else if((e[r]&240)===224){if(r+2>=t||(e[r+1]&192)!==128||(e[r+2]&192)!==128||e[r]===224&&(e[r+1]&224)===128||e[r]===237&&(e[r+1]&224)===160){return false}r+=3}else if((e[r]&248)===240){if(r+3>=t||(e[r+1]&192)!==128||(e[r+2]&192)!==128||(e[r+3]&192)!==128||e[r]===240&&(e[r+1]&240)===128||e[r]===244&&e[r+1]>143||e[r]>244){return false}r+=4}else{return false}}return true}e.exports={isValidStatusCode:isValidStatusCode,isValidUTF8:_isValidUTF8,tokenChars:i};if(n){e.exports.isValidUTF8=function(e){return e.length<24?_isValidUTF8(e):n(e)}}else if(!process.env.WS_NO_UTF_8_VALIDATE){try{const t=r(9975);e.exports.isValidUTF8=function(e){return e.length<32?_isValidUTF8(e):t(e)}}catch(e){}}},6768:(e,t,r)=>{const n=r(2361);const i=r(3685);const s=r(5687);const o=r(1808);const a=r(4404);const{createHash:l}=r(6113);const u=r(6479);const c=r(4851);const f=r(5175);const h=r(95);const{GUID:d,kWebSocket:p}=r(5328);const g=/^[+/0-9A-Za-z]{22}==$/;const b=0;const y=1;const v=2;class WebSocketServer extends n{constructor(e,t){super();e={maxPayload:100*1024*1024,skipUTF8Validation:false,perMessageDeflate:false,handleProtocols:null,clientTracking:true,verifyClient:null,noServer:false,backlog:null,server:null,host:null,path:null,port:null,WebSocket:h,...e};if(e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer){throw new TypeError('One and only one of the "port", "server", or "noServer" options '+"must be specified")}if(e.port!=null){this._server=i.createServer(((e,t)=>{const r=i.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"});t.end(r)}));this._server.listen(e.port,e.host,e.backlog,t)}else if(e.server){this._server=e.server}if(this._server){const e=this.emit.bind(this,"connection");this._removeListeners=addListeners(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,n)=>{this.handleUpgrade(t,r,n,e)}})}if(e.perMessageDeflate===true)e.perMessageDeflate={};if(e.clientTracking){this.clients=new Set;this._shouldEmitClose=false}this.options=e;this._state=b}address(){if(this.options.noServer){throw new Error('The server is operating in "noServer" mode')}if(!this._server)return null;return this._server.address()}close(e){if(this._state===v){if(e){this.once("close",(()=>{e(new Error("The server is not running"))}))}process.nextTick(emitClose,this);return}if(e)this.once("close",e);if(this._state===y)return;this._state=y;if(this.options.noServer||this.options.server){if(this._server){this._removeListeners();this._removeListeners=this._server=null}if(this.clients){if(!this.clients.size){process.nextTick(emitClose,this)}else{this._shouldEmitClose=true}}else{process.nextTick(emitClose,this)}}else{const e=this._server;this._removeListeners();this._removeListeners=this._server=null;e.close((()=>{emitClose(this)}))}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");const r=t!==-1?e.url.slice(0,t):e.url;if(r!==this.options.path)return false}return true}handleUpgrade(e,t,r,n){t.on("error",socketOnError);const i=e.headers["sec-websocket-key"];const s=+e.headers["sec-websocket-version"];if(e.method!=="GET"){const r="Invalid HTTP method";abortHandshakeOrEmitwsClientError(this,e,t,405,r);return}if(e.headers.upgrade.toLowerCase()!=="websocket"){const r="Invalid Upgrade header";abortHandshakeOrEmitwsClientError(this,e,t,400,r);return}if(!i||!g.test(i)){const r="Missing or invalid Sec-WebSocket-Key header";abortHandshakeOrEmitwsClientError(this,e,t,400,r);return}if(s!==8&&s!==13){const r="Missing or invalid Sec-WebSocket-Version header";abortHandshakeOrEmitwsClientError(this,e,t,400,r);return}if(!this.shouldHandle(e)){abortHandshake(t,400);return}const o=e.headers["sec-websocket-protocol"];let a=new Set;if(o!==undefined){try{a=f.parse(o)}catch(r){const n="Invalid Sec-WebSocket-Protocol header";abortHandshakeOrEmitwsClientError(this,e,t,400,n);return}}const l=e.headers["sec-websocket-extensions"];const h={};if(this.options.perMessageDeflate&&l!==undefined){const r=new c(this.options.perMessageDeflate,true,this.options.maxPayload);try{const e=u.parse(l);if(e[c.extensionName]){r.accept(e[c.extensionName]);h[c.extensionName]=r}}catch(r){const n="Invalid or unacceptable Sec-WebSocket-Extensions header";abortHandshakeOrEmitwsClientError(this,e,t,400,n);return}}if(this.options.verifyClient){const o={origin:e.headers[`${s===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(o,((s,o,l,u)=>{if(!s){return abortHandshake(t,o||401,l,u)}this.completeUpgrade(h,i,a,e,t,r,n)}));return}if(!this.options.verifyClient(o))return abortHandshake(t,401)}this.completeUpgrade(h,i,a,e,t,r,n)}completeUpgrade(e,t,r,n,i,s,o){if(!i.readable||!i.writable)return i.destroy();if(i[p]){throw new Error("server.handleUpgrade() was called more than once with the same "+"socket, possibly due to a misconfiguration")}if(this._state>b)return abortHandshake(i,503);const a=l("sha1").update(t+d).digest("base64");const f=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${a}`];const h=new this.options.WebSocket(null);if(r.size){const e=this.options.handleProtocols?this.options.handleProtocols(r,n):r.values().next().value;if(e){f.push(`Sec-WebSocket-Protocol: ${e}`);h._protocol=e}}if(e[c.extensionName]){const t=e[c.extensionName].params;const r=u.format({[c.extensionName]:[t]});f.push(`Sec-WebSocket-Extensions: ${r}`);h._extensions=e}this.emit("headers",f,n);i.write(f.concat("\r\n").join("\r\n"));i.removeListener("error",socketOnError);h.setSocket(i,s,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation});if(this.clients){this.clients.add(h);h.on("close",(()=>{this.clients.delete(h);if(this._shouldEmitClose&&!this.clients.size){process.nextTick(emitClose,this)}}))}o(h,n)}}e.exports=WebSocketServer;function addListeners(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function removeListeners(){for(const r of Object.keys(t)){e.removeListener(r,t[r])}}}function emitClose(e){e._state=v;e.emit("close")}function socketOnError(){this.destroy()}function abortHandshake(e,t,r,n){r=r||i.STATUS_CODES[t];n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n};e.once("finish",e.destroy);e.end(`HTTP/1.1 ${t} ${i.STATUS_CODES[t]}\r\n`+Object.keys(n).map((e=>`${e}: ${n[e]}`)).join("\r\n")+"\r\n\r\n"+r)}function abortHandshakeOrEmitwsClientError(e,t,r,n,i){if(e.listenerCount("wsClientError")){const n=new Error(i);Error.captureStackTrace(n,abortHandshakeOrEmitwsClientError);e.emit("wsClientError",n,r,t)}else{abortHandshake(r,n,i)}}},95:(e,t,r)=>{const n=r(2361);const i=r(5687);const s=r(3685);const o=r(1808);const a=r(4404);const{randomBytes:l,createHash:u}=r(6113);const{Readable:c}=r(2781);const{URL:f}=r(7310);const h=r(4851);const d=r(2498);const p=r(8118);const{BINARY_TYPES:g,EMPTY_BUFFER:b,GUID:y,kForOnEventAttribute:v,kListener:_,kStatusCode:w,kWebSocket:E,NOOP:x}=r(5328);const{EventTarget:{addEventListener:S,removeEventListener:k}}=r(2427);const{format:O,parse:T}=r(6479);const{toBuffer:M}=r(5990);const C=30*1e3;const A=Symbol("kAborted");const R=[8,13];const P=["CONNECTING","OPEN","CLOSING","CLOSED"];const N=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class WebSocket extends n{constructor(e,t,r){super();this._binaryType=g[0];this._closeCode=1006;this._closeFrameReceived=false;this._closeFrameSent=false;this._closeMessage=b;this._closeTimer=null;this._extensions={};this._paused=false;this._protocol="";this._readyState=WebSocket.CONNECTING;this._receiver=null;this._sender=null;this._socket=null;if(e!==null){this._bufferedAmount=0;this._isServer=false;this._redirects=0;if(t===undefined){t=[]}else if(!Array.isArray(t)){if(typeof t==="object"&&t!==null){r=t;t=[]}else{t=[t]}}initAsClient(this,e,t,r)}else{this._isServer=true}}get binaryType(){return this._binaryType}set binaryType(e){if(!g.includes(e))return;this._binaryType=e;if(this._receiver)this._receiver._binaryType=e}get bufferedAmount(){if(!this._socket)return this._bufferedAmount;return this._socket._writableState.length+this._sender._bufferedBytes}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const n=new d({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation});this._sender=new p(e,this._extensions,r.generateMask);this._receiver=n;this._socket=e;n[E]=this;e[E]=this;n.on("conclude",receiverOnConclude);n.on("drain",receiverOnDrain);n.on("error",receiverOnError);n.on("message",receiverOnMessage);n.on("ping",receiverOnPing);n.on("pong",receiverOnPong);e.setTimeout(0);e.setNoDelay();if(t.length>0)e.unshift(t);e.on("close",socketOnClose);e.on("data",socketOnData);e.on("end",socketOnEnd);e.on("error",socketOnError);this._readyState=WebSocket.OPEN;this.emit("open")}emitClose(){if(!this._socket){this._readyState=WebSocket.CLOSED;this.emit("close",this._closeCode,this._closeMessage);return}if(this._extensions[h.extensionName]){this._extensions[h.extensionName].cleanup()}this._receiver.removeAllListeners();this._readyState=WebSocket.CLOSED;this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState===WebSocket.CLOSED)return;if(this.readyState===WebSocket.CONNECTING){const e="WebSocket was closed before the connection was established";abortHandshake(this,this._req,e);return}if(this.readyState===WebSocket.CLOSING){if(this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)){this._socket.end()}return}this._readyState=WebSocket.CLOSING;this._sender.close(e,t,!this._isServer,(e=>{if(e)return;this._closeFrameSent=true;if(this._closeFrameReceived||this._receiver._writableState.errorEmitted){this._socket.end()}}));this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),C)}pause(){if(this.readyState===WebSocket.CONNECTING||this.readyState===WebSocket.CLOSED){return}this._paused=true;this._socket.pause()}ping(e,t,r){if(this.readyState===WebSocket.CONNECTING){throw new Error("WebSocket is not open: readyState 0 (CONNECTING)")}if(typeof e==="function"){r=e;e=t=undefined}else if(typeof t==="function"){r=t;t=undefined}if(typeof e==="number")e=e.toString();if(this.readyState!==WebSocket.OPEN){sendAfterClose(this,e,r);return}if(t===undefined)t=!this._isServer;this._sender.ping(e||b,t,r)}pong(e,t,r){if(this.readyState===WebSocket.CONNECTING){throw new Error("WebSocket is not open: readyState 0 (CONNECTING)")}if(typeof e==="function"){r=e;e=t=undefined}else if(typeof t==="function"){r=t;t=undefined}if(typeof e==="number")e=e.toString();if(this.readyState!==WebSocket.OPEN){sendAfterClose(this,e,r);return}if(t===undefined)t=!this._isServer;this._sender.pong(e||b,t,r)}resume(){if(this.readyState===WebSocket.CONNECTING||this.readyState===WebSocket.CLOSED){return}this._paused=false;if(!this._receiver._writableState.needDrain)this._socket.resume()}send(e,t,r){if(this.readyState===WebSocket.CONNECTING){throw new Error("WebSocket is not open: readyState 0 (CONNECTING)")}if(typeof t==="function"){r=t;t={}}if(typeof e==="number")e=e.toString();if(this.readyState!==WebSocket.OPEN){sendAfterClose(this,e,r);return}const n={binary:typeof e!=="string",mask:!this._isServer,compress:true,fin:true,...t};if(!this._extensions[h.extensionName]){n.compress=false}this._sender.send(e||b,n,r)}terminate(){if(this.readyState===WebSocket.CLOSED)return;if(this.readyState===WebSocket.CONNECTING){const e="WebSocket was closed before the connection was established";abortHandshake(this,this._req,e);return}if(this._socket){this._readyState=WebSocket.CLOSING;this._socket.destroy()}}}Object.defineProperty(WebSocket,"CONNECTING",{enumerable:true,value:P.indexOf("CONNECTING")});Object.defineProperty(WebSocket.prototype,"CONNECTING",{enumerable:true,value:P.indexOf("CONNECTING")});Object.defineProperty(WebSocket,"OPEN",{enumerable:true,value:P.indexOf("OPEN")});Object.defineProperty(WebSocket.prototype,"OPEN",{enumerable:true,value:P.indexOf("OPEN")});Object.defineProperty(WebSocket,"CLOSING",{enumerable:true,value:P.indexOf("CLOSING")});Object.defineProperty(WebSocket.prototype,"CLOSING",{enumerable:true,value:P.indexOf("CLOSING")});Object.defineProperty(WebSocket,"CLOSED",{enumerable:true,value:P.indexOf("CLOSED")});Object.defineProperty(WebSocket.prototype,"CLOSED",{enumerable:true,value:P.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach((e=>{Object.defineProperty(WebSocket.prototype,e,{enumerable:true})}));["open","error","close","message"].forEach((e=>{Object.defineProperty(WebSocket.prototype,`on${e}`,{enumerable:true,get(){for(const t of this.listeners(e)){if(t[v])return t[_]}return null},set(t){for(const t of this.listeners(e)){if(t[v]){this.removeListener(e,t);break}}if(typeof t!=="function")return;this.addEventListener(e,t,{[v]:true})}})}));WebSocket.prototype.addEventListener=S;WebSocket.prototype.removeEventListener=k;e.exports=WebSocket;function initAsClient(e,t,r,n){const o={protocolVersion:R[1],maxPayload:100*1024*1024,skipUTF8Validation:false,perMessageDeflate:true,followRedirects:false,maxRedirects:10,...n,createConnection:undefined,socketPath:undefined,hostname:undefined,protocol:undefined,timeout:undefined,method:"GET",host:undefined,path:undefined,port:undefined};if(!R.includes(o.protocolVersion)){throw new RangeError(`Unsupported protocol version: ${o.protocolVersion} `+`(supported versions: ${R.join(", ")})`)}let a;if(t instanceof f){a=t;e._url=t.href}else{try{a=new f(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}e._url=t}const c=a.protocol==="wss:";const d=a.protocol==="ws+unix:";let p;if(a.protocol!=="ws:"&&!c&&!d){p='The URL\'s protocol must be one of "ws:", "wss:", or "ws+unix:"'}else if(d&&!a.pathname){p="The URL's pathname is empty"}else if(a.hash){p="The URL contains a fragment identifier"}if(p){const t=new SyntaxError(p);if(e._redirects===0){throw t}else{emitErrorAndClose(e,t);return}}const g=c?443:80;const b=l(16).toString("base64");const v=c?i.request:s.request;const _=new Set;let w;o.createConnection=c?tlsConnect:netConnect;o.defaultPort=o.defaultPort||g;o.port=a.port||g;o.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname;o.headers={...o.headers,"Sec-WebSocket-Version":o.protocolVersion,"Sec-WebSocket-Key":b,Connection:"Upgrade",Upgrade:"websocket"};o.path=a.pathname+a.search;o.timeout=o.handshakeTimeout;if(o.perMessageDeflate){w=new h(o.perMessageDeflate!==true?o.perMessageDeflate:{},false,o.maxPayload);o.headers["Sec-WebSocket-Extensions"]=O({[h.extensionName]:w.offer()})}if(r.length){for(const e of r){if(typeof e!=="string"||!N.test(e)||_.has(e)){throw new SyntaxError("An invalid or duplicated subprotocol was specified")}_.add(e)}o.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(o.origin){if(o.protocolVersion<13){o.headers["Sec-WebSocket-Origin"]=o.origin}else{o.headers.Origin=o.origin}}if(a.username||a.password){o.auth=`${a.username}:${a.password}`}if(d){const e=o.path.split(":");o.socketPath=e[0];o.path=e[1]}let E;if(o.followRedirects){if(e._redirects===0){e._originalIpc=d;e._originalSecure=c;e._originalHostOrSocketPath=d?o.socketPath:a.host;const t=n&&n.headers;n={...n,headers:{}};if(t){for(const[e,r]of Object.entries(t)){n.headers[e.toLowerCase()]=r}}}else if(e.listenerCount("redirect")===0){const t=d?e._originalIpc?o.socketPath===e._originalHostOrSocketPath:false:e._originalIpc?false:a.host===e._originalHostOrSocketPath;if(!t||e._originalSecure&&!c){delete o.headers.authorization;delete o.headers.cookie;if(!t)delete o.headers.host;o.auth=undefined}}if(o.auth&&!n.headers.authorization){n.headers.authorization="Basic "+Buffer.from(o.auth).toString("base64")}E=e._req=v(o);if(e._redirects){e.emit("redirect",e.url,E)}}else{E=e._req=v(o)}if(o.timeout){E.on("timeout",(()=>{abortHandshake(e,E,"Opening handshake has timed out")}))}E.on("error",(t=>{if(E===null||E[A])return;E=e._req=null;emitErrorAndClose(e,t)}));E.on("response",(i=>{const s=i.headers.location;const a=i.statusCode;if(s&&o.followRedirects&&a>=300&&a<400){if(++e._redirects>o.maxRedirects){abortHandshake(e,E,"Maximum redirects exceeded");return}E.abort();let i;try{i=new f(s,t)}catch(t){const r=new SyntaxError(`Invalid URL: ${s}`);emitErrorAndClose(e,r);return}initAsClient(e,i,r,n)}else if(!e.emit("unexpected-response",E,i)){abortHandshake(e,E,`Unexpected server response: ${i.statusCode}`)}}));E.on("upgrade",((t,r,n)=>{e.emit("upgrade",t);if(e.readyState!==WebSocket.CONNECTING)return;E=e._req=null;if(t.headers.upgrade.toLowerCase()!=="websocket"){abortHandshake(e,r,"Invalid Upgrade header");return}const i=u("sha1").update(b+y).digest("base64");if(t.headers["sec-websocket-accept"]!==i){abortHandshake(e,r,"Invalid Sec-WebSocket-Accept header");return}const s=t.headers["sec-websocket-protocol"];let a;if(s!==undefined){if(!_.size){a="Server sent a subprotocol but none was requested"}else if(!_.has(s)){a="Server sent an invalid subprotocol"}}else if(_.size){a="Server sent no subprotocol"}if(a){abortHandshake(e,r,a);return}if(s)e._protocol=s;const l=t.headers["sec-websocket-extensions"];if(l!==undefined){if(!w){const t="Server sent a Sec-WebSocket-Extensions header but no extension "+"was requested";abortHandshake(e,r,t);return}let t;try{t=T(l)}catch(t){const n="Invalid Sec-WebSocket-Extensions header";abortHandshake(e,r,n);return}const n=Object.keys(t);if(n.length!==1||n[0]!==h.extensionName){const t="Server indicated an extension that was not requested";abortHandshake(e,r,t);return}try{w.accept(t[h.extensionName])}catch(t){const n="Invalid Sec-WebSocket-Extensions header";abortHandshake(e,r,n);return}e._extensions[h.extensionName]=w}e.setSocket(r,n,{generateMask:o.generateMask,maxPayload:o.maxPayload,skipUTF8Validation:o.skipUTF8Validation})}));if(o.finishRequest){o.finishRequest(E,e)}else{E.end()}}function emitErrorAndClose(e,t){e._readyState=WebSocket.CLOSING;e.emit("error",t);e.emitClose()}function netConnect(e){e.path=e.socketPath;return o.connect(e)}function tlsConnect(e){e.path=undefined;if(!e.servername&&e.servername!==""){e.servername=o.isIP(e.host)?"":e.host}return a.connect(e)}function abortHandshake(e,t,r){e._readyState=WebSocket.CLOSING;const n=new Error(r);Error.captureStackTrace(n,abortHandshake);if(t.setHeader){t[A]=true;t.abort();if(t.socket&&!t.socket.destroyed){t.socket.destroy()}process.nextTick(emitErrorAndClose,e,n)}else{t.destroy(n);t.once("error",e.emit.bind(e,"error"));t.once("close",e.emitClose.bind(e))}}function sendAfterClose(e,t,r){if(t){const r=M(t).length;if(e._socket)e._sender._bufferedBytes+=r;else e._bufferedAmount+=r}if(r){const t=new Error(`WebSocket is not open: readyState ${e.readyState} `+`(${P[e.readyState]})`);process.nextTick(r,t)}}function receiverOnConclude(e,t){const r=this[E];r._closeFrameReceived=true;r._closeMessage=t;r._closeCode=e;if(r._socket[E]===undefined)return;r._socket.removeListener("data",socketOnData);process.nextTick(resume,r._socket);if(e===1005)r.close();else r.close(e,t)}function receiverOnDrain(){const e=this[E];if(!e.isPaused)e._socket.resume()}function receiverOnError(e){const t=this[E];if(t._socket[E]!==undefined){t._socket.removeListener("data",socketOnData);process.nextTick(resume,t._socket);t.close(e[w])}t.emit("error",e)}function receiverOnFinish(){this[E].emitClose()}function receiverOnMessage(e,t){this[E].emit("message",e,t)}function receiverOnPing(e){const t=this[E];t.pong(e,!t._isServer,x);t.emit("ping",e)}function receiverOnPong(e){this[E].emit("pong",e)}function resume(e){e.resume()}function socketOnClose(){const e=this[E];this.removeListener("close",socketOnClose);this.removeListener("data",socketOnData);this.removeListener("end",socketOnEnd);e._readyState=WebSocket.CLOSING;let t;if(!this._readableState.endEmitted&&!e._closeFrameReceived&&!e._receiver._writableState.errorEmitted&&(t=e._socket.read())!==null){e._receiver.write(t)}e._receiver.end();this[E]=undefined;clearTimeout(e._closeTimer);if(e._receiver._writableState.finished||e._receiver._writableState.errorEmitted){e.emitClose()}else{e._receiver.on("error",receiverOnFinish);e._receiver.on("finish",receiverOnFinish)}}function socketOnData(e){if(!this[E]._receiver.write(e)){this.pause()}}function socketOnEnd(){const e=this[E];e._readyState=WebSocket.CLOSING;e._receiver.end();this.end()}function socketOnError(){const e=this[E];this.removeListener("error",socketOnError);this.on("error",x);if(e){e._readyState=WebSocket.CLOSING;this.destroy()}}},8921:module=>{module.exports=eval("require")("bufferutil")},9975:module=>{module.exports=eval("require")("utf-8-validate")},4300:e=>{e.exports=__WEBPACK_EXTERNAL_createRequire(import.meta.url)("buffer")},6113:e=>{e.exports=__WEBPACK_EXTERNAL_createRequire(import.meta.url)("crypto")},2361:e=>{e.exports=__WEBPACK_EXTERNAL_createRequire(import.meta.url)("events")},7147:e=>{e.exports=__WEBPACK_EXTERNAL_createRequire(import.meta.url)("fs")},3685:e=>{e.exports=__WEBPACK_EXTERNAL_createRequire(import.meta.url)("http")},5687:e=>{e.exports=__WEBPACK_EXTERNAL_createRequire(import.meta.url)("https")},2503:e=>{e.exports=__WEBPACK_EXTERNAL_createRequire(import.meta.url)("module")},1808:e=>{e.exports=__WEBPACK_EXTERNAL_createRequire(import.meta.url)("net")},2037:e=>{e.exports=__WEBPACK_EXTERNAL_createRequire(import.meta.url)("os")},1017:e=>{e.exports=__WEBPACK_EXTERNAL_createRequire(import.meta.url)("path")},2781:e=>{e.exports=__WEBPACK_EXTERNAL_createRequire(import.meta.url)("stream")},1576:e=>{e.exports=__WEBPACK_EXTERNAL_createRequire(import.meta.url)("string_decoder")},4404:e=>{e.exports=__WEBPACK_EXTERNAL_createRequire(import.meta.url)("tls")},6224:e=>{e.exports=__WEBPACK_EXTERNAL_createRequire(import.meta.url)("tty")},7310:e=>{e.exports=__WEBPACK_EXTERNAL_createRequire(import.meta.url)("url")},3837:e=>{e.exports=__WEBPACK_EXTERNAL_createRequire(import.meta.url)("util")},9796:e=>{e.exports=__WEBPACK_EXTERNAL_createRequire(import.meta.url)("zlib")},4228:e=>{e.exports={i8:"3.3.3"}}};var __webpack_module_cache__={};function __nccwpck_require__(e){var t=__webpack_module_cache__[e];if(t!==undefined){return t.exports}var r=__webpack_module_cache__[e]={exports:{}};var n=true;try{__webpack_modules__[e].call(r.exports,r,r.exports,__nccwpck_require__);n=false}finally{if(n)delete __webpack_module_cache__[e]}return r.exports}if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=new URL(".",import.meta.url).pathname.slice(import.meta.url.match(/^file:\/\/\/\w:/)?1:0,-1)+"/";var __webpack_exports__={};(()=>{var e=__nccwpck_require__(8942);var t=__nccwpck_require__(3685);var r=__nccwpck_require__(4231);const n=1024*64;const assertValidPattern=e=>{if(typeof e!=="string"){throw new TypeError("invalid pattern")}if(e.length>n){throw new TypeError("pattern is too long")}};const i={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",true],"[:alpha:]":["\\p{L}\\p{Nl}",true],"[:ascii:]":["\\x"+"00-\\x"+"7f",false],"[:blank:]":["\\p{Zs}\\t",true],"[:cntrl:]":["\\p{Cc}",true],"[:digit:]":["\\p{Nd}",true],"[:graph:]":["\\p{Z}\\p{C}",true,true],"[:lower:]":["\\p{Ll}",true],"[:print:]":["\\p{C}",true],"[:punct:]":["\\p{P}",true],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",true],"[:upper:]":["\\p{Lu}",true],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",true],"[:xdigit:]":["A-Fa-f0-9",false]};const braceEscape=e=>e.replace(/[[\]\\-]/g,"\\$&");const regexpEscape=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");const rangesToString=e=>e.join("");const parseClass=(e,t)=>{const r=t;if(e.charAt(r)!=="["){throw new Error("not in a brace expression")}const n=[];const s=[];let o=r+1;let a=false;let l=false;let u=false;let c=false;let f=r;let h="";e:while(o<e.length){const t=e.charAt(o);if((t==="!"||t==="^")&&o===r+1){c=true;o++;continue}if(t==="]"&&a&&!u){f=o+1;break}a=true;if(t==="\\"){if(!u){u=true;o++;continue}}if(t==="["&&!u){for(const[t,[a,u,c]]of Object.entries(i)){if(e.startsWith(t,o)){if(h){return["$.",false,e.length-r,true]}o+=t.length;if(c)s.push(a);else n.push(a);l=l||u;continue e}}}u=false;if(h){if(t>h){n.push(braceEscape(h)+"-"+braceEscape(t))}else if(t===h){n.push(braceEscape(t))}h="";o++;continue}if(e.startsWith("-]",o+1)){n.push(braceEscape(t+"-"));o+=2;continue}if(e.startsWith("-",o+1)){h=t;o+=2;continue}n.push(braceEscape(t));o++}if(f<o){return["",false,0,false]}if(!n.length&&!s.length){return["$.",false,e.length-r,true]}if(s.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!c){const e=n[0].length===2?n[0].slice(-1):n[0];return[regexpEscape(e),false,f-r,false]}const d="["+(c?"^":"")+rangesToString(n)+"]";const p="["+(c?"":"^")+rangesToString(s)+"]";const g=n.length&&s.length?"("+d+"|"+p+")":n.length?d:p;return[g,l,f-r,true]};const unescape_unescape=(e,{windowsPathsNoEscape:t=false}={})=>t?e.replace(/\[([^\/\\])\]/g,"$1"):e.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");const s=new Set(["!","?","+","*","@"]);const isExtglobType=e=>s.has(e);const o="(?!(?:^|/)\\.\\.?(?:$|/))";const a="(?!\\.)";const l=new Set(["[","."]);const u=new Set(["..","."]);const c=new Set("().*{}+?[]^$\\!");const regExpEscape=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");const f="[^/]";const h=f+"*?";const d=f+"+?";class AST{type;#e;#t;#r=false;#n=[];#i;#s;#o;#a=false;#l;#u;#c=false;constructor(e,t,r={}){this.type=e;if(e)this.#t=true;this.#i=t;this.#e=this.#i?this.#i.#e:this;this.#l=this.#e===this?r:this.#e.#l;this.#o=this.#e===this?[]:this.#e.#o;if(e==="!"&&!this.#e.#a)this.#o.push(this);this.#s=this.#i?this.#i.#n.length:0}get hasMagic(){if(this.#t!==undefined)return this.#t;for(const e of this.#n){if(typeof e==="string")continue;if(e.type||e.hasMagic)return this.#t=true}return this.#t}toString(){if(this.#u!==undefined)return this.#u;if(!this.type){return this.#u=this.#n.map((e=>String(e))).join("")}else{return this.#u=this.type+"("+this.#n.map((e=>String(e))).join("|")+")"}}#f(){if(this!==this.#e)throw new Error("should only call on root");if(this.#a)return this;this.toString();this.#a=true;let e;while(e=this.#o.pop()){if(e.type!=="!")continue;let t=e;let r=t.#i;while(r){for(let n=t.#s+1;!r.type&&n<r.#n.length;n++){for(const t of e.#n){if(typeof t==="string"){throw new Error("string part in extglob AST??")}t.copyIn(r.#n[n])}}t=r;r=t.#i}}return this}push(...e){for(const t of e){if(t==="")continue;if(typeof t!=="string"&&!(t instanceof AST&&t.#i===this)){throw new Error("invalid part: "+t)}this.#n.push(t)}}toJSON(){const e=this.type===null?this.#n.slice().map((e=>typeof e==="string"?e:e.toJSON())):[this.type,...this.#n.map((e=>e.toJSON()))];if(this.isStart()&&!this.type)e.unshift([]);if(this.isEnd()&&(this===this.#e||this.#e.#a&&this.#i?.type==="!")){e.push({})}return e}isStart(){if(this.#e===this)return true;if(!this.#i?.isStart())return false;if(this.#s===0)return true;const e=this.#i;for(let t=0;t<this.#s;t++){const r=e.#n[t];if(!(r instanceof AST&&r.type==="!")){return false}}return true}isEnd(){if(this.#e===this)return true;if(this.#i?.type==="!")return true;if(!this.#i?.isEnd())return false;if(!this.type)return this.#i?.isEnd();const e=this.#i?this.#i.#n.length:0;return this.#s===e-1}copyIn(e){if(typeof e==="string")this.push(e);else this.push(e.clone(this))}clone(e){const t=new AST(this.type,e);for(const e of this.#n){t.copyIn(e)}return t}static#h(e,t,r,n){let i=false;let s=false;let o=-1;let a=false;if(t.type===null){let l=r;let u="";while(l<e.length){const r=e.charAt(l++);if(i||r==="\\"){i=!i;u+=r;continue}if(s){if(l===o+1){if(r==="^"||r==="!"){a=true}}else if(r==="]"&&!(l===o+2&&a)){s=false}u+=r;continue}else if(r==="["){s=true;o=l;a=false;u+=r;continue}if(!n.noext&&isExtglobType(r)&&e.charAt(l)==="("){t.push(u);u="";const i=new AST(r,t);l=AST.#h(e,i,l,n);t.push(i);continue}u+=r}t.push(u);return l}let l=r+1;let u=new AST(null,t);const c=[];let f="";while(l<e.length){const r=e.charAt(l++);if(i||r==="\\"){i=!i;f+=r;continue}if(s){if(l===o+1){if(r==="^"||r==="!"){a=true}}else if(r==="]"&&!(l===o+2&&a)){s=false}f+=r;continue}else if(r==="["){s=true;o=l;a=false;f+=r;continue}if(isExtglobType(r)&&e.charAt(l)==="("){u.push(f);f="";const t=new AST(r,u);u.push(t);l=AST.#h(e,t,l,n);continue}if(r==="|"){u.push(f);f="";c.push(u);u=new AST(null,t);continue}if(r===")"){if(f===""&&t.#n.length===0){t.#c=true}u.push(f);f="";t.push(...c,u);return l}f+=r}t.type=null;t.#t=undefined;t.#n=[e.substring(r-1)];return l}static fromGlob(e,t={}){const r=new AST(null,undefined,t);AST.#h(e,r,0,t);return r}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();const e=this.toString();const[t,r,n,i]=this.toRegExpSource();const s=n||this.#t||this.#l.nocase&&!this.#l.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase();if(!s){return r}const o=(this.#l.nocase?"i":"")+(i?"u":"");return Object.assign(new RegExp(`^${t}$`,o),{_src:t,_glob:e})}toRegExpSource(e){const t=e??!!this.#l.dot;if(this.#e===this)this.#f();if(!this.type){const r=this.isStart()&&this.isEnd();const n=this.#n.map((t=>{const[n,i,s,o]=typeof t==="string"?AST.#d(t,this.#t,r):t.toRegExpSource(e);this.#t=this.#t||s;this.#r=this.#r||o;return n})).join("");let i="";if(this.isStart()){if(typeof this.#n[0]==="string"){const r=this.#n.length===1&&u.has(this.#n[0]);if(!r){const r=l;const s=t&&r.has(n.charAt(0))||n.startsWith("\\.")&&r.has(n.charAt(2))||n.startsWith("\\.\\.")&&r.has(n.charAt(4));const u=!t&&!e&&r.has(n.charAt(0));i=s?o:u?a:""}}}let s="";if(this.isEnd()&&this.#e.#a&&this.#i?.type==="!"){s="(?:$|\\/)"}const c=i+n+s;return[c,unescape_unescape(n),this.#t=!!this.#t,this.#r]}const r=this.type==="*"||this.type==="+";const n=this.type==="!"?"(?:(?!(?:":"(?:";let i=this.#p(t);if(this.isStart()&&this.isEnd()&&!i&&this.type!=="!"){const e=this.toString();this.#n=[e];this.type=null;this.#t=undefined;return[e,unescape_unescape(this.toString()),false,false]}let s=!r||e||t||!a?"":this.#p(true);if(s===i){s=""}if(s){i=`(?:${i})(?:${s})*?`}let c="";if(this.type==="!"&&this.#c){c=(this.isStart()&&!t?a:"")+d}else{const r=this.type==="!"?"))"+(this.isStart()&&!t&&!e?a:"")+h+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?`)?`:`)${this.type}`;c=n+i+r}return[c,unescape_unescape(i),this.#t=!!this.#t,this.#r]}#p(e){return this.#n.map((t=>{if(typeof t==="string"){throw new Error("string type in extglob ast??")}const[r,n,i,s]=t.toRegExpSource(e);this.#r=this.#r||s;return r})).filter((e=>!(this.isStart()&&this.isEnd())||!!e)).join("|")}static#d(e,t,r=false){let n=false;let i="";let s=false;for(let o=0;o<e.length;o++){const a=e.charAt(o);if(n){n=false;i+=(c.has(a)?"\\":"")+a;continue}if(a==="\\"){if(o===e.length-1){i+="\\\\"}else{n=true}continue}if(a==="["){const[r,n,a,l]=parseClass(e,o);if(a){i+=r;s=s||n;o+=a-1;t=t||l;continue}}if(a==="*"){if(r&&e==="*")i+=d;else i+=h;t=true;continue}if(a==="?"){i+=f;t=true;continue}i+=regExpEscape(a)}return[i,unescape_unescape(e),!!t,s]}}const escape_escape=(e,{windowsPathsNoEscape:t=false}={})=>t?e.replace(/[?*()[\]]/g,"[$&]"):e.replace(/[?*()[\]\\]/g,"\\$&");const minimatch=(e,t,r={})=>{assertValidPattern(t);if(!r.nocomment&&t.charAt(0)==="#"){return false}return new Minimatch(t,r).match(e)};const p=/^\*+([^+@!?\*\[\(]*)$/;const starDotExtTest=e=>t=>!t.startsWith(".")&&t.endsWith(e);const starDotExtTestDot=e=>t=>t.endsWith(e);const starDotExtTestNocase=e=>{e=e.toLowerCase();return t=>!t.startsWith(".")&&t.toLowerCase().endsWith(e)};const starDotExtTestNocaseDot=e=>{e=e.toLowerCase();return t=>t.toLowerCase().endsWith(e)};const g=/^\*+\.\*+$/;const starDotStarTest=e=>!e.startsWith(".")&&e.includes(".");const starDotStarTestDot=e=>e!=="."&&e!==".."&&e.includes(".");const b=/^\.\*+$/;const dotStarTest=e=>e!=="."&&e!==".."&&e.startsWith(".");const y=/^\*+$/;const starTest=e=>e.length!==0&&!e.startsWith(".");const starTestDot=e=>e.length!==0&&e!=="."&&e!=="..";const v=/^\?+([^+@!?\*\[\(]*)?$/;const qmarksTestNocase=([e,t=""])=>{const r=qmarksTestNoExt([e]);if(!t)return r;t=t.toLowerCase();return e=>r(e)&&e.toLowerCase().endsWith(t)};const qmarksTestNocaseDot=([e,t=""])=>{const r=qmarksTestNoExtDot([e]);if(!t)return r;t=t.toLowerCase();return e=>r(e)&&e.toLowerCase().endsWith(t)};const qmarksTestDot=([e,t=""])=>{const r=qmarksTestNoExtDot([e]);return!t?r:e=>r(e)&&e.endsWith(t)};const qmarksTest=([e,t=""])=>{const r=qmarksTestNoExt([e]);return!t?r:e=>r(e)&&e.endsWith(t)};const qmarksTestNoExt=([e])=>{const t=e.length;return e=>e.length===t&&!e.startsWith(".")};const qmarksTestNoExtDot=([e])=>{const t=e.length;return e=>e.length===t&&e!=="."&&e!==".."};const _=typeof process==="object"&&process?typeof process.env==="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix";const w={win32:{sep:"\\"},posix:{sep:"/"}};const E=_==="win32"?w.win32.sep:w.posix.sep;minimatch.sep=E;const x=Symbol("globstar **");minimatch.GLOBSTAR=x;const S="[^/]";const k=S+"*?";const O="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?";const T="(?:(?!(?:\\/|^)\\.).)*?";const filter=(e,t={})=>r=>minimatch(r,e,t);minimatch.filter=filter;const ext=(e,t={})=>Object.assign({},e,t);const defaults=e=>{if(!e||typeof e!=="object"||!Object.keys(e).length){return minimatch}const t=minimatch;const m=(r,n,i={})=>t(r,n,ext(e,i));return Object.assign(m,{Minimatch:class Minimatch extends t.Minimatch{constructor(t,r={}){super(t,ext(e,r))}static defaults(r){return t.defaults(ext(e,r)).Minimatch}},AST:class AST extends t.AST{constructor(t,r,n={}){super(t,r,ext(e,n))}static fromGlob(r,n={}){return t.AST.fromGlob(r,ext(e,n))}},unescape:(r,n={})=>t.unescape(r,ext(e,n)),escape:(r,n={})=>t.escape(r,ext(e,n)),filter:(r,n={})=>t.filter(r,ext(e,n)),defaults:r=>t.defaults(ext(e,r)),makeRe:(r,n={})=>t.makeRe(r,ext(e,n)),braceExpand:(r,n={})=>t.braceExpand(r,ext(e,n)),match:(r,n,i={})=>t.match(r,n,ext(e,i)),sep:t.sep,GLOBSTAR:x})};minimatch.defaults=defaults;const braceExpand=(e,t={})=>{assertValidPattern(e);if(t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)){return[e]}return r(e)};minimatch.braceExpand=braceExpand;const makeRe=(e,t={})=>new Minimatch(e,t).makeRe();minimatch.makeRe=makeRe;const match=(e,t,r={})=>{const n=new Minimatch(t,r);e=e.filter((e=>n.match(e)));if(n.options.nonull&&!e.length){e.push(t)}return e};minimatch.match=match;const M=/[?*]|[+@!]\(.*?\)|\[|\]/;const mjs_regExpEscape=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class Minimatch{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){assertValidPattern(e);t=t||{};this.options=t;this.pattern=e;this.platform=t.platform||_;this.isWindows=this.platform==="win32";this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===false;if(this.windowsPathsNoEscape){this.pattern=this.pattern.replace(/\\/g,"/")}this.preserveMultipleSlashes=!!t.preserveMultipleSlashes;this.regexp=null;this.negate=false;this.nonegate=!!t.nonegate;this.comment=false;this.empty=false;this.partial=!!t.partial;this.nocase=!!this.options.nocase;this.windowsNoMagicRoot=t.windowsNoMagicRoot!==undefined?t.windowsNoMagicRoot:!!(this.isWindows&&this.nocase);this.globSet=[];this.globParts=[];this.set=[];this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1){return true}for(const e of this.set){for(const t of e){if(typeof t!=="string")return true}}return false}debug(...e){}make(){const e=this.pattern;const t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=true;return}if(!e){this.empty=true;return}this.parseNegate();this.globSet=[...new Set(this.braceExpand())];if(t.debug){this.debug=(...e)=>console.error(...e)}this.debug(this.pattern,this.globSet);const r=this.globSet.map((e=>this.slashSplit(e)));this.globParts=this.preprocess(r);this.debug(this.pattern,this.globParts);let n=this.globParts.map(((e,t,r)=>{if(this.isWindows&&this.windowsNoMagicRoot){const t=e[0]===""&&e[1]===""&&(e[2]==="?"||!M.test(e[2]))&&!M.test(e[3]);const r=/^[a-z]:/i.test(e[0]);if(t){return[...e.slice(0,4),...e.slice(4).map((e=>this.parse(e)))]}else if(r){return[e[0],...e.slice(1).map((e=>this.parse(e)))]}}return e.map((e=>this.parse(e)))}));this.debug(this.pattern,n);this.set=n.filter((e=>e.indexOf(false)===-1));if(this.isWindows){for(let e=0;e<this.set.length;e++){const t=this.set[e];if(t[0]===""&&t[1]===""&&this.globParts[e][2]==="?"&&typeof t[3]==="string"&&/^[a-z]:$/i.test(t[3])){t[2]="?"}}}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar){for(let t=0;t<e.length;t++){for(let r=0;r<e[t].length;r++){if(e[t][r]==="**"){e[t][r]="*"}}}}const{optimizationLevel:t=1}=this.options;if(t>=2){e=this.firstPhasePreProcess(e);e=this.secondPhasePreProcess(e)}else if(t>=1){e=this.levelOneOptimize(e)}else{e=this.adjascentGlobstarOptimize(e)}return e}adjascentGlobstarOptimize(e){return e.map((e=>{let t=-1;while(-1!==(t=e.indexOf("**",t+1))){let r=t;while(e[r+1]==="**"){r++}if(r!==t){e.splice(t,r-t)}}return e}))}levelOneOptimize(e){return e.map((e=>{e=e.reduce(((e,t)=>{const r=e[e.length-1];if(t==="**"&&r==="**"){return e}if(t===".."){if(r&&r!==".."&&r!=="."&&r!=="**"){e.pop();return e}}e.push(t);return e}),[]);return e.length===0?[""]:e}))}levelTwoFileOptimize(e){if(!Array.isArray(e)){e=this.slashSplit(e)}let t=false;do{t=false;if(!this.preserveMultipleSlashes){for(let r=1;r<e.length-1;r++){const n=e[r];if(r===1&&n===""&&e[0]==="")continue;if(n==="."||n===""){t=true;e.splice(r,1);r--}}if(e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")){t=true;e.pop()}}let r=0;while(-1!==(r=e.indexOf("..",r+1))){const n=e[r-1];if(n&&n!=="."&&n!==".."&&n!=="**"){t=true;e.splice(r-1,2);r-=2}}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=false;do{t=false;for(let r of e){let n=-1;while(-1!==(n=r.indexOf("**",n+1))){let i=n;while(r[i+1]==="**"){i++}if(i>n){r.splice(n+1,i-n)}let s=r[n+1];const o=r[n+2];const a=r[n+3];if(s!=="..")continue;if(!o||o==="."||o===".."||!a||a==="."||a===".."){continue}t=true;r.splice(n,1);const l=r.slice(0);l[n]="**";e.push(l);n--}if(!this.preserveMultipleSlashes){for(let e=1;e<r.length-1;e++){const n=r[e];if(e===1&&n===""&&r[0]==="")continue;if(n==="."||n===""){t=true;r.splice(e,1);e--}}if(r[0]==="."&&r.length===2&&(r[1]==="."||r[1]==="")){t=true;r.pop()}}let i=0;while(-1!==(i=r.indexOf("..",i+1))){const e=r[i-1];if(e&&e!=="."&&e!==".."&&e!=="**"){t=true;const e=i===1&&r[i+1]==="**";const n=e?["."]:[];r.splice(i-1,2,...n);if(r.length===0)r.push("");i-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++){for(let r=t+1;r<e.length;r++){const n=this.partsMatch(e[t],e[r],!this.preserveMultipleSlashes);if(!n)continue;e[t]=n;e[r]=[]}}return e.filter((e=>e.length))}partsMatch(e,t,r=false){let n=0;let i=0;let s=[];let o="";while(n<e.length&&i<t.length){if(e[n]===t[i]){s.push(o==="b"?t[i]:e[n]);n++;i++}else if(r&&e[n]==="**"&&t[i]===e[n+1]){s.push(e[n]);n++}else if(r&&t[i]==="**"&&e[n]===t[i+1]){s.push(t[i]);i++}else if(e[n]==="*"&&t[i]&&(this.options.dot||!t[i].startsWith("."))&&t[i]!=="**"){if(o==="b")return false;o="a";s.push(e[n]);n++;i++}else if(t[i]==="*"&&e[n]&&(this.options.dot||!e[n].startsWith("."))&&e[n]!=="**"){if(o==="a")return false;o="b";s.push(t[i]);n++;i++}else{return false}}return e.length===t.length&&s}parseNegate(){if(this.nonegate)return;const e=this.pattern;let t=false;let r=0;for(let n=0;n<e.length&&e.charAt(n)==="!";n++){t=!t;r++}if(r)this.pattern=e.slice(r);this.negate=t}matchOne(e,t,r=false){const n=this.options;if(this.isWindows){const r=typeof e[0]==="string"&&/^[a-z]:$/i.test(e[0]);const n=!r&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]);const i=typeof t[0]==="string"&&/^[a-z]:$/i.test(t[0]);const s=!i&&t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]==="string"&&/^[a-z]:$/i.test(t[3]);const o=n?3:r?0:undefined;const a=s?3:i?0:undefined;if(typeof o==="number"&&typeof a==="number"){const[r,n]=[e[o],t[a]];if(r.toLowerCase()===n.toLowerCase()){t[a]=r;if(a>o){t=t.slice(a)}else if(o>a){e=e.slice(o)}}}}const{optimizationLevel:i=1}=this.options;if(i>=2){e=this.levelTwoFileOptimize(e)}this.debug("matchOne",this,{file:e,pattern:t});this.debug("matchOne",e.length,t.length);for(var s=0,o=0,a=e.length,l=t.length;s<a&&o<l;s++,o++){this.debug("matchOne loop");var u=t[o];var c=e[s];this.debug(t,u,c);if(u===false){return false}if(u===x){this.debug("GLOBSTAR",[t,u,c]);var f=s;var h=o+1;if(h===l){this.debug("** at the end");for(;s<a;s++){if(e[s]==="."||e[s]===".."||!n.dot&&e[s].charAt(0)===".")return false}return true}while(f<a){var d=e[f];this.debug("\nglobstar while",e,f,t,h,d);if(this.matchOne(e.slice(f),t.slice(h),r)){this.debug("globstar found match!",f,a,d);return true}else{if(d==="."||d===".."||!n.dot&&d.charAt(0)==="."){this.debug("dot detected!",e,f,t,h);break}this.debug("globstar swallow a segment, and continue");f++}}if(r){this.debug("\n>>> no match, partial?",e,f,t,h);if(f===a){return true}}return false}let i;if(typeof u==="string"){i=c===u;this.debug("string match",u,c,i)}else{i=u.test(c);this.debug("pattern match",u,c,i)}if(!i)return false}if(s===a&&o===l){return true}else if(s===a){return r}else if(o===l){return s===a-1&&e[s]===""}else{throw new Error("wtf?")}}braceExpand(){return braceExpand(this.pattern,this.options)}parse(e){assertValidPattern(e);const t=this.options;if(e==="**")return x;if(e==="")return"";let r;let n=null;if(r=e.match(y)){n=t.dot?starTestDot:starTest}else if(r=e.match(p)){n=(t.nocase?t.dot?starDotExtTestNocaseDot:starDotExtTestNocase:t.dot?starDotExtTestDot:starDotExtTest)(r[1])}else if(r=e.match(v)){n=(t.nocase?t.dot?qmarksTestNocaseDot:qmarksTestNocase:t.dot?qmarksTestDot:qmarksTest)(r)}else if(r=e.match(g)){n=t.dot?starDotStarTestDot:starDotStarTest}else if(r=e.match(b)){n=dotStarTest}const i=AST.fromGlob(e,this.options).toMMPattern();return n?Object.assign(i,{test:n}):i}makeRe(){if(this.regexp||this.regexp===false)return this.regexp;const e=this.set;if(!e.length){this.regexp=false;return this.regexp}const t=this.options;const r=t.noglobstar?k:t.dot?O:T;const n=new Set(t.nocase?["i"]:[]);let i=e.map((e=>{const t=e.map((e=>{if(e instanceof RegExp){for(const t of e.flags.split(""))n.add(t)}return typeof e==="string"?mjs_regExpEscape(e):e===x?x:e._src}));t.forEach(((e,n)=>{const i=t[n+1];const s=t[n-1];if(e!==x||s===x){return}if(s===undefined){if(i!==undefined&&i!==x){t[n+1]="(?:\\/|"+r+"\\/)?"+i}else{t[n]=r}}else if(i===undefined){t[n-1]=s+"(?:\\/|"+r+")?"}else if(i!==x){t[n-1]=s+"(?:\\/|\\/"+r+"\\/)"+i;t[n+1]=x}}));return t.filter((e=>e!==x)).join("/")})).join("|");const[s,o]=e.length>1?["(?:",")"]:["",""];i="^"+s+i+o+"$";if(this.negate)i="^(?!"+i+").+$";try{this.regexp=new RegExp(i,[...n].join(""))}catch(e){this.regexp=false}return this.regexp}slashSplit(e){if(this.preserveMultipleSlashes){return e.split("/")}else if(this.isWindows&&/^\/\/[^\/]+/.test(e)){return["",...e.split(/\/+/)]}else{return e.split(/\/+/)}}match(e,t=this.partial){this.debug("match",e,this.pattern);if(this.comment){return false}if(this.empty){return e===""}if(e==="/"&&t){return true}const r=this.options;if(this.isWindows){e=e.split("\\").join("/")}const n=this.slashSplit(e);this.debug(this.pattern,"split",n);const i=this.set;this.debug(this.pattern,"set",i);let s=n[n.length-1];if(!s){for(let e=n.length-2;!s&&e>=0;e--){s=n[e]}}for(let e=0;e<i.length;e++){const o=i[e];let a=n;if(r.matchBase&&o.length===1){a=[s]}const l=this.matchOne(a,o,t);if(l){if(r.flipNegate){return true}return!this.negate}}if(r.flipNegate){return false}return this.negate}static defaults(e){return minimatch.defaults(e).Minimatch}}minimatch.AST=AST;minimatch.Minimatch=Minimatch;minimatch.escape=escape_escape;minimatch.unescape=unescape_unescape;var C=__nccwpck_require__(9002);var A=__nccwpck_require__(2498);var R=__nccwpck_require__(8118);var P=__nccwpck_require__(95);var N=__nccwpck_require__(6768);const L=null&&WebSocket;const j=["ghost-text-changed","ghost-buffer-delete"];function startServer(e,r){const n=(0,t.createServer)(((e,t)=>{if(e.method==="POST"){t.writeHead(200).end();n.close();return}t.writeHead(200,{"Content-Type":"application/json"}).end(JSON.stringify({ProtocolVersion:1,WebSocketPort:r.port}))}));const i=new N({server:n});i.on("connection",(async(t,n)=>{let i=null;for(const t of j){await e.subscribe(t)}e.on("notification",(async(e,[r])=>{if(e==="ghost-text-changed"){const e=(await(i?.lines))?.join("\n")??"";const r={text:e};t.send(JSON.stringify(r))}if(e==="ghost-buffer-delete"){t.close()}}));t.on("close",(async()=>{i=null;for(const t of j){await e.unsubscribe(t)}}));t.on("message",(async t=>{const n=JSON.parse(String(t));if(!i){i=await e.createBuffer(true,true);i.name=n.url+".ghost-text";for(const[e,t]of Object.entries(r.filetype_domains)){for(const r of t){if(minimatch(n.url,r)){await i.setOption("filetype",e)}}}e.buffer=i}const s=n.text.split("\n");await i.setLines(s,{start:0,end:-1,strictIndexing:true})}))}));n.listen(r.port)}const D=process.argv[2];async function killExisting(e){try{await fetch(`http://localhost:${e}`,{method:"POST"})}catch(e){}}async function main(){const t=(0,e.ub)({socket:D});const r=await t.getVar("ghost_text_props");await killExisting(r.port);startServer(t,r)}void main()})();